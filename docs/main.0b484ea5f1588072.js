"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[179],{2011:(yt,be,F)=>{F.d(be,{Dh:()=>le,GT:()=>oe,cc:()=>me,hO:()=>Oe,on:()=>H,pX:()=>ce,xv:()=>he});var p=F(4650),U=F(9260),k=F(462);yt=F.hmd(yt);const ee=["ngOnDestroy"],ce=(De,Ae,Te,Me={})=>new Proxy(De,{get:(Re,Ce)=>Te.runOutsideAngular(()=>{var He;if(De[Ce])return!(null===(He=Me?.spy)||void 0===He)&&He.get&&Me.spy.get(Ce,De[Ce]),De[Ce];if(ee.indexOf(Ce)>-1)return()=>{};const Z=Ae.toPromise().then(re=>{const _e=re&&re[Ce];return"function"==typeof _e?_e.bind(re):_e&&_e.then?_e.then(Qe=>Te.run(()=>Qe)):Te.run(()=>_e)});return new Proxy(()=>{},{get:(re,_e)=>Z[_e],apply:(re,_e,Qe)=>Z.then(Ge=>{var xt;const Xe=Ge&&Ge(...Qe);return!(null===(xt=Me?.spy)||void 0===xt)&&xt.apply&&Me.spy.apply(Ce,Qe,Xe),Xe})})})}),oe=(De,Ae)=>{Ae.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(Me=>{Object.defineProperty(De.prototype,Me,Object.getOwnPropertyDescriptor(Te.prototype||Te,Me))})})};class fe{constructor(Ae){return Ae}}const le=new p.OlP("angularfire2.app.options"),he=new p.OlP("angularfire2.app.name");function H(De,Ae,Te){const Re="object"==typeof Te&&Te||{};Re.name=Re.name||"string"==typeof Te&&Te||"[DEFAULT]";const He=U.Z.apps.filter(Z=>Z&&Z.name===Re.name)[0]||Ae.runOutsideAngular(()=>U.Z.initializeApp(De,Re));try{JSON.stringify(De)!==JSON.stringify(He.options)&&j("error",`${He.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(He)}const j=(De,...Ae)=>{(0,p.X6Q)()&&typeof console<"u"&&console[De](...Ae)},Q={provide:fe,useFactory:H,deps:[le,p.R0b,[new p.FiY,he]]};let Oe=(()=>{class De{constructor(Te){U.Z.registerVersion("angularfire",k.q4.full,"core"),U.Z.registerVersion("angularfire",k.q4.full,"app-compat"),U.Z.registerVersion("angular",p.q4F.full,Te.toString())}static initializeApp(Te,Me){return{ngModule:De,providers:[{provide:le,useValue:Te},{provide:he,useValue:Me}]}}}return De.\u0275fac=function(Te){return new(Te||De)(p.LFG(p.Lbi))},De.\u0275mod=p.oAB({type:De}),De.\u0275inj=p.cJS({providers:[Q]}),De})();function me(De,Ae,Te,Me,Re){const[,Ce,He]=globalThis.\u0275AngularfireInstanceCache.find(Z=>Z[0]===De)||[];if(Ce)return function Ke(De,Ae){try{return De.toString()===Ae.toString()}catch{return De===Ae}}(Re,He)||(pe("error",`${Ae} was already initialized on the ${Te} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Re,was:He})),Ce;{const Z=Me();return globalThis.\u0275AngularfireInstanceCache.push([De,Z,Re]),Z}}const et=!!yt.hot,pe=(De,...Ae)=>{(0,p.X6Q)()&&typeof console<"u"&&console[De](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},462:(yt,be,F)=>{F.d(be,{q4:()=>fo,iC:()=>Hs,HU:()=>eu,vb:()=>Ds,JM:()=>mc,nk:()=>gc,u3:()=>tu});var p=F(4650),U=F(259),k=F(5861),ee=F(9681),ce=F(2090),oe=F(4859),fe=F(1877);F(2833);const he="@firebase/remote-config",H="0.4.3",me=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ge{constructor(L,W,ne,$e){this.client=L,this.storage=W,this.storageCache=ne,this.logger=$e}isCachedDataFresh(L,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-W,$e=ne<=L;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${L}. Is cache hit: ${$e}.`),$e}fetch(L){var W=this;return(0,k.Z)(function*(){const[ne,$e]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if($e&&W.isCachedDataFresh(L.cacheMaxAgeMillis,ne))return $e;L.eTag=$e&&$e.eTag;const Ze=yield W.client.fetch(L),Dt=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ze.status&&Dt.push(W.storage.setLastSuccessfulFetchResponse(Ze)),yield Promise.all(Dt),Ze})()}}function xe(P=navigator){return P.languages&&P.languages[0]||P.language}class Le{constructor(L,W,ne,$e,Ze,Dt){this.firebaseInstallations=L,this.sdkVersion=W,this.namespace=ne,this.projectId=$e,this.apiKey=Ze,this.appId=Dt}fetch(L){var W=this;return(0,k.Z)(function*(){const[ne,$e]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,en={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":L.eTag||"*"},jn={sdk_version:W.sdkVersion,app_instance_id:ne,app_instance_id_token:$e,app_id:W.appId,language_code:xe()},In={method:"POST",headers:en,body:JSON.stringify(jn)},kn=fetch(Dt,In),Ft=new Promise((ei,us)=>{L.signal.addEventListener(()=>{const oa=new Error("The operation was aborted.");oa.name="AbortError",us(oa)})});let as;try{yield Promise.race([kn,Ft]),as=yield kn}catch(ei){let us="fetch-client-network";throw"AbortError"===ei?.name&&(us="fetch-timeout"),me.create(us,{originalErrorMessage:ei?.message})}let ci=as.status;const Pt=as.headers.get("ETag")||void 0;let Gs,sa;if(200===as.status){let ei;try{ei=yield as.json()}catch(us){throw me.create("fetch-client-parse",{originalErrorMessage:us?.message})}Gs=ei.entries,sa=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===sa?ci=500:"NO_CHANGE"===sa?ci=304:("NO_TEMPLATE"===sa||"EMPTY_CONFIG"===sa)&&(Gs={}),304!==ci&&200!==ci)throw me.create("fetch-status",{httpStatus:ci});return{status:ci,eTag:Pt,config:Gs}})()}}class nt{constructor(L,W){this.client=L,this.storage=W}fetch(L){var W=this;return(0,k.Z)(function*(){const ne=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(L,ne)})()}attemptFetch(L,{throttleEndTimeMillis:W,backoffCount:ne}){var $e=this;return(0,k.Z)(function*(){yield function Ve(P,L){return new Promise((W,ne)=>{const $e=Math.max(L-Date.now(),0),Ze=setTimeout(W,$e);P.addEventListener(()=>{clearTimeout(Ze),ne(me.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(L.signal,W);try{const Ze=yield $e.client.fetch(L);return yield $e.storage.deleteThrottleMetadata(),Ze}catch(Ze){if(!function tt(P){if(!(P instanceof ce.ZR&&P.customData))return!1;const L=Number(P.customData.httpStatus);return 429===L||500===L||503===L||504===L}(Ze))throw Ze;const Dt={throttleEndTimeMillis:Date.now()+(0,ce.$s)(ne),backoffCount:ne+1};return yield $e.storage.setThrottleMetadata(Dt),$e.attemptFetch(L,Dt)}})()}}class ft{constructor(L,W,ne,$e,Ze){this.app=L,this._client=W,this._storageCache=ne,this._storage=$e,this._logger=Ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ye(P,L){const W=P.target.error||void 0;return me.create(L,{originalErrorMessage:W&&W?.message})}const Ut="app_namespace_store";class yn{constructor(L,W,ne,$e=function rn(){return new Promise((P,L)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=ne=>{L(Ye(ne,"storage-open"))},W.onsuccess=ne=>{P(ne.target.result)},W.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Ut,{keyPath:"compositeKey"})}}catch(W){L(me.create("storage-open",{originalErrorMessage:W?.message}))}})}()){this.appId=L,this.appName=W,this.namespace=ne,this.openDbPromise=$e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(L){return this.set("last_fetch_status",L)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(L){return this.set("last_successful_fetch_timestamp_millis",L)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(L){return this.set("last_successful_fetch_response",L)}getActiveConfig(){return this.get("active_config")}setActiveConfig(L){return this.set("active_config",L)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(L){return this.set("active_config_etag",L)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(L){return this.set("throttle_metadata",L)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(L){var W=this;return(0,k.Z)(function*(){const ne=yield W.openDbPromise;return new Promise(($e,Ze)=>{const en=ne.transaction([Ut],"readonly").objectStore(Ut),jn=W.createCompositeKey(L);try{const In=en.get(jn);In.onerror=kn=>{Ze(Ye(kn,"storage-get"))},In.onsuccess=kn=>{const Ft=kn.target.result;$e(Ft?Ft.value:void 0)}}catch(In){Ze(me.create("storage-get",{originalErrorMessage:In?.message}))}})})()}set(L,W){var ne=this;return(0,k.Z)(function*(){const $e=yield ne.openDbPromise;return new Promise((Ze,Dt)=>{const jn=$e.transaction([Ut],"readwrite").objectStore(Ut),In=ne.createCompositeKey(L);try{const kn=jn.put({compositeKey:In,value:W});kn.onerror=Ft=>{Dt(Ye(Ft,"storage-set"))},kn.onsuccess=()=>{Ze()}}catch(kn){Dt(me.create("storage-set",{originalErrorMessage:kn?.message}))}})})()}delete(L){var W=this;return(0,k.Z)(function*(){const ne=yield W.openDbPromise;return new Promise(($e,Ze)=>{const en=ne.transaction([Ut],"readwrite").objectStore(Ut),jn=W.createCompositeKey(L);try{const In=en.delete(jn);In.onerror=kn=>{Ze(Ye(kn,"storage-delete"))},In.onsuccess=()=>{$e()}}catch(In){Ze(me.create("storage-delete",{originalErrorMessage:In?.message}))}})})()}createCompositeKey(L){return[this.appId,this.appName,this.namespace,L].join()}}class Yn{constructor(L){this.storage=L}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var L=this;return(0,k.Z)(function*(){const W=L.storage.getLastFetchStatus(),ne=L.storage.getLastSuccessfulFetchTimestampMillis(),$e=L.storage.getActiveConfig(),Ze=yield W;Ze&&(L.lastFetchStatus=Ze);const Dt=yield ne;Dt&&(L.lastSuccessfulFetchTimestampMillis=Dt);const en=yield $e;en&&(L.activeConfig=en)})()}setLastFetchStatus(L){return this.lastFetchStatus=L,this.storage.setLastFetchStatus(L)}setLastSuccessfulFetchTimestampMillis(L){return this.lastSuccessfulFetchTimestampMillis=L,this.storage.setLastSuccessfulFetchTimestampMillis(L)}setActiveConfig(L){return this.activeConfig=L,this.storage.setActiveConfig(L)}}function Dr(){return ln.apply(this,arguments)}function ln(){return(ln=(0,k.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function rr(){(0,ee._registerComponent)(new oe.wA("remote-config",function P(L,{instanceIdentifier:W}){const ne=L.getProvider("app").getImmediate(),$e=L.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw me.create("registration-window");if(!(0,ce.hl)())throw me.create("indexed-db-unavailable");const{projectId:Ze,apiKey:Dt,appId:en}=ne.options;if(!Ze)throw me.create("registration-project-id");if(!Dt)throw me.create("registration-api-key");if(!en)throw me.create("registration-app-id");const jn=new yn(en,ne.name,W=W||"firebase"),In=new Yn(jn),kn=new fe.Yd(he);kn.logLevel=fe.in.ERROR;const Ft=new Le($e,ee.SDK_VERSION,W,Ze,Dt,en),as=new nt(Ft,jn),ci=new ge(as,jn,In,kn),Pt=new ft(ne,ci,In,jn,kn);return function He(P){const L=(0,ce.m9)(P);L._initializePromise||(L._initializePromise=L._storageCache.loadFromStorage().then(()=>{L._isInitializationComplete=!0}))}(Pt),Pt},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(he,H),(0,ee.registerVersion)(he,H,"esm2017")}();var vn=F(8766);const ut="/firebase-messaging-sw.js",Fn="/firebase-cloud-messaging-push-scope",ir="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_n="https://fcmregistrations.googleapis.com/v1",Ln="google.c.a.c_id",Er="google.c.a.c_l",Ct="google.c.a.ts",pt="google.c.a.e";var Bt=(()=>{return(P=Bt||(Bt={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",Bt;var P})();function un(P){const L=new Uint8Array(P);return btoa(String.fromCharCode(...L)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vn(P){const W=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(W),$e=new Uint8Array(ne.length);for(let Ze=0;Ze<ne.length;++Ze)$e[Ze]=ne.charCodeAt(Ze);return $e}const hr="fcm_token_details_db",Un=5,Rr="fcm_token_object_Store";function Ir(){return Ir=(0,k.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ze=>Ze.name).includes(hr))return null;let L=null;return(yield(0,vn.X3)(hr,Un,{upgrade:(ne=(0,k.Z)(function*($e,Ze,Dt,en){var jn;if(Ze<2||!$e.objectStoreNames.contains(Rr))return;const In=en.objectStore(Rr),kn=yield In.index("fcmSenderId").get(P);if(yield In.clear(),kn)if(2===Ze){const Ft=kn;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;L={token:Ft.fcmToken,createTime:null!==(jn=Ft.createTime)&&void 0!==jn?jn:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:un(Ft.vapidKey)}}}else if(3===Ze){const Ft=kn;L={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:un(Ft.auth),p256dh:un(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:un(Ft.vapidKey)}}}else if(4===Ze){const Ft=kn;L={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:un(Ft.auth),p256dh:un(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:un(Ft.vapidKey)}}}}),function(Ze,Dt,en,jn){return ne.apply(this,arguments)})})).close(),yield(0,vn.Lj)(hr),yield(0,vn.Lj)("fcm_vapid_details_db"),yield(0,vn.Lj)("undefined"),function kt(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:L}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof L.auth&&L.auth.length>0&&"string"==typeof L.p256dh&&L.p256dh.length>0&&"string"==typeof L.endpoint&&L.endpoint.length>0&&"string"==typeof L.swScope&&L.swScope.length>0&&"string"==typeof L.vapidKey&&L.vapidKey.length>0}(L)?L:null;var ne}),Ir.apply(this,arguments)}const fr="firebase-messaging-database",Bn=1,Be="firebase-messaging-store";let we=null;function rt(){return we||(we=(0,vn.X3)(fr,Bn,{upgrade:(P,L)=>{0===L&&P.createObjectStore(Be)}})),we}function vt(P){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,k.Z)(function*(P){const L=M(P),ne=yield(yield rt()).transaction(Be).objectStore(Be).get(L);if(ne)return ne;{const $e=yield function Ot(P){return Ir.apply(this,arguments)}(P.appConfig.senderId);if($e)return yield $t(P,$e),$e}}),Rt.apply(this,arguments)}function $t(P,L){return $.apply(this,arguments)}function $(){return($=(0,k.Z)(function*(P,L){const W=M(P),$e=(yield rt()).transaction(Be,"readwrite");return yield $e.objectStore(Be).put(L,W),yield $e.done,L})).apply(this,arguments)}function N(){return(N=(0,k.Z)(function*(P){const L=M(P),ne=(yield rt()).transaction(Be,"readwrite");yield ne.objectStore(Be).delete(L),yield ne.done})).apply(this,arguments)}function M({appConfig:P}){return P.appId}const x=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function G(P,L){return ie.apply(this,arguments)}function ie(){return(ie=(0,k.Z)(function*(P,L){const W=yield En(P),ne=pn(L),$e={method:"POST",headers:W,body:JSON.stringify(ne)};let Ze;try{Ze=yield(yield fetch(Xt(P.appConfig),$e)).json()}catch(Dt){throw x.create("token-subscribe-failed",{errorInfo:Dt?.toString()})}if(Ze.error)throw x.create("token-subscribe-failed",{errorInfo:Ze.error.message});if(!Ze.token)throw x.create("token-subscribe-no-token");return Ze.token})).apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*(P,L){const W=yield En(P),ne=pn(L.subscriptionOptions),$e={method:"PATCH",headers:W,body:JSON.stringify(ne)};let Ze;try{Ze=yield(yield fetch(`${Xt(P.appConfig)}/${L.token}`,$e)).json()}catch(Dt){throw x.create("token-update-failed",{errorInfo:Dt?.toString()})}if(Ze.error)throw x.create("token-update-failed",{errorInfo:Ze.error.message});if(!Ze.token)throw x.create("token-update-no-token");return Ze.token})).apply(this,arguments)}function st(P,L){return Je.apply(this,arguments)}function Je(){return(Je=(0,k.Z)(function*(P,L){const ne={method:"DELETE",headers:yield En(P)};try{const Ze=yield(yield fetch(`${Xt(P.appConfig)}/${L}`,ne)).json();if(Ze.error)throw x.create("token-unsubscribe-failed",{errorInfo:Ze.error.message})}catch($e){throw x.create("token-unsubscribe-failed",{errorInfo:$e?.toString()})}})).apply(this,arguments)}function Xt({projectId:P}){return`${_n}/projects/${P}/registrations`}function En(P){return St.apply(this,arguments)}function St(){return(St=(0,k.Z)(function*({appConfig:P,installations:L}){const W=yield L.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function pn({p256dh:P,auth:L,endpoint:W,vapidKey:ne}){const $e={web:{endpoint:W,auth:L,p256dh:P}};return ne!==ir&&($e.web.applicationPubKey=ne),$e}const _s=6048e5;function uo(){return uo=(0,k.Z)(function*(P){const L=yield function Dn(P,L){return _t.apply(this,arguments)}(P.swRegistration,P.vapidKey),W={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:L.endpoint,auth:un(L.getKey("auth")),p256dh:un(L.getKey("p256dh"))},ne=yield vt(P.firebaseDependencies);if(ne){if(function nn(P,L){return L.vapidKey===P.vapidKey&&L.endpoint===P.endpoint&&L.auth===P.auth&&L.p256dh===P.p256dh}(ne.subscriptionOptions,W))return Date.now()>=ne.createTime+_s?function J(P,L){return ye.apply(this,arguments)}(P,{token:ne.token,createTime:Date.now(),subscriptionOptions:W}):ne.token;try{yield st(P.firebaseDependencies,ne.token)}catch($e){console.warn($e)}return je(P.firebaseDependencies,W)}return je(P.firebaseDependencies,W)}),uo.apply(this,arguments)}function Wn(){return Wn=(0,k.Z)(function*(P){const L=yield vt(P.firebaseDependencies);L&&(yield st(P.firebaseDependencies,L.token),yield function B(P){return N.apply(this,arguments)}(P.firebaseDependencies));const W=yield P.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()}),Wn.apply(this,arguments)}function ye(){return ye=(0,k.Z)(function*(P,L){try{const W=yield function Pe(P,L){return Ne.apply(this,arguments)}(P.firebaseDependencies,L),ne=Object.assign(Object.assign({},L),{token:W,createTime:Date.now()});return yield $t(P.firebaseDependencies,ne),W}catch(W){throw yield function co(P){return Wn.apply(this,arguments)}(P),W}}),ye.apply(this,arguments)}function je(P,L){return bt.apply(this,arguments)}function bt(){return(bt=(0,k.Z)(function*(P,L){const ne={token:yield G(P,L),createTime:Date.now(),subscriptionOptions:L};return yield $t(P,ne),ne.token})).apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(P,L){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vn(L)})})).apply(this,arguments)}function dn(P){const L={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Nr(P,L){if(!L.notification)return;P.notification={};const W=L.notification.title;W&&(P.notification.title=W);const ne=L.notification.body;ne&&(P.notification.body=ne);const $e=L.notification.image;$e&&(P.notification.image=$e);const Ze=L.notification.icon;Ze&&(P.notification.icon=Ze)}(L,P),function bn(P,L){L.data&&(P.data=L.data)}(L,P),function Or(P,L){var W,ne,$e,Ze,Dt;if(!(L.fcmOptions||null!==(W=L.notification)&&void 0!==W&&W.click_action))return;P.fcmOptions={};const en=null!==($e=null===(ne=L.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==$e?$e:null===(Ze=L.notification)||void 0===Ze?void 0:Ze.click_action;en&&(P.fcmOptions.link=en);const jn=null===(Dt=L.fcmOptions)||void 0===Dt?void 0:Dt.analytics_label;jn&&(P.fcmOptions.analyticsLabel=jn)}(L,P),L}function Lt(P,L){const W=[];for(let ne=0;ne<P.length;ne++)W.push(P.charAt(ne)),ne<L.length&&W.push(L.charAt(ne));return W.join("")}function Cr(P){return x.create("missing-app-config-values",{valueName:P})}Lt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Lt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ei{constructor(L,W,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $e=function $n(P){if(!P||!P.options)throw Cr("App Configuration Object");if(!P.name)throw Cr("App Name");const L=["projectId","apiKey","appId","messagingSenderId"],{options:W}=P;for(const ne of L)if(!W[ne])throw Cr(ne);return{appName:P.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(L);this.firebaseDependencies={app:L,appConfig:$e,installations:W,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function sr(P){return Li.apply(this,arguments)}function Li(){return(Li=(0,k.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(ut,{scope:Fn}),P.swRegistration.update().catch(()=>{})}catch(L){throw x.create("failed-service-worker-registration",{browserErrorMessage:L?.message})}})).apply(this,arguments)}function Us(){return(Us=(0,k.Z)(function*(P,L){if(!L&&!P.swRegistration&&(yield sr(P)),L||!P.swRegistration){if(!(L instanceof ServiceWorkerRegistration))throw x.create("invalid-sw-registration");P.swRegistration=L}})).apply(this,arguments)}function jt(){return(jt=(0,k.Z)(function*(P,L){L?P.vapidKey=L:P.vapidKey||(P.vapidKey=ir)})).apply(this,arguments)}function Vi(){return Vi=(0,k.Z)(function*(P,L){if(!navigator)throw x.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw x.create("permission-blocked");return yield function Bs(P,L){return jt.apply(this,arguments)}(P,L?.vapidKey),yield function On(P,L){return Us.apply(this,arguments)}(P,L?.serviceWorkerRegistration),function ns(P){return uo.apply(this,arguments)}(P)}),Vi.apply(this,arguments)}function rs(){return(rs=(0,k.Z)(function*(P,L,W){const ne=function pr(P){switch(P){case Bt.NOTIFICATION_CLICKED:return"notification_open";case Bt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(L);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:W[Ln],message_name:W[Er],message_time:W[Ct],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ii(){return Ii=(0,k.Z)(function*(P,L){const W=L.data;if(!W.isFirebaseMessaging)return;P.onMessageHandler&&W.messageType===Bt.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(dn(W)):P.onMessageHandler.next(dn(W)));const ne=W.data;(function ct(P){return"object"==typeof P&&!!P&&Ln in P})(ne)&&"1"===ne[pt]&&(yield function $s(P,L,W){return rs.apply(this,arguments)}(P,W.messageType,ne))}),Ii.apply(this,arguments)}const Gr="@firebase/messaging",Xa=P=>{const L=new Ei(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Zo(P,L){return Ii.apply(this,arguments)}(L,W)),L},Pn=P=>{const L=P.getProvider("messaging").getImmediate();return{getToken:ne=>function Es(P,L){return Vi.apply(this,arguments)}(L,ne)}};function Yo(){return js.apply(this,arguments)}function js(){return(js=(0,k.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function or(){(0,ee._registerComponent)(new oe.wA("messaging",Xa,"PUBLIC")),(0,ee._registerComponent)(new oe.wA("messaging-internal",Pn,"PRIVATE")),(0,ee.registerVersion)(Gr,"0.12.3"),(0,ee.registerVersion)(Gr,"0.12.3","esm2017")}();var lo=F(3008),Jo=F(4408),cf=F(7565);const Ui=new class fc extends cf.v{}(class kr extends Jo.o{constructor(L,W){super(L,W),this.scheduler=L,this.work=W}schedule(L,W=0){return W>0?super.schedule(L,W):(this.delay=W,this.state=L,this.scheduler.flush(this),this)}execute(L,W){return W>0||this.closed?super.execute(L,W):this._execute(L,W)}requestAsyncId(L,W,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(L,W,ne):(L.flush(this),0)}});var Xo=F(4986),zl=F(9751),Wl=F(8505),ql=F(9468),Kl=F(5363);const fo=new p.GfV("7.5.0"),ea="__angularfire_symbol__analyticsIsSupportedValue",ws="__angularfire_symbol__analyticsIsSupported",Zl="__angularfire_symbol__remoteConfigIsSupportedValue",pc="__angularfire_symbol__remoteConfigIsSupported",ta="__angularfire_symbol__messagingIsSupportedValue",zr="__angularfire_symbol__messagingIsSupported";globalThis[ws]||(globalThis[ws]=(0,lo.Gb)().then(P=>globalThis[ea]=P).catch(()=>globalThis[ea]=!1)),globalThis[zr]||(globalThis[zr]=Yo().then(P=>globalThis[ta]=P).catch(()=>globalThis[ta]=!1)),globalThis[pc]||(globalThis[pc]=Dr().then(P=>globalThis[Zl]=P).catch(()=>globalThis[Zl]=!1));const gc={async:()=>globalThis[ws],sync:()=>{const P=globalThis[ea];if(void 0===P)throw new Error((P=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${P} in the constructor, first ensure that ${P} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${P})\`.`)("Analytics"));return P}};function mc(P,L,W){if(L){if(1===L.length)return L[0];const Ze=L.filter(Dt=>Dt.app===W);if(1===Ze.length)return Ze[0]}return W.container.getProvider(P).getImmediate({optional:!0})}const Ds=(P,L)=>{const W=L?[L]:(0,U.C6)(),ne=[];return W.forEach($e=>{$e.container.getProvider(P).instances.forEach(Dt=>{ne.includes(Dt)||ne.push(Dt)})}),ne};function go(){}class mo{constructor(L,W=Ui){this.zone=L,this.delegate=W}now(){return this.delegate.now()}schedule(L,W,ne){const $e=this.zone;return this.delegate.schedule(function(Dt){$e.runGuarded(()=>{L.apply(this,[Dt])})},W,ne)}}class na{constructor(L){this.zone=L,this.task=null}call(L,W){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",go,{},go,go)),W.pipe((0,Wl.b)({next:ne,complete:ne,error:ne})).subscribe(L).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let eu=(()=>{class P{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new mo(Zone.current)),this.insideAngular=W.run(()=>new mo(Zone.current,Xo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(W){return new(W||P)(p.LFG(p.R0b))},P.\u0275prov=p.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function wi(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function os(P){return wi().ngZone.run(()=>P())}function Hs(P){return wi(),function Wr(P){return function(W){return(W=W.lift(new na(P.ngZone))).pipe((0,ql.R)(P.outsideAngular),(0,Kl.Q)(P.insideAngular))}}(wi())(P)}const ia=(P,L)=>function(){const ne=arguments;return L&&setTimeout(()=>{"scheduled"===L.state&&L.invoke()},10),os(()=>P.apply(void 0,ne))},tu=(P,L)=>function(){let W;const ne=arguments;for(let Ze=0;Ze<arguments.length;Ze++)"function"==typeof ne[Ze]&&(L&&(W||(W=os(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",go,{},go,go)))),ne[Ze]=ia(ne[Ze],W));const $e=function ra(P){return wi().ngZone.runOutsideAngular(()=>P())}(()=>P.apply(this,ne));if(!L){if($e instanceof zl.y){const Ze=wi();return $e.pipe((0,ql.R)(Ze.outsideAngular),(0,Kl.Q)(Ze.insideAngular))}return os(()=>$e)}return $e instanceof zl.y?$e.pipe(Hs):$e instanceof Promise?os(()=>new Promise((Ze,Dt)=>$e.then(en=>os(()=>Ze(en)),en=>os(()=>Dt(en))))):"function"==typeof $e&&W?function(){return setTimeout(()=>{W&&"scheduled"===W.state&&W.invoke()},10),$e.apply(this,arguments)}:os(()=>$e)}},2722:(yt,be,F)=>{F.d(be,{$:()=>Ze,A:()=>j,B:()=>me,G:()=>ye,H:()=>nn,J:()=>or,L:()=>$,M:()=>fc,N:()=>zl,P:()=>dD,Q:()=>Wl,R:()=>Tf,T:()=>ql,U:()=>Xo,V:()=>ws,W:()=>Zl,X:()=>Yl,Y:()=>Wr,Z:()=>tu,_:()=>L,a:()=>su,a0:()=>kn,a1:()=>as,a2:()=>Pt,a3:()=>sa,a4:()=>us,a5:()=>lf,a6:()=>zg,a7:()=>ve,a8:()=>I_,a9:()=>w_,aA:()=>B,aB:()=>kc,aC:()=>Ri,aD:()=>Ms,aE:()=>Wn,aI:()=>ou,aL:()=>fo,aa:()=>cs,ab:()=>hf,ac:()=>qg,af:()=>ua,ag:()=>zs,ah:()=>pf,ak:()=>go,al:()=>yf,an:()=>S_,ao:()=>Jl,ap:()=>_e,aq:()=>Je,ar:()=>Pe,as:()=>Te,at:()=>Vt,au:()=>Fc,av:()=>Xt,aw:()=>Me,ax:()=>Z,ay:()=>gd,az:()=>Ge,b:()=>Ef,c:()=>Oc,d:()=>F_,e:()=>k_,f:()=>fi,g:()=>Nf,h:()=>Rf,i:()=>od,j:()=>Of,k:()=>Ff,l:()=>lD,m:()=>Vf,o:()=>le,r:()=>am,s:()=>sm,u:()=>Af,v:()=>Jg});var p=F(5861),U=F(2090),k=F(9681),ee=F(1877),ce=F(655),oe=F(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const me=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ke=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},et=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new ee.Yd("@firebase/auth");function Ae(v,...f){De.logLevel<=ee.in.ERROR&&De.error(`Auth (${k.SDK_VERSION}): ${v}`,...f)}function Te(v,...f){throw He(v,...f)}function Me(v,...f){return He(v,...f)}function Re(v,f,m){const I=Object.assign(Object.assign({},Ke()),{[f]:m});return new U.LL("auth","Firebase",I).create(f,{appName:v.name})}function Ce(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Te(v,"argument-error"),Re(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...f){if("string"!=typeof v){const m=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return et.create(v,...f)}function Z(v,f,...m){if(!v)throw He(f,...m)}function re(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Ae(f),new Error(f)}function _e(v,f){v||re(f)}const Qe=new Map;function Ge(v){_e(v instanceof Function,"Expected a class definition");let f=Qe.get(v);return f?(_e(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Qe.set(v,f),f)}function se(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function de(){return"http:"===ge()||"https:"===ge()}function ge(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ve{constructor(f,m){this.shortDelay=f,this.longDelay=m,_e(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function xe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(de()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tt(v,f){_e(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class nt{static initialize(f,m,I){this.fetchImpl=f,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wt=new Ve(3e4,6e4);function ft(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Ye(v,f,m,I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(v,f,m,I,S={}){return mn(v,S,(0,p.Z)(function*(){let O={},K={};I&&("GET"===f?K=I:O={body:JSON.stringify(I)});const Se=(0,U.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),lt=yield v._getAdditionalHeaders();return lt["Content-Type"]="application/json",v.languageCode&&(lt["X-Firebase-Locale"]=v.languageCode),nt.fetch()(Yn(v,v.config.apiHost,m,Se),Object.assign({method:f,headers:lt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function mn(v,f,m){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},fn),f);try{const S=new rr(v),O=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw zn(v,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const Se=O.ok?K.errorMessage:K.error.message,[lt,dt]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw zn(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===lt)throw zn(v,"email-already-in-use",K);if("USER_DISABLED"===lt)throw zn(v,"user-disabled",K);const tn=I[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw Re(v,tn,dt);Te(v,tn)}}catch(S){if(S instanceof U.ZR)throw S;Te(v,"network-request-failed")}})).apply(this,arguments)}function rn(v,f,m,I){return yn.apply(this,arguments)}function yn(){return(yn=(0,p.Z)(function*(v,f,m,I,S={}){const O=yield Ye(v,f,m,I,S);return"mfaPendingCredential"in O&&Te(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Yn(v,f,m,I){const S=`${f}${m}?${I}`;return v.config.emulator?tt(v.config,S):`${v.config.apiScheme}://${S}`}class rr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Me(this.auth,"network-request-failed")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(v,f,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const S=Me(v,f,I);return S.customData._tokenResponse=m,S}function Dr(){return(Dr=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ir(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Er(){return(Er=(0,p.Z)(function*(v,f=!1){const m=(0,U.m9)(v),I=yield m.getIdToken(f),S=pt(I);Z(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,K=O?.sign_in_provider;return{claims:S,token:I,authTime:ir(Ct(S.auth_time)),issuedAtTime:ir(Ct(S.iat)),expirationTime:ir(Ct(S.exp)),signInProvider:K||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Ct(v){return 1e3*Number(v)}function pt(v){const[f,m,I]=v.split(".");if(void 0===f||void 0===m||void 0===I)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,U.tV)(m);return S?JSON.parse(S):(Ae("Failed to decode base64 JWT payload"),null)}catch(S){return Ae("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Bt(v,f){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(I){throw I instanceof U.ZR&&function Vn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class hr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),I)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class Un{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ir(this.lastLoginAt),this.creationTime=ir(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(v){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,p.Z)(function*(v){var f;const m=v.auth,I=yield v.getIdToken(),S=yield Bt(v,function ut(v,f){return Fn.apply(this,arguments)}(m,{idToken:I}));Z(S?.users.length,m,"internal-error");const O=S.users[0];v._notifyReloadListener(O);const K=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?function Bn(v){return v.map(f=>{var{providerId:m}=f,I=(0,ce._T)(f,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(O.providerUserInfo):[],Se=function fr(v,f){return[...v.filter(I=>!f.some(S=>S.providerId===I.providerId)),...f]}(v.providerData,K),tn=!!v.isAnonymous&&!(v.email&&O.passwordHash||Se?.length),An={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Se,metadata:new Un(O.createdAt,O.lastLoginAt),isAnonymous:tn};Object.assign(v,An)}),Ot.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(v){const f=(0,U.m9)(v);yield Rr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function we(){return(we=(0,p.Z)(function*(v,f){const m=yield mn(v,{},(0,p.Z)(function*(){const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:O}=v.config,K=Yn(v,S,"/v1/token",`key=${O}`),Se=yield v._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",nt.fetch()(K,{method:"POST",headers:Se,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Z(f.idToken,"internal-error"),Z(typeof f.idToken<"u","internal-error"),Z(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Tt(v){const f=pt(v);return Z(f,"internal-error"),Z(typeof f.exp<"u","internal-error"),Z(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var I=this;return(0,p.Z)(function*(){return Z(!I.accessToken||I.refreshToken,f,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var I=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:K}=yield function Be(v,f){return we.apply(this,arguments)}(f,m);I.updateTokensAndExpiration(S,O,Number(K))})()}updateTokensAndExpiration(f,m,I){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,m){const{refreshToken:I,accessToken:S,expirationTime:O}=m,K=new rt;return I&&(Z("string"==typeof I,"internal-error",{appName:f}),K.refreshToken=I),S&&(Z("string"==typeof S,"internal-error",{appName:f}),K.accessToken=S),O&&(Z("number"==typeof O,"internal-error",{appName:f}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return re("not implemented")}}function vt(v,f){Z("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Rt{constructor(f){var{uid:m,auth:I,stsTokenManager:S}=f,O=(0,ce._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Un(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const I=yield Bt(m,m.stsTokenManager.getToken(m.auth,f));return Z(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(f){return function Ln(v){return Er.apply(this,arguments)}(this,f)}reload(){return function Ir(v){return kt.apply(this,arguments)}(this)}_assign(f){this!==f&&(Z(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Rt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var I=this;return(0,p.Z)(function*(){let S=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield Rr(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Bt(f,function Qn(v,f){return Dr.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var I,S,O,K,Se,lt,dt,tn;const An=null!==(I=m.displayName)&&void 0!==I?I:void 0,pi=null!==(S=m.email)&&void 0!==S?S:void 0,hs=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,Qs=null!==(K=m.photoURL)&&void 0!==K?K:void 0,$i=null!==(Se=m.tenantId)&&void 0!==Se?Se:void 0,wa=null!==(lt=m._redirectEventId)&&void 0!==lt?lt:void 0,Da=null!==(dt=m.createdAt)&&void 0!==dt?dt:void 0,$f=null!==(tn=m.lastLoginAt)&&void 0!==tn?tn:void 0,{uid:xo,emailVerified:yu,isAnonymous:Dd,providerData:Bc,stsTokenManager:jf}=m;Z(xo&&jf,f,"internal-error");const _m=rt.fromJSON(this.name,jf);Z("string"==typeof xo,f,"internal-error"),vt(An,f.name),vt(pi,f.name),Z("boolean"==typeof yu,f,"internal-error"),Z("boolean"==typeof Dd,f,"internal-error"),vt(hs,f.name),vt(Qs,f.name),vt($i,f.name),vt(wa,f.name),vt(Da,f.name),vt($f,f.name);const Cd=new Rt({uid:xo,auth:f,email:pi,emailVerified:yu,displayName:An,isAnonymous:Dd,photoURL:Qs,phoneNumber:hs,tenantId:$i,stsTokenManager:_m,createdAt:Da,lastLoginAt:$f});return Bc&&Array.isArray(Bc)&&(Cd.providerData=Bc.map(vu=>Object.assign({},vu))),wa&&(Cd._redirectEventId=wa),Cd}static _fromIdTokenResponse(f,m,I=!1){return(0,p.Z)(function*(){const S=new rt;S.updateFromServerResponse(m);const O=new Rt({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:I});return yield Rr(O),O})()}}const $=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,I){var S=this;return(0,p.Z)(function*(){S.storage[m]=I})()}_get(m){var I=this;return(0,p.Z)(function*(){const S=I.storage[m];return void 0===S?null:S})()}_remove(m){var I=this;return(0,p.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function B(v,f,m){return`firebase:${v}:${f}:${m}`}class N{constructor(f,m,I){this.persistence=f,this.auth=m,this.userKey=I;const{config:S,name:O}=this.auth;this.fullUserKey=B(this.userKey,S.apiKey,O),this.fullPersistenceKey=B("persistence",S.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Rt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,I="authUser"){return(0,p.Z)(function*(){if(!m.length)return new N(Ge($),f,I);const S=(yield Promise.all(m.map(function(){var dt=(0,p.Z)(function*(tn){if(yield tn._isAvailable())return tn});return function(tn){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let O=S[0]||Ge($);const K=B(I,f.config.apiKey,f.name);let Se=null;for(const dt of m)try{const tn=yield dt._get(K);if(tn){const An=Rt._fromJSON(f,tn);dt!==O&&(Se=An),O=dt;break}}catch{}const lt=S.filter(dt=>dt._shouldAllowMigration);return O._shouldAllowMigration&&lt.length?(O=lt[0],Se&&(yield O._set(K,Se.toJSON())),yield Promise.all(m.map(function(){var dt=(0,p.Z)(function*(tn){if(tn!==O)try{yield tn._remove(K)}catch{}});return function(tn){return dt.apply(this,arguments)}}())),new N(O,f,I)):new N(O,f,I)})()}}function M(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ie(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(T(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ne(f))return"Blackberry";if(st(f))return"Webos";if(x(f))return"Safari";if((f.includes("chrome/")||G(f))&&!f.includes("edge/"))return"Chrome";if(Pe(f))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function T(v=(0,U.z$)()){return/firefox\//i.test(v)}function x(v=(0,U.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function G(v=(0,U.z$)()){return/crios\//i.test(v)}function ie(v=(0,U.z$)()){return/iemobile/i.test(v)}function Pe(v=(0,U.z$)()){return/android/i.test(v)}function Ne(v=(0,U.z$)()){return/blackberry/i.test(v)}function st(v=(0,U.z$)()){return/webos/i.test(v)}function Je(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Xt(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function pn(v=(0,U.z$)()){return Je(v)||Pe(v)||st(v)||Ne(v)||/windows phone/i.test(v)||ie(v)}function ns(v,f=[]){let m;switch(v){case"Browser":m=M((0,U.z$)());break;case"Worker":m=`${M((0,U.z$)())}-${v}`;break;default:m=v}const I=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${I}`}class uo{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const I=O=>new Promise((K,Se)=>{try{K(f(O))}catch(lt){Se(lt)}});I.onAbort=m,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){if(m.auth.currentUser===f)return;const I=[];try{for(const S of m.queue)yield S(f),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const O of I)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class co{constructor(f,m,I){this.app=f,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J(this),this.idTokenSubscription=new J(this),this.beforeStateQueue=new uo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(f,m){var I=this;return m&&(this._popupRedirectResolver=Ge(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,O;if(!I._deleted&&(I.persistenceManager=yield N.create(I,f),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var I;const S=yield m.assertedPersistence.getCurrentUser();let O=S,K=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Se=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,lt=O?._redirectEventId,dt=yield m.tryRedirectSignIn(f);(!Se||Se===lt)&&dt?.user&&(O=dt.user,K=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(O)}catch(Se){O=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Se))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return Z(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){try{yield Rr(f)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Le(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const I=f?(0,U.m9)(f):null;return I&&Z(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(f,m=!1){var I=this;return(0,p.Z)(function*(){if(!I._deleted)return f&&Z(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,p.Z)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(Ge(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new U.LL("auth","Firebase",f())}onAuthStateChanged(f,m,I){return this.registerStateListener(this.authStateSubscription,f,m,I)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,I){return this.registerStateListener(this.idTokenSubscription,f,m,I)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var I=this;return(0,p.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const I=f&&Ge(f)||m._popupRedirectResolver;Z(I,m,"argument-error"),m.redirectPersistenceManager=yield N.create(m,[Ge(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var I,S;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,I,S){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return Z(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof m?f.addObserver(m,I,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ns(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(I["X-Firebase-Client"]=S),I})()}}function Wn(v){return(0,U.m9)(v)}class J{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ye(v,f,m){const I=Wn(v);Z(I._canInitEmulator,I,"emulator-config-failed"),Z(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const S=!!m?.disableWarnings,O=je(f),{host:K,port:Se}=function bt(v){const f=je(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const O=S[1];return{host:O,port:Dn(I.substr(O.length+1))}}{const[O,K]=I.split(":");return{host:O,port:Dn(K)}}}(f);I.config.emulator={url:`${O}//${K}${null===Se?"":`:${Se}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:K,port:Se,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function _t(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function je(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Dn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class nn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return re("not implemented")}_getIdTokenResponse(f){return re("not implemented")}_linkToIdToken(f,m){return re("not implemented")}_getReauthenticationResolver(f){return re("not implemented")}}function dn(v,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:resetPassword",ft(v,f))})).apply(this,arguments)}function bn(v,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:update",ft(v,f))})).apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithPassword",ft(v,f))})).apply(this,arguments)}function Ei(v,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:sendOobCode",ft(v,f))})).apply(this,arguments)}function On(){return(On=(0,p.Z)(function*(v,f){return Ei(v,f)})).apply(this,arguments)}function Bs(){return(Bs=(0,p.Z)(function*(v,f){return Ei(v,f)})).apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(v,f){return Ei(v,f)})).apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(v,f){return Ei(v,f)})).apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithEmailLink",ft(v,f))})).apply(this,arguments)}function Ii(){return(Ii=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithEmailLink",ft(v,f))})).apply(this,arguments)}class Gr extends nn{constructor(f,m,I,S=null){super("password",I),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new Gr(f,m,"password")}static _fromEmailAndCode(f,m,I=null){return new Gr(f,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function $n(v,f){return Cr.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function rs(v,f){return pr.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,m){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return bn(f,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Zo(v,f){return Ii.apply(this,arguments)}(f,{idToken:m,email:I._email,oobCode:I._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Xr(v,f){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithIdp",ft(v,f))})).apply(this,arguments)}class or extends nn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new or(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:S}=m,O=(0,ce._T)(m,["providerId","signInMethod"]);if(!I||!S)return null;const K=new or(I,S);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(f){return Xr(f,this.buildRequest())}_linkToIdToken(f,m){const I=this.buildRequest();return I.idToken=m,Xr(f,I)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Xr(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,U.xO)(m)}return f}}function js(){return(js=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:sendVerificationCode",ft(v,f))})).apply(this,arguments)}function is(){return(is=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",ft(v,f))})).apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(v,f){const m=yield rn(v,"POST","/v1/accounts:signInWithPhoneNumber",ft(v,f));if(m.temporaryProof)throw zn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Gg={USER_NOT_FOUND:"user-not-found"};function ui(){return(ui=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",ft(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Gg)})).apply(this,arguments)}class ss extends nn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new ss({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new ss({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Qo(v,f){return is.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Is(v,f){return br.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Pr(v,f){return ui.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:I,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:I,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:O}=f;return I||m||S||O?new ss({verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:O}):null}}class kr{constructor(f){var m,I,S,O,K,Se;const lt=(0,U.zd)((0,U.pd)(f)),dt=null!==(m=lt.apiKey)&&void 0!==m?m:null,tn=null!==(I=lt.oobCode)&&void 0!==I?I:null,An=function lo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=lt.mode)&&void 0!==S?S:null);Z(dt&&tn&&An,"argument-error"),this.apiKey=dt,this.operation=An,this.code=tn,this.continueUrl=null!==(O=lt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=lt.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(Se=lt.tenantId)&&void 0!==Se?Se:null}static parseLink(f){const m=function Jo(v){const f=(0,U.zd)((0,U.pd)(v)).link,m=f?(0,U.zd)((0,U.pd)(f)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||m||f||v}(f);try{return new kr(m)}catch{return null}}}let fc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return Gr._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const S=kr.parseLink(I);return Z(S,"argument-error"),Gr._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ui{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ho extends Ui{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Xo extends ho{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return Z("providerId"in m&&"signInMethod"in m,"argument-error"),or._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Z(f.idToken||f.accessToken,"argument-error"),or._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Xo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Xo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:O,nonce:K,providerId:Se}=f;if(!I&&!S&&!m&&!O||!Se)return null;try{return new Xo(Se)._credential({idToken:m,accessToken:I,nonce:K,pendingToken:O})}catch{return null}}}let zl=(()=>{class v extends ho{constructor(){super("facebook.com")}static credential(m){return or._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Wl=(()=>{class v extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return or._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:S}=m;if(!I&&!S)return null;try{return v.credential(I,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ql=(()=>{class v extends ho{constructor(){super("github.com")}static credential(m){return or._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class fo extends nn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Xr(f,this.buildRequest())}_linkToIdToken(f,m){const I=this.buildRequest();return I.idToken=m,Xr(f,I)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Xr(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:S,pendingToken:O}=m;return I&&S&&O&&I===S?new fo(I,O):null}static _create(f,m){return new fo(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ws extends Ui{constructor(f){Z(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ws.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ws.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=fo.fromJSON(f);return Z(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:I}=f;if(!m||!I)return null;try{return fo._create(I,m)}catch{return null}}}let Zl=(()=>{class v extends ho{constructor(){super("twitter.com")}static credential(m,I){return or._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=m;if(!I||!S)return null;try{return v.credential(I,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function pc(v,f){return ta.apply(this,arguments)}function ta(){return(ta=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signUp",ft(v,f))})).apply(this,arguments)}class zr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,I,S=!1){return(0,p.Z)(function*(){const O=yield Rt._fromIdTokenResponse(f,I,S),K=po(I);return new zr({user:O,providerId:K,_tokenResponse:I,operationType:m})})()}static _forOperation(f,m,I){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const S=po(I);return new zr({user:f,providerId:S,_tokenResponse:I,operationType:m})})()}}function po(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Yl(v){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,p.Z)(function*(v){var f;const m=Wn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new zr({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield pc(m,{returnSecureToken:!0}),S=yield zr._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class gc extends U.ZR{constructor(f,m,I,S){var O;super(m.code,m.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,m,I,S){return new gc(f,m,I,S)}}function mc(v,f,m,I){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?gc._fromErrorAndOperation(v,O,f,I):O})}function Ds(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function go(v,f){return mo.apply(this,arguments)}function mo(){return mo=(0,p.Z)(function*(v,f){const m=(0,U.m9)(v);yield wi(!0,m,f);const{providerUserInfo:I}=yield function ln(v,f){return vn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=Ds(I||[]);return m.providerData=m.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),mo.apply(this,arguments)}function na(v,f){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(v,f,m=!1){const I=yield Bt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return zr._forOperation(v,"link",I)})).apply(this,arguments)}function wi(v,f,m){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(v,f,m){yield Rr(f);const S=!1===v?"provider-already-linked":"no-such-provider";Z(Ds(f.providerData).has(m)===v,f.auth,S)})).apply(this,arguments)}function os(v,f){return yc.apply(this,arguments)}function yc(){return(yc=(0,p.Z)(function*(v,f,m=!1){const{auth:I}=v,S="reauthenticate";try{const O=yield Bt(v,mc(I,S,f,v),m);Z(O.idToken,I,"internal-error");const K=pt(O.idToken);Z(K,I,"internal-error");const{sub:Se}=K;return Z(v.uid===Se,I,"user-mismatch"),zr._forOperation(v,S,O)}catch(O){throw"auth/user-not-found"===O?.code&&Te(I,"user-mismatch"),O}})).apply(this,arguments)}function vc(v,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,p.Z)(function*(v,f,m=!1){const I="signIn",S=yield mc(v,I,f),O=yield zr._fromIdTokenResponse(v,I,S);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Wr(v,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(v,f){return vc(Wn(v),f)})).apply(this,arguments)}function tu(v,f){return P.apply(this,arguments)}function P(){return(P=(0,p.Z)(function*(v,f){const m=(0,U.m9)(v);return yield wi(!1,m,f.providerId),na(m,f)})).apply(this,arguments)}function L(v,f){return W.apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(v,f){return os((0,U.m9)(v),f)})).apply(this,arguments)}function $e(){return($e=(0,p.Z)(function*(v,f){return rn(v,"POST","/v1/accounts:signInWithCustomToken",ft(v,f))})).apply(this,arguments)}function Ze(v,f){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,p.Z)(function*(v,f){const m=Wn(v),I=yield function ne(v,f){return $e.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),S=yield zr._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(S.user),S}),Dt.apply(this,arguments)}class en{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?jn._fromServerResponse(f,m):Te(f,"internal-error")}}class jn extends en{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new jn(m)}}function In(v,f,m){var I;Z((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),Z(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Z(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(Z(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function kn(v,f,m){return Ft.apply(this,arguments)}function Ft(){return Ft=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v),S={requestType:"PASSWORD_RESET",email:f};m&&In(I,S,m),yield function Us(v,f){return Bs.apply(this,arguments)}(I,S)}),Ft.apply(this,arguments)}function as(v,f,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(v,f,m){yield dn((0,U.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Pt(v,f){return Gs.apply(this,arguments)}function Gs(){return Gs=(0,p.Z)(function*(v,f){yield function ct(v,f){return Lt.apply(this,arguments)}((0,U.m9)(v),{oobCode:f})}),Gs.apply(this,arguments)}function sa(v,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,p.Z)(function*(v,f){const m=(0,U.m9)(v),I=yield dn(m,{oobCode:f}),S=I.requestType;switch(Z(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(I.mfaInfo,m,"internal-error");default:Z(I.email,m,"internal-error")}let O=null;return I.mfaInfo&&(O=en._fromServerResponse(Wn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function us(v,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(v,f){const{data:m}=yield sa((0,U.m9)(v),f);return m.email})).apply(this,arguments)}function lf(v,f,m){return df.apply(this,arguments)}function df(){return(df=(0,p.Z)(function*(v,f,m){const I=Wn(v),S=yield pc(I,{returnSecureToken:!0,email:f,password:m}),O=yield zr._fromIdTokenResponse(I,"signIn",S);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function zg(v,f,m){return Wr((0,U.m9)(v),fc.credential(f,m))}function ve(v,f,m){return cn.apply(this,arguments)}function cn(){return cn=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v),S={requestType:"EMAIL_SIGNIN",email:f};Z(m.handleCodeInApp,I,"argument-error"),m&&In(I,S,m),yield function jt(v,f){return Es.apply(this,arguments)}(I,S)}),cn.apply(this,arguments)}function I_(v,f){return"EMAIL_SIGNIN"===kr.parseLink(f)?.operation}function w_(v,f,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v),S=fc.credentialWithLink(f,m||se());return Z(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Wr(I,S)})).apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:createAuthUri",ft(v,f))})).apply(this,arguments)}function cs(v,f){return _c.apply(this,arguments)}function _c(){return _c=(0,p.Z)(function*(v,f){const I={identifier:f,continueUri:de()?se():"http://localhost"},{signinMethods:S}=yield function Wg(v,f){return aa.apply(this,arguments)}((0,U.m9)(v),I);return S||[]}),_c.apply(this,arguments)}function hf(v,f){return ff.apply(this,arguments)}function ff(){return ff=(0,p.Z)(function*(v,f){const m=(0,U.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&In(m.auth,S,f);const{email:O}=yield function Li(v,f){return On.apply(this,arguments)}(m.auth,S);O!==v.email&&(yield v.reload())}),ff.apply(this,arguments)}function qg(v,f,m){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&In(I.auth,O,m);const{email:K}=yield function Vi(v,f){return $s.apply(this,arguments)}(I.auth,O);K!==v.email&&(yield v.reload())}),Ec.apply(this,arguments)}function Di(){return(Di=(0,p.Z)(function*(v,f){return Ye(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ua(v,f){return yo.apply(this,arguments)}function yo(){return yo=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const I=(0,U.m9)(v),O={idToken:yield I.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},K=yield Bt(I,function ti(v,f){return Di.apply(this,arguments)}(I.auth,O));I.displayName=K.displayName||null,I.photoURL=K.photoUrl||null;const Se=I.providerData.find(({providerId:lt})=>"password"===lt);Se&&(Se.displayName=I.displayName,Se.photoURL=I.photoURL),yield I._updateTokensIfNecessary(K)}),yo.apply(this,arguments)}function zs(v,f){return Ic((0,U.m9)(v),f,null)}function pf(v,f){return Ic((0,U.m9)(v),null,f)}function Ic(v,f,m){return gf.apply(this,arguments)}function gf(){return(gf=(0,p.Z)(function*(v,f,m){const{auth:I}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(O.email=f),m&&(O.password=m);const K=yield Bt(v,bn(I,O));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Ws{constructor(f,m,I={}){this.isNewUser=f,this.providerId=m,this.profile=I}}class nu extends Ws{constructor(f,m,I,S){super(f,m,I),this.username=S}}class Kg extends Ws{constructor(f,m){super(f,"facebook.com",m)}}class mf extends nu{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class C_ extends Ws{constructor(f,m){super(f,"google.com",m)}}class Zg extends nu{constructor(f,m,I){super(f,"twitter.com",m,I)}}function yf(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function D_(v){var f,m;if(!v)return null;const{providerId:I}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const K=null===(m=null===(f=pt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new Ws(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!I)return null;switch(I){case"facebook.com":return new Kg(O,S);case"github.com":return new mf(O,S);case"google.com":return new C_(O,S);case"twitter.com":return new Zg(O,S,v.screenName||null);case"custom":case"anonymous":return new Ws(O,null);default:return new Ws(O,I,S)}}(m)}function Jg(v,f,m,I){return(0,U.m9)(v).onAuthStateChanged(f,m,I)}class Tn{constructor(f,m,I){this.type=f,this.credential=m,this.auth=I}static _fromIdtoken(f,m){return new Tn("enroll",f,m)}static _fromMfaPendingCredential(f){return new Tn("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,I;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Tn._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return Tn._fromIdtoken(f.multiFactorSession.idToken)}return null}}class vf{constructor(f,m,I){this.session=f,this.hints=m,this.signInResolver=I}static _fromError(f,m){const I=Wn(f),S=m.customData._serverResponse,O=(S.mfaInfo||[]).map(Se=>en._fromServerResponse(I,Se));Z(S.mfaPendingCredential,I,"internal-error");const K=Tn._fromMfaPendingCredential(S.mfaPendingCredential);return new vf(K,O,function(){var Se=(0,p.Z)(function*(lt){const dt=yield lt._process(I,K);delete S.mfaInfo,delete S.mfaPendingCredential;const tn=Object.assign(Object.assign({},S),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(m.operationType){case"signIn":const An=yield zr._fromIdTokenResponse(I,m.operationType,tn);return yield I._updateCurrentUser(An.user),An;case"reauthenticate":return Z(m.user,I,"internal-error"),zr._forOperation(m.user,m.operationType,tn);default:Te(I,"internal-error")}});return function(lt){return Se.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function S_(v,f){var m;const I=(0,U.m9)(v),S=f;return Z(f.customData.operationType,I,"argument-error"),Z(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),vf._fromError(I,S)}class _f{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>en._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new _f(f)}getSession(){var f=this;return(0,p.Z)(function*(){return Tn._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var I=this;return(0,p.Z)(function*(){const S=f,O=yield I.getSession(),K=yield Bt(I.user,S._process(I.user.auth,O,m));return yield I.user._updateTokensIfNecessary(K),I.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){const I="string"==typeof f?f:f.uid,S=yield m.user.getIdToken();try{const O=yield Bt(m.user,function x_(v,f){return Ye(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(v,f))}(m.user.auth,{idToken:S,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:K})=>K!==I),yield m.user._updateTokensIfNecessary(O),yield m.user.reload()}catch(O){throw O}})()}}const ru=new WeakMap;function Jl(v){const f=(0,U.m9)(v);return ru.has(f)||ru.set(f,_f._fromUser(f)),ru.get(f)}const ca="__sak";class wc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ef=(()=>{class v extends wc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Dc(){const v=(0,U.z$)();return x(v)||Je(v)}()&&function _s(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),O=this.localCache[I];S!==O&&m(I,O,S)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((Se,lt,dt)=>{this.notifyListeners(Se,dt)});const S=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(S);if(m.newValue!==Se)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!I)return}const O=()=>{const Se=this.storage.getItem(S);!I&&this.localCache[S]===Se||this.notifyListeners(S,Se)},K=this.storage.getItem(S);!function St(){return(0,U.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const O of Array.from(S))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var S=()=>super._set,O=this;return(0,p.Z)(function*(){yield S().call(O,m,I),O.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,S=this;return(0,p.Z)(function*(){const O=yield I().call(S,m);return S.localCache[m]=JSON.stringify(O),O})()}_remove(m){var I=()=>super._remove,S=this;return(0,p.Z)(function*(){yield I().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),su=(()=>{class v extends wc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let em=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(O=>O.isListeningto(m));if(I)return I;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,p.Z)(function*(){const S=m,{eventId:O,eventType:K,data:Se}=S.data,lt=I.handlersMap[K];if(!lt?.size)return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const dt=Array.from(lt).map(function(){var An=(0,p.Z)(function*(pi){return pi(S.origin,Se)});return function(pi){return An.apply(this,arguments)}}()),tn=yield function N_(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return f.apply(this,arguments)}}()))}(dt);S.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:tn})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ou(v="",f=10){let m="";for(let I=0;I<f;I++)m+=Math.floor(10*Math.random());return v+m}class Xl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,I=50){var S=this;return(0,p.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,Se;return new Promise((lt,dt)=>{const tn=ou("",20);O.port1.start();const An=setTimeout(()=>{dt(new Error("unsupported_event"))},I);Se={messageChannel:O,onMessage(pi){const hs=pi;if(hs.data.eventId===tn)switch(hs.data.status){case"ack":clearTimeout(An),K=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),lt(hs.data.response);break;default:clearTimeout(An),clearTimeout(K),dt(new Error("invalid_response"))}}},S.handlers.add(Se),O.port1.addEventListener("message",Se.onMessage),S.target.postMessage({eventType:f,eventId:tn,data:m},[O.port2])}).finally(()=>{Se&&S.removeMessageHandler(Se)})})()}}function ar(){return window}function au(){return typeof ar().WorkerGlobalScope<"u"&&"function"==typeof ar().importScripts}function bs(){return(bs=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ha="firebaseLocalStorageDb",tm=1,_o="firebaseLocalStorage",Tc="fbase_key";class Ts{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function td(v,f){return v.transaction([_o],f?"readwrite":"readonly").objectStore(_o)}function uu(){const v=indexedDB.open(ha,tm);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(_o,{keyPath:Tc})}catch(S){m(S)}}),v.addEventListener("success",(0,p.Z)(function*(){const I=v.result;I.objectStoreNames.contains(_o)?f(I):(I.close(),yield function If(){const v=indexedDB.deleteDatabase(ha);return new Ts(v).toPromise()}(),f(yield uu()))}))})}function nd(v,f,m){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(v,f,m){const I=td(v,!0).put({[Tc]:f,value:m});return new Ts(I).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(v,f){const m=td(v,!1).get(f),I=yield new Ts(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function cu(v,f){const m=td(v,!0).delete(f);return new Ts(m).toPromise()}const od=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield uu()),m.db})()}_withRetries(m){var I=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const O=yield I._openDb();return yield m(O)}catch(O){if(S++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return au()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=em._getInstance(function ed(){return au()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*(S,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(S,O){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var I,S;if(m.activeServiceWorker=yield function da(){return bs.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Xl(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);O&&null!==(I=O[0])&&void 0!==I&&I.fulfilled&&null!==(S=O[0])&&void 0!==S&&S.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function bc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield uu();return yield nd(m,ca,"1"),yield cu(m,ca),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(O=>nd(O,m,I)),S.localCache[m]=I,S.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,p.Z)(function*(){const S=yield I._withRetries(O=>function rd(v,f){return fa.apply(this,arguments)}(O,m));return I.localCache[m]=S,S})()}_remove(m){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries(S=>cu(S,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const I=yield m._withRetries(K=>{const Se=td(K,!1).getAll();return new Ts(Se).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:K,value:Se}of I)O.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(Se)&&(m.notifyListeners(K,Se),S.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!O.has(K)&&(m.notifyListeners(K,null),S.push(K));return S})()}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const O of Array.from(S))O(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ac(){return(Ac=(0,p.Z)(function*(v){return(yield Ye(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Eo(v){return new Promise((f,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=f,I.onerror=S=>{const O=Me("internal-error");O.customData=S,m(O)},I.type="text/javascript",I.charset="UTF-8",function nm(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(I)})}function Io(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Mc=1e12;class pa{constructor(f){this.auth=f,this.counter=Mc,this._widgets=new Map}render(f,m){const I=this.counter;return this._widgets.set(I,new rm(f,this.auth.name,m||{})),this.counter++,I}reset(f){var m;const I=f||Mc;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Mc))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var I;return null===(I=m._widgets.get(f||Mc))||void 0===I||I.execute(),""})()}}class rm{constructor(f,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;Z(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cf(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ga=Io("rcb"),im=new Ve(3e4,6e4);class xc{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=ar().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return Z(function wo(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ar().grecaptcha):new Promise((I,S)=>{const O=ar().setTimeout(()=>{S(Me(f,"network-request-failed"))},im.get());ar()[ga]=()=>{ar().clearTimeout(O),delete ar()[ga];const Se=ar().grecaptcha;if(!Se)return void S(Me(f,"internal-error"));const lt=Se.render;Se.render=(dt,tn)=>{const An=lt(dt,tn);return this.counter++,An},this.hostLanguage=m,I(Se)},Eo(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:ga,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),S(Me(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=ar().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ma{load(f){return(0,p.Z)(function*(){return new pa(f)})()}clearedOneInstance(){}}const ya="recaptcha",bf={theme:"light",type:"image"};class Tf{constructor(f,m=Object.assign({},bf),I){this.parameters=m,this.type=ya,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(I),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;Z(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ma:new xc,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(m)||new Promise(O=>{const K=Se=>{Se&&(f.tokenChangeListeners.delete(K),O(Se))};f.tokenChangeListeners.add(K),f.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof f)f(m);else if("string"==typeof f){const I=ar()[f];"function"==typeof I&&I(m)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){Z(de()&&!au(),f.auth,"internal-error"),yield function va(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Df(v){return Ac.apply(this,arguments)}(f.auth);Z(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=ss._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function sm(v,f,m){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(v,f,m){const I=Wn(v),S=yield ld(I,f,(0,U.m9)(m));return new Rc(S,O=>Wr(I,O))})).apply(this,arguments)}function lD(v,f,m){return om.apply(this,arguments)}function om(){return(om=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v);yield wi(!1,I,"phone");const S=yield ld(I.auth,f,(0,U.m9)(m));return new Rc(S,O=>tu(I,O))})).apply(this,arguments)}function am(v,f,m){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v),S=yield ld(I.auth,f,(0,U.m9)(m));return new Rc(S,O=>L(I,O))})).apply(this,arguments)}function ld(v,f,m){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,p.Z)(function*(v,f,m){var I;const S=yield m.verify();try{let O;if(Z("string"==typeof S,v,"argument-error"),Z(m.type===ya,v,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const K=O.session;if("phoneNumber"in O)return Z("enroll"===K.type,v,"internal-error"),(yield function A_(v,f){return Ye(v,"POST","/v2/accounts/mfaEnrollment:start",ft(v,f))}(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Z("signin"===K.type,v,"internal-error");const Se=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return Z(Se,v,"missing-multi-factor-info"),(yield function wf(v,f){return Ye(v,"POST","/v2/accounts/mfaSignIn:start",ft(v,f))}(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield function Yo(v,f){return js.apply(this,arguments)}(v,{phoneNumber:O.phoneNumber,recaptchaToken:S});return K}}finally{m._reset()}}),Sf.apply(this,arguments)}function Af(v,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(v,f){yield na((0,U.m9)(v),f)})).apply(this,arguments)}let dD=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Wn(m)}verifyPhoneNumber(m,I){return ld(this.auth,m,(0,U.m9)(I))}static credential(m,I){return ss._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:S}=m;return I&&S?ss._fromTokenResponse(I,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function lu(v,f){return f?Ge(f):(Z(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class gr extends nn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Xr(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Xr(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Xr(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function dd(v){return vc(v.auth,new gr(v),v.bypassAuthState)}function Nc(v){const{auth:f,user:m}=v;return Z(m,f,"internal-error"),os(m,new gr(v),v.bypassAuthState)}function P_(v){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return Z(m,f,"internal-error"),na(m,new gr(v),v.bypassAuthState)})).apply(this,arguments)}class Do{constructor(f,m,I,S,O=!1){this.auth=f,this.resolver=I,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(I,S){f.pendingPromise={resolve:I,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(I,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:O,tenantId:K,error:Se,type:lt}=f;if(Se)return void m.reject(Se);const dt={auth:m.auth,requestUri:I,sessionId:S,tenantId:K||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(lt)(dt))}catch(tn){m.reject(tn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return dd;case"linkViaPopup":case"linkViaRedirect":return P_;case"reauthViaPopup":case"reauthViaRedirect":return Nc;default:Te(this.auth,"internal-error")}}resolve(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const um=new Ve(2e3,1e4);function Oc(v,f,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,p.Z)(function*(v,f,m){const I=Wn(v);Ce(v,f,Ui);const S=lu(I,m);return new hi(I,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function k_(v,f,m){return cm.apply(this,arguments)}function cm(){return(cm=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v);Ce(I.auth,f,Ui);const S=lu(I.auth,m);return new hi(I.auth,"reauthViaPopup",f,S,I).executeNotNull()})).apply(this,arguments)}function F_(v,f,m){return lm.apply(this,arguments)}function lm(){return(lm=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v);Ce(I.auth,f,Ui);const S=lu(I.auth,m);return new hi(I.auth,"linkViaPopup",f,S,I).executeNotNull()})).apply(this,arguments)}let hi=(()=>{class v extends Do{constructor(m,I,S,O,K){super(m,I,O,K),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const I=yield m.execute();return Z(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,p.Z)(function*(){_e(1===m.filter.length,"Popup operations only handle one event");const I=ou();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Me(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,um.get())};m()}}return v.currentPopupAction=null,v})();const Mf="pendingRedirect",As=new Map;class L_ extends Do{constructor(f,m,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let I=As.get(m.auth._key());if(!I){try{const O=(yield function dm(v,f){return xn.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;I=()=>Promise.resolve(O)}catch(S){I=()=>Promise.reject(S)}As.set(m.auth._key(),I)}return m.bypassAuthState||As.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(I,f);if("unknown"!==f.type){if(f.eventId){const S=yield I.auth._redirectUserForId(f.eventId);if(S)return I.user=S,m().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function xn(){return(xn=(0,p.Z)(function*(v,f){const m=Co(f),I=xf(v);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(m));return yield I._remove(m),S})).apply(this,arguments)}function Ks(v,f){return gt.apply(this,arguments)}function gt(){return(gt=(0,p.Z)(function*(v,f){return xf(v)._set(Co(f),"true")})).apply(this,arguments)}function Ms(){As.clear()}function Ri(v,f){As.set(v._key(),f)}function xf(v){return Ge(v._redirectPersistence)}function Co(v){return B(Mf,v.config.apiKey,v.name)}function fi(v,f,m){return function hd(v,f,m){return bo.apply(this,arguments)}(v,f,m)}function bo(){return(bo=(0,p.Z)(function*(v,f,m){const I=Wn(v);Ce(v,f,Ui),yield I._initializationPromise;const S=lu(I,m);return yield Ks(S,I),S._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function Rf(v,f,m){return function du(v,f,m){return Pc.apply(this,arguments)}(v,f,m)}function Pc(){return(Pc=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v);Ce(I.auth,f,Ui),yield I.auth._initializationPromise;const S=lu(I.auth,m);yield Ks(S,I.auth);const O=yield qn(I);return S._openRedirect(I.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Nf(v,f,m){return function xs(v,f,m){return At.apply(this,arguments)}(v,f,m)}function At(){return(At=(0,p.Z)(function*(v,f,m){const I=(0,U.m9)(v);Ce(I.auth,f,Ui),yield I.auth._initializationPromise;const S=lu(I.auth,m);yield wi(!1,I,f.providerId),yield Ks(S,I.auth);const O=yield qn(I);return S._openRedirect(I.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function Of(v,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,p.Z)(function*(v,f){return yield Wn(v)._initializationPromise,kc(v,f,!1)})).apply(this,arguments)}function kc(v,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(v,f,m=!1){const I=Wn(v),S=lu(I,f),K=yield new L_(I,S,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield I._persistUserIfCurrent(K.user),yield I._setRedirectUser(null,f)),K})).apply(this,arguments)}function qn(v){return pd.apply(this,arguments)}function pd(){return(pd=(0,p.Z)(function*(v){const f=ou(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class gd{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(m=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function fm(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hu(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var I;if(f.error&&!hu(f)){const S=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Me(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const I=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(md(f))}saveEventToCache(f){this.cachedEventUids.add(md(f)),this.lastProcessedEventTime=Date.now()}}function md(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function hu({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function Fc(v){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(v,f={}){return Ye(v,"GET","/v1/projects",f)})).apply(this,arguments)}const fu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pf=/^https?/;function Zs(){return(Zs=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Fc(v);for(const m of f)try{if(So(m))return}catch{}Te(v,"unauthorized-domain")})).apply(this,arguments)}function So(v){const f=se(),{protocol:m,hostname:I}=new URL(f);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===I}if(!Pf.test(m))return!1;if(fu.test(v))return I===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const vd=new Ve(3e4,6e4);function qr(){const v=ar().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let pu=null;const Lc=new Ve(5e3,15e3),Vc="__/auth/iframe",ni="emulator/auth/iframe",ri={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ed=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pm(v){const f=v.config;Z(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?tt(f,ni):`https://${v.config.authDomain}/${Vc}`,I={apiKey:f.apiKey,appName:v.name,v:k.SDK_VERSION},S=Ed.get(v.config.apiHost);S&&(I.eid=S);const O=v._getFrameworks();return O.length&&(I.fw=O.join(",")),`${m}?${(0,U.xO)(I).slice(1)}`}function ls(){return ls=(0,p.Z)(function*(v){const f=yield function Jn(v){return pu=pu||function _d(v){return new Promise((f,m)=>{var I,S,O;function K(){qr(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{qr(),m(Me(v,"network-request-failed"))},timeout:vd.get()})}if(null!==(S=null===(I=ar().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(O=ar().gapi)||void 0===O||!O.load){const Se=Io("iframefcb");return ar()[Se]=()=>{gapi.load?K():m(Me(v,"network-request-failed"))},Eo(`https://apis.google.com/js/api.js?onload=${Se}`).catch(lt=>m(lt))}K()}}).catch(f=>{throw pu=null,f})}(v),pu}(v),m=ar().gapi;return Z(m,v,"internal-error"),f.open({where:document.body,url:pm(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ri,dontclear:!0},I=>new Promise(function(){var S=(0,p.Z)(function*(O,K){yield I.restyle({setHideOnLeave:!1});const Se=Me(v,"network-request-failed"),lt=ar().setTimeout(()=>{K(Se)},Lc.get());function dt(){ar().clearTimeout(lt),O(I)}I.ping(dt).then(dt,()=>{K(Se)})});return function(O,K){return S.apply(this,arguments)}}()))}),ls.apply(this,arguments)}const Ao={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fr=500,ds=600,kf="_blank",Ea="http://localhost";class gu{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const mm="__/auth/handler",Id="emulator/auth/handler";function Vt(v,f,m,I,S,O){Z(v.config.authDomain,v,"auth-domain-config-required"),Z(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:k.SDK_VERSION,eventId:S};if(f instanceof Ui){f.setDefaultLanguage(v.languageCode),K.providerId=f.providerId||"",(0,U.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[lt,dt]of Object.entries(O||{}))K[lt]=dt}if(f instanceof ho){const lt=f.getScopes().filter(dt=>""!==dt);lt.length>0&&(K.scopes=lt.join(","))}v.tenantId&&(K.tid=v.tenantId);const Se=K;for(const lt of Object.keys(Se))void 0===Se[lt]&&delete Se[lt];return`${function Mo({config:v}){return v.emulator?tt(v,Id):`https://${v.authDomain}/${mm}`}(v)}?${(0,U.xO)(Se).slice(1)}`}const wd="webStorageSupport",Ff=class Ia{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=su,this._completeRedirectFn=kc,this._overrideRedirectResult=Ri}_openPopup(f,m,I,S){var O=this;return(0,p.Z)(function*(){var K;_e(null===(K=O.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const Se=Vt(f,m,I,se(),S);return function Bi(v,f,m,I=Fr,S=ds){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),K=Math.max((window.screen.availWidth-I)/2,0).toString();let Se="";const lt=Object.assign(Object.assign({},Ao),{width:I.toString(),height:S.toString(),top:O,left:K}),dt=(0,U.z$)().toLowerCase();m&&(Se=G(dt)?kf:m),T(dt)&&(f=f||Ea,lt.scrollbars="yes");const tn=Object.entries(lt).reduce((pi,[hs,Qs])=>`${pi}${hs}=${Qs},`,"");if(function En(v=(0,U.z$)()){var f;return Je(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(dt)&&"_self"!==Se)return function gm(v,f){const m=document.createElement("a");m.href=v,m.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(f||"",Se),new gu(null);const An=window.open(f||"",Se,tn);Z(An,v,"popup-blocked");try{An.focus()}catch{}return new gu(An)}(f,Se,ou())})()}_openRedirect(f,m,I,S){var O=this;return(0,p.Z)(function*(){return yield O._originValidation(f),function Cc(v){ar().location.href=v}(Vt(f,m,I,se(),S)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:O}=this.eventManagers[m];return S?Promise.resolve(S):(_e(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(f);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const I=yield function V_(v){return ls.apply(this,arguments)}(f),S=new gd(f);return I.register("authEvent",O=>(Z(O?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=I,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(wd,{type:wd},S=>{var O;const K=null===(O=S?.[0])||void 0===O?void 0:O[wd];void 0!==K&&m(!!K),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function yd(v){return Zs.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return pn()||x()||Je()}};class Lf{constructor(f){this.factorId=f}_process(f,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,I);case"signin":return this._finalizeSignIn(f,m.credential);default:return re("unexpected MultiFactorSessionType")}}}class Ni extends Lf{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ni(f)}_finalizeEnroll(f,m,I){return function M_(v,f){return Ye(v,"POST","/v2/accounts/mfaEnrollment:finalize",ft(v,f))}(f,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ad(v,f){return Ye(v,"POST","/v2/accounts/mfaSignIn:finalize",ft(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vf=(()=>{class v{constructor(){}static assertion(m){return Ni._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Kr="@firebase/auth";class ym{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(I=>{f(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function Kn(v){(0,k._registerComponent)(new oe.wA("auth",(f,{options:m})=>{const I=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:O,authDomain:K}=I.options;return((Se,lt)=>{Z(O&&!O.includes(":"),"invalid-api-key",{appName:Se.name}),Z(!K?.includes(":"),"argument-error",{appName:Se.name});const dt={apiKey:O,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ns(v)},tn=new co(Se,lt,dt);return function Xe(v,f){const m=f?.persistence||[],I=(Array.isArray(m)?m:[m]).map(Ge);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(I,f?.popupRedirectResolver)}(tn,m),tn})(I,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,I)=>{f.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new oe.wA("auth-internal",f=>{const m=Wn(f.getProvider("auth").getImmediate());return new ym(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Kr,"0.21.3",function wr(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(Kr,"0.21.3","esm2017")}("Browser")},2090:(yt,be,F)=>{F.d(be,{$s:()=>rt,BH:()=>Re,G6:()=>ge,L:()=>le,LL:()=>fn,Pz:()=>Me,Sg:()=>Ce,UG:()=>re,US:()=>oe,ZB:()=>j,ZR:()=>nt,aH:()=>Te,b$:()=>Ge,eu:()=>Le,hl:()=>xe,jU:()=>_e,m9:()=>$t,ne:()=>Er,pd:()=>_n,r3:()=>rr,ru:()=>Qe,tV:()=>he,uI:()=>Z,vZ:()=>ln,w1:()=>Xe,xO:()=>Fn,xb:()=>Qn,z$:()=>He,zI:()=>Ve,zd:()=>ir});const ee=function($){const B=[];let N=0;for(let M=0;M<$.length;M++){let T=$.charCodeAt(M);T<128?B[N++]=T:T<2048?(B[N++]=T>>6|192,B[N++]=63&T|128):55296==(64512&T)&&M+1<$.length&&56320==(64512&$.charCodeAt(M+1))?(T=65536+((1023&T)<<10)+(1023&$.charCodeAt(++M)),B[N++]=T>>18|240,B[N++]=T>>12&63|128,B[N++]=T>>6&63|128,B[N++]=63&T|128):(B[N++]=T>>12|224,B[N++]=T>>6&63|128,B[N++]=63&T|128)}return B},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,M=[];for(let T=0;T<$.length;T+=3){const x=$[T],G=T+1<$.length,ie=G?$[T+1]:0,Pe=T+2<$.length,Ne=Pe?$[T+2]:0;let Xt=(15&ie)<<2|Ne>>6,En=63&Ne;Pe||(En=64,G||(Xt=64)),M.push(N[x>>2],N[(3&x)<<4|ie>>4],N[Xt],N[En])}return M.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(ee($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let N=0,M=0;for(;N<$.length;){const T=$[N++];if(T<128)B[M++]=String.fromCharCode(T);else if(T>191&&T<224){const x=$[N++];B[M++]=String.fromCharCode((31&T)<<6|63&x)}else if(T>239&&T<365){const Pe=((7&T)<<18|(63&$[N++])<<12|(63&$[N++])<<6|63&$[N++])-65536;B[M++]=String.fromCharCode(55296+(Pe>>10)),B[M++]=String.fromCharCode(56320+(1023&Pe))}else{const x=$[N++],G=$[N++];B[M++]=String.fromCharCode((15&T)<<12|(63&x)<<6|63&G)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const N=B?this.charToByteMapWebSafe_:this.charToByteMap_,M=[];for(let T=0;T<$.length;){const x=N[$.charAt(T++)],ie=T<$.length?N[$.charAt(T)]:0;++T;const Ne=T<$.length?N[$.charAt(T)]:64;++T;const Je=T<$.length?N[$.charAt(T)]:64;if(++T,null==x||null==ie||null==Ne||null==Je)throw Error();M.push(x<<2|ie>>4),64!==Ne&&(M.push(ie<<4&240|Ne>>2),64!==Je&&M.push(Ne<<6&192|Je))}return M},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},le=function($){return function($){const B=ee($);return oe.encodeByteArray(B,!0)}($).replace(/\./g,"")},he=function($){try{return oe.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function j($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const N in B)!B.hasOwnProperty(N)||!Q(N)||($[N]=j($[N],B[N]));return $}function Q($){return"__proto__"!==$}const pe=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&he($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Te=()=>{var $;return null===($=pe())||void 0===$?void 0:$.config},Me=$=>{var B;return null===(B=pe())||void 0===B?void 0:B[`_${$}`]};class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,N)=>{this.resolve=B,this.reject=N})}wrapCallback(B){return(N,M)=>{N?this.reject(N):this.resolve(M),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(N):B(N,M))}}}function Ce($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const M=B||"demo-project",T=$.iat||0,x=$.sub||$.user_id;if(!x)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const G=Object.assign({iss:`https://securetoken.google.com/${M}`,aud:M,iat:T,exp:T+3600,auth_time:T,sub:x,user_id:x,firebase:{sign_in_provider:"custom",identities:{}}},$);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(G)),""].join(".")}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function re(){var $;const B=null===($=pe())||void 0===$?void 0:$.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function Qe(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const $=He();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function ge(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xe(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise(($,B)=>{try{let N=!0;const M="validate-browser-context-for-indexeddb-analytics-module",T=self.indexedDB.open(M);T.onsuccess=()=>{T.result.close(),N||self.indexedDB.deleteDatabase(M),$(!0)},T.onupgradeneeded=()=>{N=!1},T.onerror=()=>{var x;B((null===(x=T.error)||void 0===x?void 0:x.message)||"")}}catch(N){B(N)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nt extends Error{constructor(B,N,M){super(N),this.code=B,this.customData=M,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fn.prototype.create)}}class fn{constructor(B,N,M){this.service=B,this.serviceName=N,this.errors=M}create(B,...N){const M=N[0]||{},T=`${this.service}/${B}`,x=this.errors[B],G=x?function wt($,B){return $.replace(ft,(N,M)=>{const T=B[M];return null!=T?String(T):`<${M}?>`})}(x,M):"Error";return new nt(T,`${this.serviceName}: ${G} (${T}).`,M)}}const ft=/\{\$([^}]+)}/g;function rr($,B){return Object.prototype.hasOwnProperty.call($,B)}function Qn($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function ln($,B){if($===B)return!0;const N=Object.keys($),M=Object.keys(B);for(const T of N){if(!M.includes(T))return!1;const x=$[T],G=B[T];if(vn(x)&&vn(G)){if(!ln(x,G))return!1}else if(x!==G)return!1}for(const T of M)if(!N.includes(T))return!1;return!0}function vn($){return null!==$&&"object"==typeof $}function Fn($){const B=[];for(const[N,M]of Object.entries($))Array.isArray(M)?M.forEach(T=>{B.push(encodeURIComponent(N)+"="+encodeURIComponent(T))}):B.push(encodeURIComponent(N)+"="+encodeURIComponent(M));return B.length?"&"+B.join("&"):""}function ir($){const B={};return $.replace(/^\?/,"").split("&").forEach(M=>{if(M){const[T,x]=M.split("=");B[decodeURIComponent(T)]=decodeURIComponent(x)}}),B}function _n($){const B=$.indexOf("?");if(!B)return"";const N=$.indexOf("#",B);return $.substring(B,N>0?N:void 0)}function Er($,B){const N=new Ct($,B);return N.subscribe.bind(N)}class Ct{constructor(B,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{B(this)}).catch(M=>{this.error(M)})}next(B){this.forEachObserver(N=>{N.next(B)})}error(B){this.forEachObserver(N=>{N.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,N,M){let T;if(void 0===B&&void 0===N&&void 0===M)throw new Error("Missing Observer.");T=function Tt($,B){if("object"!=typeof $||null===$)return!1;for(const N of B)if(N in $&&"function"==typeof $[N])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:N,complete:M},void 0===T.next&&(T.next=Bt),void 0===T.error&&(T.error=Bt),void 0===T.complete&&(T.complete=Bt);const x=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?T.error(this.finalError):T.complete()}catch{}}),this.observers.push(T),x}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,B)}sendOne(B,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{N(this.observers[B])}catch(M){typeof console<"u"&&console.error&&console.error(M)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bt(){}const fr=1e3,Bn=2,Be=144e5,we=.5;function rt($,B=fr,N=Bn){const M=B*Math.pow(N,$),T=Math.round(we*M*(Math.random()-.5)*2);return Math.min(Be,M+T)}function $t($){return $&&$._delegate?$._delegate:$}},3851:(yt,be,F)=>{var p=F(4650);let U=null;function k(){return U}class ce{}const oe=new p.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function le(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const he=new p.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){j()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){j()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Q(){return new H((0,p.LFG)(oe))}()},providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ke(n){return n&&"?"!==n[0]?"?"+n:n}let et=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(De)},providedIn:"root"}),n})();const pe=new p.OlP("appBaseHref");let De=(()=>{class n extends et{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Ke(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Ke(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(pe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ae=(()=>{class n extends et{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Ke(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Ke(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(pe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(me(Ce(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ke(r))}normalize(t){return n.stripTrailingSlash(function Re(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,Ce(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ke,n.joinWithSlash=Oe,n.stripTrailingSlash=me,n.\u0275fac=function(t){return new(t||n)(p.LFG(et))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Me(){return new Te((0,p.LFG)(et))}()},providedIn:"root"}),n})();function Ce(n){return n.replace(/\/index.html$/,"")}class sr{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Li=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new sr(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),On(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{On(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function On(n,e){n.context.$implicit=e.item}class Yo{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class js{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Qo=new js,is=new Yo;let Is=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return Qo;if((0,p.F4k)(t))return is;throw function or(n,e){return new p.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const po="server";function mc(n){return n===po}let na=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new eu((0,p.LFG)(oe),window)}),n})();class eu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ra(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wi(this.window.history)||wi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function wi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wc extends ce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Dc extends wc{static makeCurrent(){!function ee(n){U||(U=n)}(new Dc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function la(){return iu=iu||document.querySelector("base"),iu?iu.getAttribute("href"):null}();return null==t?null:function Ef(n){vo=vo||document.createElement("a"),vo.setAttribute("href",n);const e=vo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bn(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vo,iu=null;const R_=new p.OlP("TRANSITION_ID"),N_=[{provide:p.ip1,useFactory:function su(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=k(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[R_,oe,p.zs3],multi:!0}];let ou=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Xl=new p.OlP("EventManagerPlugins");let ar=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xl),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Cc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=k().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let au=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let u=o.get(t)??0;return u+=r,u>0?o.set(t,u):o.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),da=(()=>{class n extends au{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const u=this.styleRef.get(r);u?u.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const bs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bc=/%COMP%/g,Ts=new p.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function uu(n,e){return e.flat(100).map(t=>t.replace(bc,n))}function nd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let di=(()=>{class n{constructor(t,r,o,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new rd(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof od?o.applyToHost(t):o instanceof Sc&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.eventManager,g=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case p.ifc.Emulated:u=new od(l,g,r,this.appId,_);break;case p.ifc.ShadowDom:return new sd(l,g,t,r);default:u=new Sc(l,g,r,_)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ar),p.LFG(da),p.LFG(p.AFp),p.LFG(Ts))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class rd{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(id(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(id(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=bs[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=bs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nd(r)):this.eventManager.addEventListener(e,t,nd(r))}}function id(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sd extends rd{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=uu(o.id,o.styles);for(const l of u){const g=document.createElement("style");g.textContent=l,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Sc extends rd{constructor(e,t,r,o,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=uu(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class od extends Sc{constructor(e,t,r,o,u){const l=o+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function td(n){return"_ngcontent-%COMP%".replace(bc,n)}(l),this.hostAttr=function If(n){return"_nghost-%COMP%".replace(bc,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let wf=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ad=["alt","control","meta","shift"],Df={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ac={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nm=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),ad.forEach(D=>{const b=r.indexOf(D);b>-1&&(r.splice(b,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let o=Df[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ad.forEach(l=>{l!==o&&(0,Ac[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const im=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function pa(){Dc.makeCurrent()},multi:!0},{provide:oe,useFactory:function Cf(){return(0,p.RDi)(document),document},deps:[]}]),cd=new p.OlP(""),xc=[{provide:p.rWj,useClass:class em{addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};o.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],wo=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function rm(){return new p.qLn},deps:[]},{provide:Xl,useClass:wf,multi:!0,deps:[oe,p.R0b,p.Lbi]},{provide:Xl,useClass:nm,multi:!0,deps:[oe]},{provide:di,useClass:di,deps:[ar,da,p.AFp,Ts]},{provide:p.FYo,useExisting:di},{provide:au,useExisting:da},{provide:da,useClass:da,deps:[oe]},{provide:ar,useClass:ar,deps:[Xl,p.R0b]},{provide:class yc{},useClass:ou,deps:[]},[]];let ma=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:R_,useExisting:p.AFp},N_]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(cd,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...wo,...xc],imports:[ta,p.hGG]}),n})(),Rc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function va(){return new Rc((0,p.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var xn=F(8996),Ks=F(7669);function gt(...n){const e=(0,Ks.yG)(n);return(0,xn.D)(n,e)}var Ms=F(7579);class Ri extends Ms.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Co=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fi=F(9751);const{isArray:hd}=Array,{getPrototypeOf:bo,prototype:Rf,keys:du}=Object;function Pc(n){if(1===n.length){const e=n[0];if(hd(e))return{args:e,keys:null};if(function Nf(n){return n&&"object"==typeof n&&bo(n)===Rf}(e)){const t=du(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xs=F(4671),At=F(4004);const{isArray:Of}=Array;function kc(n){return(0,At.U)(e=>function fd(n,e){return Of(e)?n(...e):n(e)}(n,e))}function Rs(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var qn=F(5403),pd=F(9672);function hm(...n){const e=(0,Ks.yG)(n),t=(0,Ks.jO)(n),{args:r,keys:o}=Pc(n);if(0===r.length)return(0,xn.D)([],e);const u=new fi.y(function gd(n,e,t=xs.y){return r=>{md(e,()=>{const{length:o}=n,u=new Array(o);let l=o,g=o;for(let _=0;_<o;_++)md(e,()=>{const D=(0,xn.D)(n[_],e);let b=!1;D.subscribe((0,qn.x)(r,R=>{u[_]=R,b||(b=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>Rs(o,l):xs.y));return t?u.pipe(kc(t)):u}function md(n,e,t){n?(0,pd.f)(t,n,e):e()}var hu=F(8189);function Fc(...n){return function fm(){return(0,hu.J)(1)}()((0,xn.D)(n,(0,Ks.yG)(n)))}var To=F(8421);function fu(n){return new fi.y(e=>{(0,To.Xf)(n()).subscribe(e)})}var Pf=F(9635),yd=F(576);function Zs(n,e){const t=(0,yd.m)(n)?n:()=>n,r=o=>o.error(t());return new fi.y(e?o=>e.schedule(r,0,o):r)}var So=F(515),vd=F(727),qr=F(4482);function _d(){return(0,qr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class pu extends fi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vd.w0.EMPTY)}return e}refCount(){return _d()(this)}}function Jn(n,e){return(0,qr.e)((t,r)=>{let o=null,u=0,l=!1;const g=()=>l&&!o&&r.complete();t.subscribe((0,qn.x)(r,_=>{o?.unsubscribe();let D=0;const b=u++;(0,To.Xf)(n(_,b)).subscribe(o=(0,qn.x)(r,R=>r.next(e?e(_,R,b,D++):R),()=>{o=null,g()}))},()=>{l=!0,g()}))})}function Lc(n){return n<=0?()=>So.E:(0,qr.e)((e,t)=>{let r=0;e.subscribe((0,qn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Vc(...n){const e=(0,Ks.yG)(n);return(0,qr.e)((t,r)=>{(e?Fc(n,t,e):Fc(n,t)).subscribe(r)})}function ni(n,e){return(0,qr.e)((t,r)=>{let o=0;t.subscribe((0,qn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var ri=F(5577);function Ed(n){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function pm(n=V_){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function V_(){return new Co}function ls(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ni((o,u)=>n(o,u,r)):xs.y,Lc(1),t?Ed(e):pm(()=>new Co))}function Ao(n,e){return(0,yd.m)(e)?(0,ri.z)(n,e,1):(0,ri.z)(n,1)}var Fr=F(8505);function ds(n){return(0,qr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,qn.x)(t,void 0,void 0,l=>{u=(0,To.Xf)(n(l,ds(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Ea(n,e){return(0,qr.e)(function kf(n,e,t,r,o){return(u,l)=>{let g=t,_=e,D=0;u.subscribe((0,qn.x)(l,b=>{const R=D++;_=g?n(_,b,R):(g=!0,b),r&&l.next(_)},o&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function gu(n){return n<=0?()=>So.E:(0,qr.e)((e,t)=>{let r=[];e.subscribe((0,qn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Bi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ni((o,u)=>n(o,u,r)):xs.y,gu(1),t?Ed(e):pm(()=>new Co))}function Id(n){return(0,qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Vt="primary",Mo=Symbol("RouteTitle");class wd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ia(n){return new wd(n)}function Ff(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))o[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ni(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Vf(n[o],e[o]))return!1;return!0}function Vf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Kr(n){return Array.prototype.concat.apply([],n)}function mu(n){return n.length>0?n[n.length-1]:null}function wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Kn(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,xn.D)(Promise.resolve(n)):gt(n)}const Ys=!1,Uf={exact:function v(n,e,t){if(!dt(n.segments,e.segments)||!S(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!v(n.children[r],e.children[r],t))return!1;return!0},subset:m},Uc={exact:function vm(n,e){return Ni(n,e)},subset:function f(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vf(n[t],e[t]))},ignored:()=>!0};function Bf(n,e,t){return Uf[t.paths](n.root,e.root,t.matrixParams)&&Uc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function m(n,e,t){return I(n,e,e.segments,t)}function I(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!dt(o,t)||e.hasChildren()||!S(o,t,r))}if(n.segments.length===t.length){if(!dt(n.segments,t)||!S(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!m(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(dt(n.segments,o)&&S(n.segments,o,r)&&n.children[Vt])&&I(n.children[Vt],e,u,r)}}function S(n,e,t){return e.every((r,o)=>Uc[t](n[o].parameters,r.parameters))}class O{constructor(e=new K([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ia(this.queryParams)),this._queryParamMap}toString(){return hs.serialize(this)}}class K{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qs(this)}}class Se{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ia(this.parameters)),this._parameterMap}toString(){return Bc(this)}}function dt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let An=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new pi},providedIn:"root"}),n})();class pi{parse(e){const t=new fD(e);return new O(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$i(e.root,!0)}`,r=function _m(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Da(t)}=${Da(o)}`).join("&"):`${Da(t)}=${Da(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function $f(n){return encodeURI(n)}(e.fragment)}`:""}`}}const hs=new pi;function Qs(n){return n.segments.map(e=>Bc(e)).join("/")}function $i(n,e){if(!n.hasChildren())return Qs(n);if(e){const t=n.children[Vt]?$i(n.children[Vt],!1):"",r=[];return wr(n.children,(o,u)=>{u!==Vt&&r.push(`${u}:${$i(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tn(n,e){let t=[];return wr(n.children,(r,o)=>{o===Vt&&(t=t.concat(e(r,o)))}),wr(n.children,(r,o)=>{o!==Vt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Vt?[$i(n.children[Vt],!1)]:[`${o}:${$i(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${Qs(n)}/${t[0]}`:`${Qs(n)}/(${t.join("//")})`}}function wa(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Da(n){return wa(n).replace(/%3B/gi,";")}function xo(n){return wa(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yu(n){return decodeURIComponent(n)}function Dd(n){return yu(n.replace(/\+/g,"%20"))}function Bc(n){return`${xo(n.path)}${function jf(n){return Object.keys(n).map(e=>`;${xo(e)}=${xo(n[e])}`).join("")}(n.parameters)}`}const Cd=/^[^\/()?;=#]+/;function vu(n){const e=n.match(Cd);return e?e[0]:""}const Em=/^[^=?&#]+/,Im=/^[^&#]+/;class fD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new K([],{}):new K([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new K(e,t)),r}parseSegment(){const e=vu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,Ys);return this.capture(e),new Se(yu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=vu(this.remaining);o&&(r=o,this.capture(r))}e[yu(t)]=yu(r)}parseQueryParam(e){const t=function U_(n){const e=n.match(Em);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function hD(n){const e=n.match(Im);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=Dd(t),u=Dd(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vu(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new p.vHH(4010,Ys);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Vt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Vt]:new K([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,Ys)}}function Hf(n){return n.segments.length>0?new K([],{[Vt]:n}):n}function bd(n){const e={};for(const r of Object.keys(n.children)){const u=bd(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function _u(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new K(n.segments.concat(e.segments),e.children)}return n}(new K(n.segments,e))}function Ca(n){return n instanceof O}const Gf=!1;function gD(n,e,t,r,o){if(0===t.length)return Eu(e.root,e.root,e.root,r,o);const u=function Sd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return wr(u.outlets,(_,D)=>{g[D]="string"==typeof _?_.split("/"):_}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new wm(t,e,r)}(t);return u.toRoot()?Eu(e.root,e.root,new K([],{}),r,o):function l(_){const D=function Dm(n,e,t,r){if(n.isAbsolute)return new Ro(e.root,!0,0);if(-1===r)return new Ro(t,t===e.root,0);return function Wf(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new p.vHH(4005,Gf&&"Invalid number of '../'");o=r.segments.length}return new Ro(r,!1,o-u)}(t,r+($c(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),b=D.processChildren?Hc(D.segmentGroup,D.index,u.commands):Iu(D.segmentGroup,D.index,u.commands);return Eu(e.root,D.segmentGroup,b,r,o)}(n.snapshot?._lastPathIndex)}function $c(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jc(n){return"object"==typeof n&&null!=n&&n.outlets}function Eu(n,e,t,r,o){let l,u={};r&&wr(r,(_,D)=>{u[D]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),l=n===e?t:zf(n,e,t);const g=Hf(bd(l));return new O(g,u,o)}function zf(n,e,t){const r={};return wr(n.children,(o,u)=>{r[u]=o===e?t:zf(o,e,t)}),new K(n.segments,r)}class wm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$c(r[0]))throw new p.vHH(4003,Gf&&"Root segment cannot have matrix parameters");const o=r.find(jc);if(o&&o!==mu(r))throw new p.vHH(4004,Gf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ro{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Iu(n,e,t){if(n||(n=new K([],{})),0===n.segments.length&&n.hasChildren())return Hc(n,e,t);const r=function $_(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],g=t[r];if(jc(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!Tm(_,D,l))return u;r+=2}else{if(!Tm(_,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new K(n.segments.slice(0,r.pathIndex),{});return u.children[Vt]=new K(n.segments.slice(r.pathIndex),n.children),Hc(u,0,o)}return r.match&&0===o.length?new K(n.segments,{}):r.match&&!n.hasChildren()?bm(n,e,t):r.match?Hc(n,0,o):bm(n,e,t)}function Hc(n,e,t){if(0===t.length)return new K(n.segments,{});{const r=function Cm(n){return jc(n[0])?n[0].outlets:{[Vt]:n}}(t),o={};return!r[Vt]&&n.children[Vt]&&1===n.numberOfChildren&&0===n.children[Vt].segments.length?Hc(n.children[Vt],e,t):(wr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=Iu(n.children[l],e,u))}),wr(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new K(n.segments,o))}}function bm(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(jc(u)){const _=mD(u.outlets);return new K(r,_)}if(0===o&&$c(t[0])){r.push(new Se(n.segments[e].path,j_(t[0]))),o++;continue}const l=jc(u)?u.outlets[Vt]:`${u}`,g=o<t.length-1?t[o+1]:null;l&&g&&$c(g)?(r.push(new Se(l,j_(g))),o+=2):(r.push(new Se(l,{})),o++)}return new K(r,{})}function mD(n){const e={};return wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bm(new K([],{}),0,t))}),e}function j_(n){const e={};return wr(n,(t,r)=>e[r]=`${t}`),e}function Tm(n,e,t){return n==t.path&&Ni(e,t.parameters)}const Gc="imperative";class ji{constructor(e,t){this.id=e,this.url=t}}class Ad extends ji{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fs extends ji{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qf extends ji{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kf extends ji{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class H_ extends ji{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yD extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sm extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vD extends ji{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class G_ extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zf extends ji{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Am{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class z_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class W_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ID=(()=>{class n{createUrlTree(t,r,o,u,l,g){return gD(t||r.root,o,u,l,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Md=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(e){return ID.\u0275fac(e)},providedIn:"root"}),n})();class Q_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=J_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=J_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=X_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return X_(e,this._root).map(t=>t.value)}}function J_(n,e){if(n===e.value)return e;for(const t of e.children){const r=J_(n,t);if(r)return r}return null}function X_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=X_(n,t);if(r.length)return r.unshift(e),r}return[]}class Ta{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wD extends Q_{constructor(e,t){super(e),this.snapshot=t,wu(this,e)}toString(){return this.snapshot.toString()}}function Mm(n,e){const t=function DD(n,e){const l=new Wc([],{},{},"",{},Vt,e,null,n.root,-1,{});return new Js("",new Ta(l,[]))}(n,e),r=new Ri([new Se("",{})]),o=new Ri({}),u=new Ri({}),l=new Ri({}),g=new Ri(""),_=new zc(r,o,l,g,u,Vt,e,t.root);return _.snapshot=t.root,new wD(new Ta(_,[]),t)}class zc{constructor(e,t,r,o,u,l,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,At.U)(D=>D[Mo]))??gt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>Ia(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>Ia(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function e0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function CD(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wc{get title(){return this.data?.[Mo]}constructor(e,t,r,o,u,l,g,_,D,b,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._urlSegment=D,this._lastPathIndex=b,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ia(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ia(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Js extends Q_{constructor(e,t){super(t),this.url=e,wu(this,t)}toString(){return xm(this._root)}}function wu(n,e){e.value._routerState=n,e.children.forEach(t=>wu(n,t))}function xm(n){const e=n.children.length>0?` { ${n.children.map(xm).join(", ")} } `:"";return`${n.value}${e}`}function Yf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ni(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ni(e.params,t.params)||n.params.next(t.params),function Lf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ni(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ni(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qf(n,e){const t=Ni(n.params,e.params)&&function lt(n,e){return dt(n,e)&&n.every((t,r)=>Ni(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qf(n.parent,e.parent))}function Jf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function BS(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Jf(n,r,o);return Jf(n,r)})}(n,e,t);return new Ta(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>Jf(n,g)),l}}const r=function Rm(n){return new zc(new Ri(n.url),new Ri(n.params),new Ri(n.queryParams),new Ri(n.fragment),new Ri(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Jf(n,u));return new Ta(r,o)}}const Rd="ngNavigationCancelingError";function bD(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ca(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=TD(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function TD(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Rd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Nm(n){return t0(n)&&Ca(n.url)}function t0(n){return n&&n[Rd]}class SD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Nd,this.attachRef=null}}let Nd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new SD,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xf=!1;let Om=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Vt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Nd),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Xf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Xf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Xf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,Xf);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new ep(t,g,o.injector);if(r&&function AD(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(l);this.activated=o.createComponent(D,o.length,_)}else this.activated=o.createComponent(l,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class ep{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zc?this.route:e===Nd?this.childContexts:this.parent.get(e,t)}}let qc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Om],encapsulation:2}),n})();function n0(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Pm(n){const e=n.children&&n.children.map(Pm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=qc),t}function Hi(n){return n.outlet||Vt}function OD(n,e){const t=n.filter(r=>Hi(r)===e);return t.push(...n.filter(r=>Hi(r)!==e)),t}function np(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class km{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=xd(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),wr(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=xd(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=xd(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=xd(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Z_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new q_(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Yf(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),Yf(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=np(o.snapshot),_=g?.get(p._Vd)??null;l.attachRef=null,l.route=o,l.resolver=_,l.injector=g,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Fm{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pd{constructor(e,t){this.component=e,this.route=t}}function r0(n,e,t){const r=n._root;return Zc(r,e?e._root:null,t,[r.value])}function Kc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Zc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=xd(e);return n.children.forEach(l=>{(function s0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function Lm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dt(n.url,e.url)||!Ni(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qf(n,e)||!Ni(n.queryParams,e.queryParams);default:return!Qf(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new Fm(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Zc(n,e,u.component?g?g.children:null:t,r,o),_&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new Pd(g.outlet.component,l))}else l&&rp(e,g,o),o.canActivateChecks.push(new Fm(r)),Zc(n,null,u.component?g?g.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),wr(u,(l,g)=>rp(l,t.getContext(g),o)),o}function rp(n,e,t){const r=xd(n),o=n.value;wr(r,(u,l)=>{rp(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Pd(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Du(n){return"function"==typeof n}function Um(n){return n instanceof Co||"EmptyError"===n?.name}const Yc=Symbol("INITIAL_VALUE");function No(){return Jn(n=>hm(n.map(e=>e.pipe(Lc(1),Vc(Yc)))).pipe((0,At.U)(e=>{for(const t of e)if(!0!==t){if(t===Yc)return Yc;if(!1===t||t instanceof O)return t}return!0}),ni(e=>e!==Yc),Lc(1)))}function d0(n){return(0,Pf.z)((0,Fr.b)(e=>{if(Ca(e))throw bD(0,e)}),(0,At.U)(e=>!0===e))}const jm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hm(n,e,t,r,o){const u=Gm(n,e,t);return u.matched?function $m(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?gt(o.map(l=>{const g=Kc(l,n);return Kn(function kD(n){return n&&Du(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(No(),d0()):gt(!0)}(r=n0(e,r),e,t).pipe((0,At.U)(l=>!0===l?u:{...jm})):gt(u)}function Gm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...jm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Ff)(t,n,e);if(!o)return{...jm};const u={};wr(o.posParams,(g,_)=>{u[_]=g.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function kd(n,e,t,r){if(t.length>0&&function Fd(n,e,t){return t.some(r=>Oo(n,e,r)&&Hi(r)!==Vt)}(n,t,r)){const u=new K(e,function BD(n,e,t,r){const o={};o[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Hi(u)!==Vt){const l=new K([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[Hi(u)]=l}return o}(n,e,r,new K(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function $D(n,e,t){return t.some(r=>Oo(n,e,r))}(n,t,r)){const u=new K(n.segments,function GS(n,e,t,r,o){const u={};for(const l of r)if(Oo(n,t,l)&&!o[Hi(l)]){const g=new K([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[Hi(l)]=g}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new K(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Oo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Jc(n,e,t,r){return!!(Hi(n)===r||r!==Vt&&Oo(e,t,n))&&("**"===n.path||Gm(e,n,t).matched)}function h0(n,e,t){return 0===e.length&&!n.children[t]}const Ld=!1;class sp{constructor(e){this.segmentGroup=e||null}}class f0{constructor(e){this.urlTree=e}}function Vd(n){return Zs(new sp(n))}function zm(n){return Zs(new f0(n))}class jD{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=kd(this.urlTree.root,[],[],this.config).segmentGroup,t=new K(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Vt).pipe((0,At.U)(u=>this.createUrlTree(bd(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ds(u=>{if(u instanceof f0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof sp?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Vt).pipe((0,At.U)(o=>this.createUrlTree(bd(o),e.queryParams,e.fragment))).pipe(ds(o=>{throw o instanceof sp?this.noMatchError(o):o}))}noMatchError(e){return new p.vHH(4002,Ld)}createUrlTree(e,t,r){const o=Hf(e);return new O(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new K([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,xn.D)(o).pipe(Ao(u=>{const l=r.children[u],g=OD(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,At.U)(_=>({segment:_,outlet:u})))}),Ea((u,l)=>(u[l.outlet]=l.segment,u),{}),Bi())}expandSegment(e,t,r,o,u,l){return(0,xn.D)(r).pipe(Ao(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,l).pipe(ds(D=>{if(D instanceof sp)return gt(null);throw D}))),ls(g=>!!g),ds((g,_)=>{if(Um(g))return h0(t,o,u)?gt(new K([],{})):Vd(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,l,g){return Jc(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):Vd(t):Vd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zm(u):this.lineralizeSegments(r,u).pipe((0,ri.z)(l=>{const g=new K(l,{});return this.expandSegment(e,g,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:b}=Gm(t,o,u);if(!g)return Vd(t);const R=this.applyRedirectCommands(_,o.redirectTo,b);return o.redirectTo.startsWith("/")?zm(R):this.lineralizeSegments(o,R).pipe((0,ri.z)(z=>this.expandSegment(e,t,r,z.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=n0(r,e),r.loadChildren?(r._loadedRoutes?gt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,At.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new K(o,{})))):gt(new K(o,{}))):Hm(t,r,o,e).pipe(Jn(({matched:l,consumedSegments:g,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,ri.z)(b=>{const R=b.injector??e,z=b.routes,{segmentGroup:X,slicedSegments:ae}=kd(t,g,_,z),Fe=new K(X.segments,X.children);if(0===ae.length&&Fe.hasChildren())return this.expandChildren(R,z,Fe).pipe((0,At.U)(Qt=>new K(g,Qt)));if(0===z.length&&0===ae.length)return gt(new K(g,{}));const We=Hi(r)===u;return this.expandSegment(R,Fe,z,ae,We?Vt:u,!0).pipe((0,At.U)(Gt=>new K(g.concat(Gt.segments),Gt.children)))})):Vd(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function UD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?gt(!0):gt(o.map(l=>{const g=Kc(l,n);return Kn(function Vm(n){return n&&Du(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(No(),d0())}(e,t,r).pipe((0,ri.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Fr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Wm(n){return Zs(TD(Ld,3))}())):gt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[Vt])return e.redirectTo,Zs(new p.vHH(4e3,Ld));o=o.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new O(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return wr(t.children,(g,_)=>{l[_]=this.createSegmentGroup(e,g,r,o)}),new K(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new p.vHH(4001,Ld);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class HD{}class WD{constructor(e,t,r,o,u,l,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g}recognize(){const e=kd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Vt).pipe((0,At.U)(t=>{if(null===t)return null;const r=new Wc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ta(r,t),u=new Js(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=e0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,xn.D)(Object.keys(r.children)).pipe(Ao(o=>{const u=r.children[o],l=OD(t,o);return this.processSegmentGroup(e,l,u,o)}),Ea((o,u)=>o&&u?(o.push(...u),o):null),function gm(n,e=!1){return(0,qr.e)((t,r)=>{let o=0;t.subscribe((0,qn.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),Ed(null),Bi(),(0,At.U)(o=>{if(null===o)return null;const u=Tu(o);return function qD(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,xn.D)(t).pipe(Ao(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),ls(l=>!!l),ds(l=>{if(Um(l))return h0(r,o,u)?gt([]):gt(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Jc(t,r,o,u))return gt(null);let l;if("**"===t.path){const g=o.length>0?mu(o).parameters:{},_=m0(r)+o.length;l=gt({snapshot:new Wc(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YD(t),Hi(t),t.component??t._loadedComponent??null,t,g0(r),_,Zm(t)),consumedSegments:[],remainingSegments:[]})}else l=Hm(r,t,o,e).pipe((0,At.U)(({matched:g,consumedSegments:_,remainingSegments:D,parameters:b})=>{if(!g)return null;const R=m0(r)+_.length;return{snapshot:new Wc(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YD(t),Hi(t),t.component??t._loadedComponent??null,t,g0(r),R,Zm(t)),consumedSegments:_,remainingSegments:D}}));return l.pipe(Jn(g=>{if(null===g)return gt(null);const{snapshot:_,consumedSegments:D,remainingSegments:b}=g;e=t._injector??e;const R=t._loadedInjector??e,z=function KD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:X,slicedSegments:ae}=kd(r,D,b,z.filter(We=>void 0===We.redirectTo));if(0===ae.length&&X.hasChildren())return this.processChildren(R,z,X).pipe((0,At.U)(We=>null===We?null:[new Ta(_,We)]));if(0===z.length&&0===ae.length)return gt([new Ta(_,[])]);const Fe=Hi(t)===u;return this.processSegment(R,z,X,ae,Fe?Vt:u).pipe((0,At.U)(We=>null===We?null:[new Ta(_,We)]))}))}}function ZD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Tu(n){const e=[],t=new Set;for(const r of n){if(!ZD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Tu(r.children);e.push(new Ta(r.value,o))}return e.filter(r=>!t.has(r))}function g0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function YD(n){return n.data||{}}function Zm(n){return n.resolve||{}}function E0(n){return"string"==typeof n.title||null===n.title}function Gi(n){return Jn(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,At.U)(()=>e)):gt(e)})}const el=new p.OlP("ROUTES");let Qm=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Kn(t.loadComponent()).pipe((0,At.U)(I0),(0,Fr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Id(()=>{this.componentLoaders.delete(t)})),o=new pu(r,()=>new Ms.x).pipe(_d());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,At.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D,b=!1;Array.isArray(g)?D=g:(_=g.create(t).injector,D=Kr(_.get(el,[],p.XFs.Self|p.XFs.Optional)));return{routes:D.map(Pm),injector:_}}),Id(()=>{this.childrenLoaders.delete(r)})),l=new pu(u,()=>new Ms.x).pipe(_d());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Kn(t()).pipe((0,At.U)(I0),(0,ri.z)(o=>o instanceof p.YKP||Array.isArray(o)?gt(o):(0,xn.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I0(n){return function eC(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let op=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ms.x,this.configLoader=(0,p.f3M)(Qm),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(An),this.rootContexts=(0,p.f3M)(Nd),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new z_(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Am(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ri({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ni(r=>0!==r.id),(0,At.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Jn(r=>{let o=!1,u=!1;return gt(r).pipe((0,Fr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Jn(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new Kf(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),So.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return w0(l.source)&&(t.browserUrlTree=l.extractedUrl),gt(l).pipe(Jn(b=>{const R=this.transitions?.getValue();return this.events.next(new Ad(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),R!==this.transitions?.getValue()?So.E:Promise.resolve(b)}),function Km(n,e,t,r){return Jn(o=>function qm(n,e,t,r,o){return new jD(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,At.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Fr.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function zS(n,e,t,r,o){return(0,ri.z)(u=>function zD(n,e,t,r,o,u,l="emptyOnly"){return new WD(n,e,t,r,o,l,u).recognize().pipe(Jn(g=>null===g?function GD(n){return new fi.y(e=>e.error(n))}(new HD):gt(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,At.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Fr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const z=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(z,b)}t.browserUrlTree=b.urlAfterRedirects}const R=new yD(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(R)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:R,source:z,restoredState:X,extras:ae}=l,Fe=new Ad(b,this.urlSerializer.serialize(R),z,X);this.events.next(Fe);const We=Mm(R,this.rootComponentType).snapshot;return gt(r={...l,targetSnapshot:We,urlAfterRedirects:R,extras:{...ae,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new Kf(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),So.E}}),(0,Fr.b)(l=>{const g=new Sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,At.U)(l=>r={...l,guards:r0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function bu(n,e){return(0,ri.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?gt({...t,guardsResult:!0}):function c0(n,e,t,r){return(0,xn.D)(n).pipe((0,ri.z)(o=>function VD(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(g=>{const _=np(e)??o,D=Kc(g,_);return Kn(function Cu(n){return n&&Du(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(ls())})).pipe(No()):gt(!0)}(o.component,o.route,t,e,r)),ls(o=>!0!==o,!0))}(l,r,o,n).pipe((0,ri.z)(g=>g&&function PD(n){return"boolean"==typeof n}(g)?function Bm(n,e,t,r){return(0,xn.D)(e).pipe(Ao(o=>Fc(function LD(n,e){return null!==n&&e&&e(new W_(n)),gt(!0)}(o.route.parent,r),function FD(n,e){return null!==n&&e&&e(new K_(n)),gt(!0)}(o.route,r),function Qc(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function HS(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>fu(()=>gt(l.guards.map(_=>{const D=np(l.node)??t,b=Kc(_,D);return Kn(function a0(n){return n&&Du(n.canActivateChild)}(b)?b.canActivateChild(r,n):D.runInContext(()=>b(r,n))).pipe(ls())})).pipe(No())));return gt(u).pipe(No())}(n,o.path,t),function l0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(u=>fu(()=>{const l=np(e)??t,g=Kc(u,l);return Kn(function o0(n){return n&&Du(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(ls())}));return gt(o).pipe(No())}(n,o.route,t))),ls(o=>!0!==o,!0))}(r,u,n,e):gt(g)),(0,At.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Fr.b)(l=>{if(r.guardsResult=l.guardsResult,Ca(l.guardsResult))throw bD(0,l.guardsResult);const g=new vD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),ni(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Gi(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe((0,Fr.b)(g=>{const _=new G_(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Jn(g=>{let _=!1;return gt(g).pipe(function y0(n,e){return(0,ri.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let u=0;return(0,xn.D)(o).pipe(Ao(l=>function v0(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!E0(o)&&(u[Mo]=o.title),function QD(n,e,t,r){const o=function _0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return gt({});const u={};return(0,xn.D)(o).pipe((0,ri.z)(l=>function JD(n,e,t,r){const o=np(e)??r,u=Kc(n,o);return Kn(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(ls(),(0,Fr.b)(g=>{u[l]=g}))),gu(1),function mm(n){return(0,At.U)(()=>n)}(u),ds(l=>Um(l)?So.E:Zs(l)))}(u,n,e,r).pipe((0,At.U)(l=>(n._resolvedData=l,n.data=e0(n,t).resolve,o&&E0(o)&&(n.data[Mo]=o.title),null)))}(l.route,r,n,e)),(0,Fr.b)(()=>u++),gu(1),(0,ri.z)(l=>u===o.length?gt(t):So.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Fr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Fr.b)(g=>{const _=new Zf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),Gi(l=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Fr.b)(b=>{_.component=b}),(0,At.U)(()=>{})));for(const b of _.children)D.push(...g(b));return D};return hm(g(l.targetSnapshot.root)).pipe(Ed(),Lc(1))}),Gi(()=>this.afterPreactivation()),(0,At.U)(l=>{const g=function US(n,e,t){const r=Jf(n,e._root,t?t._root:void 0);return new wD(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,Fr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new km(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,Fr.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new fs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Id(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ds(l=>{if(u=!0,t0(l)){Nm(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new qf(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),Nm(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||w0(r.source)};t.scheduleNavigation(_,Gc,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new H_(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return So.E}))}))}cancelNavigationTransition(t,r,o){const u=new qf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function w0(n){return n!==Gc}let D0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Vt);return r}getResolvedTitleForRoute(t){return t.data[Mo]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Kt)},providedIn:"root"}),n})(),Kt=(()=>{class n extends D0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Rc))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(T0)},providedIn:"root"}),n})();class b0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let T0=(()=>{class n extends b0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ap=new p.OlP("",{providedIn:"root",factory:()=>({})});let S0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(nC)},providedIn:"root"}),n})(),nC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rC(n){throw n}function iC(n,e,t){return e.parse("/")}const WS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(ap,{optional:!0})||{},this.errorHandler=this.options.errorHandler||rC,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(S0),this.routeReuseStrategy=(0,p.f3M)(C0),this.urlCreationStrategy=(0,p.f3M)(Md),this.titleStrategy=(0,p.f3M)(D0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Kr((0,p.f3M)(el,{optional:!0})??[]),this.navigationTransitions=(0,p.f3M)(op),this.urlSerializer=(0,p.f3M)(An),this.location=(0,p.f3M)(Te),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new O,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Mm(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const _={...o};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Pm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:l;let b=null;switch(g){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,b,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ca(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,Gc,null,r)}navigate(t,r={skipLocationChange:!1}){return function Su(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...WS}:!1===r?{...A0}:r,Ca(t))return Bf(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Bf(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,D,b;return l?(g=l.resolve,_=l.reject,D=l.promise):D=new Promise((R,z)=>{g=R,_=z}),b="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class M0{}let qS=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ni(t=>t instanceof fs),Ao(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,xn.D)(o).pipe((0,hu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const u=o.pipe((0,ri.z)(l=>null===l?gt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,xn.D)([u,l]).pipe((0,hu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(bi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(M0),p.LFG(Qm))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ty=new p.OlP("");let ny=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ad?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Y_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Y_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();var ps=(()=>((ps=ps||{})[ps.COMPLETE=0]="COMPLETE",ps[ps.FAILED=1]="FAILED",ps[ps.REDIRECTING=2]="REDIRECTING",ps))();const Ns=!1;function Os(n,e){return{\u0275kind:n,\u0275providers:e}}const iy=new p.OlP("",{providedIn:"root",factory:()=>!1});function R0(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(bi),o=n.get(N0);1===n.get(sy)&&r.initialNavigation(),n.get(oy,null,p.XFs.Optional)?.setUpPreloading(),n.get(ty,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const N0=new p.OlP(Ns?"bootstrap done indicator":"",{factory:()=>new Ms.x}),sy=new p.OlP(Ns?"initial navigation":"",{providedIn:"root",factory:()=>1});function P0(){let n=[];return n=Ns?[{provide:p.Xts,multi:!0,useFactory:()=>{const e=(0,p.f3M)(bi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function _D(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Os(1,n)}const oy=new p.OlP(Ns?"router preloader":"");function ay(n){return Os(0,[{provide:oy,useExisting:qS},{provide:M0,useExisting:n}])}const cp=!1,uy=new p.OlP(cp?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),aC=[Te,{provide:An,useClass:pi},bi,Nd,{provide:zc,useFactory:function ry(n){return n.routerState.root},deps:[bi]},Qm,cp?{provide:iy,useValue:!0}:[]];function F0(){return new p.PXZ("Router",bi)}let L0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[aC,cp&&r?.enableTracing?P0().\u0275providers:[],{provide:el,multi:!0,useValue:t},{provide:uy,useFactory:cy,deps:[[bi,new p.FiY,new p.tp0]]},{provide:ap,useValue:r||{}},r?.useHash?{provide:et,useClass:Ae}:{provide:et,useClass:De},{provide:ty,useFactory:()=>{const n=(0,p.f3M)(na),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(ap),r=(0,p.f3M)(op),o=(0,p.f3M)(An);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ny(o,r,n,e,t)}},r?.preloadingStrategy?ay(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:F0},r?.initialNavigation?$d(r):[],[{provide:dp,useFactory:R0},{provide:p.tb,multi:!0,useExisting:dp}]]}}static forChild(t){return{ngModule:n,providers:[{provide:el,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(uy,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[qc]}),n})();function cy(n){if(cp&&n)throw new p.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $d(n){return["disabled"===n.initialNavigation?Os(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:sy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Os(2,[{provide:sy,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(he,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(bi),u=e.get(N0);(function sC(n,e){n.events.pipe(ni(t=>t instanceof fs||t instanceof qf||t instanceof H_||t instanceof Kf),(0,At.U)(t=>t instanceof fs||t instanceof Kf?ps.COMPLETE:t instanceof qf&&(0===t.code||1===t.code)?ps.REDIRECTING:ps.FAILED),ni(t=>t!==ps.REDIRECTING),Lc(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(op).afterPreactivation=()=>(r(!0),u.closed?gt(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const dp=new p.OlP(cp?"Router Initializer":"");class Sa{}Sa.\u0275fac=function(e){return new(e||Sa)},Sa.\u0275mod=p.oAB({type:Sa}),Sa.\u0275inj=p.cJS({imports:[L0.forRoot([]),L0]});var dy=F(4986),Rn=F(462);function nl(){return(0,qr.e)((n,e)=>{let t,r=!1;n.subscribe((0,qn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function V0(n,e=xs.y){return n=n??lC,(0,qr.e)((t,r)=>{let o,u=!0;t.subscribe((0,qn.x)(r,l=>{const g=e(l);(u||!n(o,g))&&(u=!1,o=g,r.next(l))}))})}function lC(n,e){return n===e}var Et,gs=F(2011),U0=(F(9568),F(3942)),Ie=F(5861),Au=F(9681),fp=F(4859),Sr=F(1877),wn=F(2090),dC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Aa={},pp=pp||{},zt=dC||self;function gp(){}function mp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function rl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hy="closure_uid_"+(1e9*Math.random()>>>0),fy=0;function fC(n,e,t){return n.call.apply(n.bind,arguments)}function pC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function gi(n,e,t){return(gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fC:pC).apply(null,arguments)}function yp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ii(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[o].apply(r,l)}}function si(){this.s=this.s,this.o=this.o}si.prototype.s=!1,si.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function hC(n){Object.prototype.hasOwnProperty.call(n,hy)&&n[hy]||(n[hy]=++fy)}(this)},si.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const B0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function gy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function my(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(mp(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}mi.prototype.h=function(){this.defaultPrevented=!0};var gC=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",gp,e),zt.removeEventListener("test",gp,e)}catch{}return n}();function vp(n){return/^[\s\xa0]*$/.test(n)}var _p=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yy(n,e){return n<e?-1:n>e?1:0}function Ep(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function zi(n){return-1!=Ep().indexOf(n)}function jd(n){return jd[" "](n),n}jd[" "]=gp;var il,n,XS=zi("Opera"),Ma=zi("Trident")||zi("MSIE"),mC=zi("Edge"),wp=mC||Ma,vy=zi("Gecko")&&!(-1!=Ep().toLowerCase().indexOf("webkit")&&!zi("Edge"))&&!(zi("Trident")||zi("MSIE"))&&!zi("Edge"),$0=-1!=Ep().toLowerCase().indexOf("webkit")&&!zi("Edge");function _y(){var n=zt.document;return n?n.documentMode:void 0}e:{var Ps="",sl=(n=Ep(),vy?/rv:([^\);]+)(\)|;)/.exec(n):mC?/Edge\/([\d\.]+)/.exec(n):Ma?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$0?/WebKit\/(\S+)/.exec(n):XS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(sl&&(Ps=sl?sl[1]:""),Ma){var ol=_y();if(null!=ol&&ol>parseFloat(Ps)){il=String(ol);break e}}il=Ps}var Hd={};var vC=zt.document&&Ma&&(_y()||parseInt(il,10))||void 0;function Gd(n,e){if(mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(vy){e:{try{jd(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zd[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gd.X.h.call(this)}}ii(Gd,mi);var zd={2:"touch",3:"pen",4:"mouse"};Gd.prototype.h=function(){Gd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wd="closure_listenable_"+(1e6*Math.random()|0),eA=0;function _C(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++eA,this.ba=this.ea=!1}function Cp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Iy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function j0(n){const e={};for(const t in n)e[t]=n[t];return e}const H0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<H0.length;u++)t=H0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bp(n){this.src=n,this.g={},this.h=0}function Tp(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=B0(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Cp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qd(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}bp.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=qd(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new _C(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var wy="closure_lm_"+(1e6*Math.random()|0),Kd={};function z0(n,e,t,r,o){if(r&&r.once)return q0(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)z0(n,e[u],t,r,o);return null}return t=Q0(t),n&&n[Wd]?n.N(e,t,rl(r)?!!r.capture:!!r,o):W0(n,e,t,!1,r,o)}function W0(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=rl(o)?!!o.capture:!!o,g=Sp(n);if(g||(n[wy]=g=new bp(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function EC(){const e=Y0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gC||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Z0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function q0(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)q0(n,e[u],t,r,o);return null}return t=Q0(t),n&&n[Wd]?n.O(e,t,rl(r)?!!r.capture:!!r,o):W0(n,e,t,!0,r,o)}function K0(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)K0(n,e[u],t,r,o);else r=rl(r)?!!r.capture:!!r,t=Q0(t),n&&n[Wd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qd(u=n.g[e],t,r,o))&&(Cp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Sp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qd(e,t,r,o)),(t=-1<n?e[n]:null)&&Dy(t))}function Dy(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Wd])Tp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Z0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Sp(e))?(Tp(t,n),0==t.h&&(t.src=null,e[wy]=null)):Cp(n)}}}function Z0(n){return n in Kd?Kd[n]:Kd[n]="on"+n}function Y0(n,e){if(n.ba)n=!0;else{e=new Gd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Dy(n),n=t.call(r,e)}return n}function Sp(n){return(n=n[wy])instanceof bp?n:null}var Cy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q0(n){return"function"==typeof n?n:(n[Cy]||(n[Cy]=function(e){return n.handleEvent(e)}),n[Cy])}function Vr(){si.call(this),this.i=new bp(this),this.P=this,this.I=null}function Ar(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mi(e,n);else if(e instanceof mi)e.target=e.target||n;else{var o=e;G0(e=new mi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Xs(l,r,!0,e)&&o}if(o=Xs(l=e.g=n,r,!0,e)&&o,o=Xs(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Xs(l=e.g=t[u],r,!1,e)&&o}function Xs(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var g=l.listener,_=l.ha||l.src;l.ea&&Tp(n.i,l),o=!1!==g.call(_,r)&&o}}return o&&!r.defaultPrevented}ii(Vr,si),Vr.prototype[Wd]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){K0(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Cp(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var J0=zt.JSON.stringify;function Ap(){var n=Zd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Mu,X0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new by,n=>n.reset());class by{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wC(n){zt.setTimeout(()=>{throw n},0)}function ks(n,e){Mu||function yi(){var n=zt.Promise.resolve(void 0);Mu=function(){n.then(ms)}}(),ko||(Mu(),ko=!0),Zd.add(n,e)}var ko=!1,Zd=new class IC{constructor(){this.h=this.g=null}add(e,t){const r=X0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ms(){for(var n;n=Ap();){try{n.h.call(n.g)}catch(t){wC(t)}var e=X0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ko=!1}function al(n,e){Vr.call(this),this.h=n||1,this.g=e||zt,this.j=gi(this.lb,this),this.l=Date.now()}function xa(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Ra(n,e,t){if("function"==typeof n)t&&(n=gi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gi(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function xu(n){n.g=Ra(()=>{n.g=null,n.i&&(n.i=!1,xu(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ii(al,Vr),(Et=al.prototype).ca=!1,Et.R=null,Et.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ar(this,"tick"),this.ca&&(xa(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){al.X.M.call(this),xa(this),delete this.g};class ul extends si{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xu(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(n){si.call(this),this.h=n,this.g={}}ii(eo,si);var Ru=[];function Nu(n,e,t,r){Array.isArray(t)||(t&&(Ru[0]=t.toString()),t=Ru);for(var o=0;o<t.length;o++){var u=z0(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ou(n){Iy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Dy(e)},n),n.g={}}function Fo(){this.g=!0}function Pu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return J0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}eo.prototype.M=function(){eo.X.M.call(this),Ou(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fo.prototype.Aa=function(){this.g=!1},Fo.prototype.info=function(){};var Na={},Ty=null;function Yd(){return Ty=Ty||new Vr}function Sy(n){mi.call(this,Na.Pa,n)}function Qd(n){const e=Yd();Ar(e,new Sy(e))}function iE(n,e){mi.call(this,Na.STAT_EVENT,n),this.stat=e}function vi(n){const e=Yd();Ar(e,new iE(e,n))}function sE(n,e){mi.call(this,Na.Qa,n),this.size=e}function Jd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}Na.Pa="serverreachability",ii(Sy,mi),Na.STAT_EVENT="statevent",ii(iE,mi),Na.Qa="timingevent",ii(sE,mi);var cl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Mp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ay(){}function eh(){}Ay.prototype.h=null;var nh,ku={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function My(){mi.call(this,"d")}function th(){mi.call(this,"c")}function rh(){}function ih(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new eo(this),this.O=oE,this.T=new al(n=wp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new xp}function xp(){this.i=null,this.g="",this.h=!1}ii(My,mi),ii(th,mi),ii(rh,Ay),rh.prototype.g=function(){return new XMLHttpRequest},rh.prototype.i=function(){return{}},nh=new rh;var oE=45e3,Rp={},ll={};function Np(n,e,t){n.K=1,n.v=Pp(to(e)),n.s=t,n.P=!0,aE(n,null)}function aE(n,e){n.F=Date.now(),sh(n),n.A=to(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Fy(t.i,"t",r),n.C=0,t=n.l.H,n.h=new xp,n.g=xE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ul(gi(n.La,n,n.g),n.N)),Nu(n.S,n.g,"readystatechange",n.ib),e=n.H?j0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Qd(),function eE(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var b=D[0];D=D[1];var R=b.split("_");l=2<=R.length&&"type"==R[1]?l+(b+"=")+D+"&":l+(b+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function xy(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ry(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=uE(n,t),o==ll){4==e&&(n.o=4,vi(14),r=!1),Pu(n.j,n.m,null,"[Incomplete Response]");break}if(o==Rp){n.o=4,vi(15),Pu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Pu(n.j,n.m,o,null),ah(n,o)}xy(n)&&o!=ll&&o!=Rp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yy(e),e.K=!0,vi(11))):(Pu(n.j,n.m,t,"[Invalid Chunked Response]"),Oa(n),oh(n))}function uE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ll:(t=Number(e.substring(t,r)),isNaN(t)?Rp:(r+=1)+t>e.length?ll:(e=e.substr(r,t),n.C=r+t,e))}function sh(n){n.V=Date.now()+n.O,cE(n,n.O)}function cE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jd(gi(n.gb,n),e)}function Op(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function oh(n){0==n.l.G||n.I||TE(n.l,n)}function Oa(n){Op(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,xa(n.T),Ou(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ah(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Vy(t.h,n)))if(!n.J&&Vy(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Bp(t),fh(t)}Zy(t),vi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Jd(gi(t.cb,t),6e3));if(1>=Vu(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Uu(t,11)}else if((n.J||t.g==n)&&Bp(t),!vp(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const b=D[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const R=D[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const z=D[5];null!=z&&"number"==typeof z&&0<z&&(t.J=r=1.5*z,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const ae=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.h;u.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Uy(u,u.h),u.h=null))}if(r.D){const Fe=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.za=Fe,Xn(r.F,r.D,Fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=ME(r,r.H?r.ka:null,r.V),l.J){By(r.h,l);var g=l,_=r.J;_&&g.setTimeout(_),g.B&&(Op(g),sh(g)),r.g=l}else Ky(r);0<t.i.length&&ph(t)}else"stop"!=D[0]&&"close"!=D[0]||Uu(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Uu(t,7):hh(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Qd()}catch{}}function Ny(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(mp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function dE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(mp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function lE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(mp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Et=ih.prototype).setTimeout=function(n){this.O=n},Et.ib=function(n){n=n.target;const e=this.L;e&&3==no(n)?e.l():this.La(n)},Et.La=function(n){try{if(n==this.g)e:{const b=no(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||wp||this.g&&(this.h.h||this.g.fa()||dh(this.g)))){this.I||4!=b||7==e||Qd(),Op(this);var t=this.g.aa();this.Y=t;t:if(xy(this)){var r=dh(this.g);n="";var o=r.length,u=4==no(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oa(this),oh(this);var l="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function tE(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vp(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,vi(12),Oa(this),oh(this);break e}Pu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ah(this,t)}this.P?(Ry(this,b,l),wp&&this.i&&3==b&&(Nu(this.S,this.T,"tick",this.hb),this.T.start())):(Pu(this.j,this.m,l,null),ah(this,l)),4==b&&Oa(this),this.i&&!this.I&&(4==b?TE(this.l,this):(this.i=!1,sh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,vi(12)):(this.o=0,vi(13)),Oa(this),oh(this)}}}catch{}},Et.hb=function(){if(this.g){var n=no(this.g),e=this.g.fa();this.C<e.length&&(Op(this),Ry(this,n,e),this.i&&4!=n&&sh(this))}},Et.cancel=function(){this.I=!0,Oa(this)},Et.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function nE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qd(),vi(17)),Oa(this),this.o=2,oh(this)):cE(this,this.V-n)};var Oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pa){this.h=void 0!==e?e:n.h,uh(this,n.j),this.s=n.s,this.g=n.g,Fu(this,n.m),this.l=n.l,e=n.i;var t=new ch;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lo(this,t),this.o=n.o}else n&&(t=String(n).match(Oy))?(this.h=!!e,uh(this,t[1]||"",!0),this.s=Lu(t[2]||""),this.g=Lu(t[3]||"",!0),Fu(this,t[4]),this.l=Lu(t[5]||"",!0),Lo(this,t[6]||"",!0),this.o=Lu(t[7]||"")):(this.h=!!e,this.i=new ch(null,this.h))}function to(n){return new Pa(n)}function uh(n,e,t){n.j=t?Lu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Lo(n,e,t){e instanceof ch?(n.i=e,function CC(n,e){e&&!n.j&&(Vo(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(pE(this,r),Fy(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fs(e,nA)),n.i=new ch(e,n.h))}function Xn(n,e,t){n.i.set(e,t)}function Pp(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fs(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Py),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Py(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fs(e,fE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fs(e,fE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fs(t,"/"==t.charAt(0)?tA:ky,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fs(t,DC)),n.join("")};var fE=/[#\/\?@]/g,ky=/[#\?:]/g,tA=/[#\?]/g,nA=/[#\?@]/g,DC=/#/g;function ch(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Vo(n){n.g||(n.g=new Map,n.h=0,n.i&&function hE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function pE(n,e){Vo(n),e=dl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Mr(n,e){return Vo(n),e=dl(n,e),n.g.has(e)}function Fy(n,e,t){pE(n,e),0<t.length&&(n.i=null,n.g.set(dl(n,e),gy(t)),n.h+=t.length)}function dl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mE(n){this.l=n||yE,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ga&&zt.g.Ga()&&zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=ch.prototype).add=function(n,e){Vo(this),this.i=null,n=dl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Et.forEach=function(n,e){Vo(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Et.oa=function(){Vo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Et.W=function(n){Vo(this);let e=[];if("string"==typeof n)Mr(this,n)&&(e=e.concat(this.g.get(dl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Et.set=function(n,e){return Vo(this),this.i=null,Mr(this,n=dl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Et.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var yE=10;function Ly(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Vu(n){return n.h?1:n.g?n.g.size:0}function Vy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Uy(n,e){n.g?n.g.add(e):n.h=e}function By(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return gy(n.i)}function kp(){}function rA(){this.g=new kp}function _E(n,e,t){const r=t||"";try{Ny(n,function(o,u){let l=o;rl(o)&&(l=J0(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Wi(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function lh(n){this.l=n.ac||null,this.j=n.jb||!1}function Fp(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mE.prototype.cancel=function(){if(this.i=vE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},kp.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},kp.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},ii(lh,Ay),lh.prototype.g=function(){return new Fp(this.l,this.j)},lh.prototype.i=function(n){return function(){return n}}({}),ii(Fp,Vr);var ys=0;function vs(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ti(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hl(n)}function hl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Et=Fp.prototype).open=function(n,e){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hl(this)},Et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ti(this)),this.readyState=ys},Et.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hl(this)),this.g&&(this.readyState=3,hl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vs(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Et.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ti(this):hl(this),3==this.readyState&&vs(this)}},Et.Va=function(n){this.g&&(this.response=this.responseText=n,Ti(this))},Et.Ua=function(n){this.g&&(this.response=n,Ti(this))},Et.ga=function(){this.g&&Ti(this)},Et.setRequestHeader=function(n,e){this.v.append(n,e)},Et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var EE=zt.JSON.parse;function mr(n){Vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=IE,this.K=this.L=!1}ii(mr,Vr);var IE="",bC=/^https?$/i,TC=["POST","PUT"];function fl(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wE(n),Lp(n)}function wE(n){n.D||(n.D=!0,Ar(n,"complete"),Ar(n,"error"))}function Hy(n){if(n.h&&typeof pp<"u"&&(!n.C[1]||4!=no(n)||2!=n.aa()))if(n.v&&4==no(n))Ra(n.Ha,0,n);else if(Ar(n,"readystatechange"),4==no(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Oy)[1]||null;if(!o&&zt.self&&zt.self.location){var u=zt.self.location.protocol;o=u.substr(0,u.length-1)}r=!bC.test(o?o.toLowerCase():"")}t=r}if(t)Ar(n,"complete"),Ar(n,"success");else{n.m=6;try{var l=2<no(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",wE(n)}}finally{Lp(n)}}}function Lp(n,e){if(n.g){Gy(n);const t=n.g,r=n.C[0]?gp:null;n.g=null,n.C=null,e||Ar(n,"ready");try{t.onreadystatechange=r}catch{}}}function Gy(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function no(n){return n.g?n.g.readyState:0}function dh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case IE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function DE(n){let e="";return Iy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Vp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=DE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function pl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Up(n){this.Ca=0,this.i=[],this.j=new Fo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=pl("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=pl("baseRetryDelayMs",5e3,n),this.bb=pl("retryDelaySeedMs",1e4,n),this.$a=pl("forwardChannelMaxRetries",2,n),this.ta=pl("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new mE(n&&n.concurrentRequestLimit),this.Fa=new rA,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function hh(n){if(zy(n),3==n.G){var e=n.U++,t=to(n.F);Xn(t,"SID",n.I),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),gl(n,t),(e=new ih(n,n.j,e,void 0)).K=2,e.v=Pp(to(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon&&(t=zt.navigator.sendBeacon(e.v.toString(),"")),!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=xE(e.l,null),e.g.da(e.v)),e.F=Date.now(),sh(e)}AE(n)}function fh(n){n.g&&(Yy(n),n.g.cancel(),n.g=null)}function zy(n){fh(n),n.u&&(zt.clearTimeout(n.u),n.u=null),Bp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function ph(n){Ly(n.h)||n.m||(n.m=!0,ks(n.Ja,n),n.C=0)}function Wy(n,e){var t;t=e?e.m:n.U++;const r=to(n.F);Xn(r,"SID",n.I),Xn(r,"RID",t),Xn(r,"AID",n.T),gl(n,r),n.o&&n.s&&Vp(r,n.o,n.s),t=new ih(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=qy(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Uy(n.h,t),Np(t,r,e)}function gl(n,e){n.ia&&Iy(n.ia,function(t,r){Xn(e,r,t)}),n.l&&Ny({},function(t,r){Xn(e,r,t)})}function qy(n,e,t){t=Math.min(n.i.length,t);var r=n.l?gi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=o[_].h;const b=o[_].g;if(D-=u,0>D)u=Math.max(0,o[_].h-100),g=!1;else try{_E(b,l,"req"+D+"_")}catch{r&&r(b)}}if(g){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Ky(n){n.g||n.u||(n.Z=1,ks(n.Ia,n),n.A=0)}function Zy(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Jd(gi(n.Ia,n),SE(n,n.A)),n.A++,0))}function Yy(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function bE(n){n.g=new ih(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=to(n.sa);Xn(e,"RID","rpc"),Xn(e,"SID",n.I),Xn(e,"CI",n.L?"0":"1"),Xn(e,"AID",n.T),Xn(e,"TYPE","xmlhttp"),gl(n,e),n.o&&n.s&&Vp(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Pp(to(e)),t.s=null,t.P=!0,aE(t,n)}function Bp(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function TE(n,e){var t=null;if(n.g==e){Bp(n),Yy(n),n.g=null;var r=2}else{if(!Vy(n.h,e))return;t=e.D,By(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ar(r=Yd(),new sE(r,t)),ph(n)}else Ky(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function CE(n,e){return!(Vu(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Jd(gi(n.Ja,n,e),SE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Zy(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Uu(n,5);break;case 4:Uu(n,10);break;case 3:Uu(n,6);break;default:Uu(n,2)}}function SE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Uu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=gi(n.kb,n);t||(t=new Pa("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||uh(t,"https"),Pp(t)),function $y(n,e){const t=new Fo;if(zt.Image){const r=new Image;r.onload=yp(Wi,t,r,"TestLoadImage: loaded",!0,e),r.onerror=yp(Wi,t,r,"TestLoadImage: error",!1,e),r.onabort=yp(Wi,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=yp(Wi,t,r,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else vi(2);n.G=0,n.l&&n.l.va(e),AE(n),zy(n)}function AE(n){if(n.G=0,n.la=[],n.l){const e=vE(n.h);(0!=e.length||0!=n.i.length)&&(my(n.la,e),my(n.la,n.i),n.h.i.length=0,gy(n.i),n.i.length=0),n.l.ua()}}function ME(n,e,t){var r=t instanceof Pa?to(t):new Pa(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Fu(r,r.m);else{var o=zt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Pa(null,void 0);r&&uh(u,r),e&&(u.g=e),o&&Fu(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Xn(r,t,e),Xn(r,"VER",n.ma),gl(n,r),r}function xE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Da&&!n.ra?new lh({jb:!0}):n.ra)).Ka(n.H),e}function RE(){}function $p(){if(Ma&&!(10<=Number(vC)))throw Error("Environmental error: no available transport.")}function qi(n,e){Vr.call(this),this.g=new Up(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!vp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ml(this)}function NE(n){My.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function OE(){th.call(this),this.status=1}function ml(n){this.g=n}(Et=mr.prototype).Ka=function(n){this.L=n},Et.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nh.g(),this.C=function Xd(n){return n.h||(n.h=n.i())}(this.u?this.u:nh),this.g.onreadystatechange=gi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void fl(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=zt.FormData&&n instanceof zt.FormData,!(0<=B0(TC,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gy(this),0<this.B&&((this.K=function jy(n){return Ma&&function yC(){return function Ip(n){var e=Hd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=_p(String(il)).split("."),t=_p("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=yy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||yy(0==o[2].length,0==u[2].length)||yy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gi(this.qa,this)):this.A=Ra(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){fl(this,u)}},Et.qa=function(){typeof pp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},Et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ar(this,"complete"),Ar(this,"abort"),Lp(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lp(this,!0)),mr.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?Hy(this):this.fb())},Et.fb=function(){Hy(this)},Et.aa=function(){try{return 2<no(this)?this.g.status:-1}catch{return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Et.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),EE(e)}},Et.Ea=function(){return this.m},Et.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=Up.prototype).ma=8,Et.G=1,Et.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new ih(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=j0(u),G0(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=qy(this,o,e),Xn(t=to(this.F),"RID",n),Xn(t,"CVER",22),this.D&&Xn(t,"X-HTTP-Session-Id",this.D),gl(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(DE(u)))+"&"+e:this.o&&Vp(t,this.o,u)),Uy(this.h,o),this.Ya&&Xn(t,"TYPE","init"),this.O?(Xn(t,"$req",e),Xn(t,"SID","null"),o.Z=!0,Np(o,t,null)):Np(o,t,e),this.G=2}}else 3==this.G&&(n?Wy(this,n):0==this.i.length||Ly(this.h)||Wy(this))},Et.Ia=function(){if(this.u=null,bE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Jd(gi(this.eb,this),n)}},Et.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,vi(10),fh(this),bE(this))},Et.cb=function(){null!=this.v&&(this.v=null,fh(this),Zy(this),vi(19))},Et.kb=function(n){n?(this.j.info("Successfully pinged google.com"),vi(2)):(this.j.info("Failed to ping google.com"),vi(1))},(Et=RE.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Ra=function(){},$p.prototype.g=function(n,e){return new qi(n,e)},ii(qi,Vr),qi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;vi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ME(n,null,n.V),ph(n)},qi.prototype.close=function(){hh(this.g)},qi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=J0(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&ph(e)},qi.prototype.M=function(){this.g.l=null,delete this.j,hh(this.g),delete this.g,qi.X.M.call(this)},ii(NE,My),ii(OE,th),ii(ml,RE),ml.prototype.xa=function(){Ar(this.g,"a")},ml.prototype.wa=function(n){Ar(this.g,new NE(n))},ml.prototype.va=function(n){Ar(this.g,new OE)},ml.prototype.ua=function(){Ar(this.g,"b")},$p.prototype.createWebChannel=$p.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,Mp.COMPLETE="complete",eh.EventType=ku,ku.OPEN="a",ku.CLOSE="b",ku.ERROR="c",ku.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.Oa,mr.prototype.getLastErrorCode=mr.prototype.Ea,mr.prototype.getStatus=mr.prototype.aa,mr.prototype.getResponseJson=mr.prototype.Sa,mr.prototype.getResponseText=mr.prototype.fa,mr.prototype.send=mr.prototype.da,mr.prototype.setWithCredentials=mr.prototype.Ka;var SC=Aa.createWebChannelTransport=function(){return new $p},AC=Aa.getStatEventTarget=function(){return Yd()},jp=Aa.ErrorCode=cl,PE=Aa.EventType=Mp,kE=Aa.Event=Na,Qy=Aa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},FE=Aa.FetchXmlHttpFactory=lh,gh=Aa.WebChannel=eh,LE=Aa.XhrIo=mr;const Jy="@firebase/firestore";class Ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let Bu="9.17.1";const Uo=new Sr.Yd("@firebase/firestore");function Bo(){return Uo.logLevel}function ze(n,...e){if(Uo.logLevel<=Sr.in.DEBUG){const t=e.map(mh);Uo.debug(`Firestore (${Bu}): ${n}`,...t)}}function Hn(n,...e){if(Uo.logLevel<=Sr.in.ERROR){const t=e.map(mh);Uo.error(`Firestore (${Bu}): ${n}`,...t)}}function yl(n,...e){if(Uo.logLevel<=Sr.in.WARN){const t=e.map(mh);Uo.warn(`Firestore (${Bu}): ${n}`,...t)}}function mh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Bu}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function It(n,e){n||ht()}function at(n,e){return n}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends wn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class UE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class xC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Hp{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=l;e.enqueueRetryable((0,Ie.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new UE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Ur(e)}}class Gp{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(It(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yr{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new Gp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BE{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.A=t.token,new RC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function OC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Xy{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=OC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function $u(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ev(n){return n+"\0"}class er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new er(0,0))}static max(){return new Mt(new er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yh{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===yh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends yh{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const PC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends yh{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return PC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new ke(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new ke(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new ke(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===g?(l=!l,o++):"."!==g||l?(r+=g,o++):(u(),o++)}if(u(),l)throw new ke(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(sn.fromString(e))}static fromName(e){return new it(sn.fromString(e).popFirst(5))}static empty(){return new it(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new sn(e.slice()))}}class ju{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function zp(n){return n.fields.find(e=>2===e.kind)}function ka(n){return n.fields.filter(e=>2!==e.kind)}ju.UNKNOWN_ID=-1;class Wp{constructor(e,t){this.fieldPath=e,this.kind=t}}class $o{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $o(0,Ki.min())}}function jE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(1e9===r?new er(t+1,0):new er(t,r));return new Ki(o,it.empty(),e)}function HE(n){return new Ki(n.readTime,n.key,-1)}class Ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ki(Mt.min(),it.empty(),-1)}static max(){return new Ki(Mt.max(),it.empty(),-1)}}function qp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=it.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}const tv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fa(n){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,Ie.Z)(function*(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==tv)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),Kp.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let o=0,u=0,l=!1;e.forEach(g=>{++o,g.next(()=>{++u,l&&u===o&&t()},_=>r(_))}),l=!0,u===o&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(o=>o?ue.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,o)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(b=>{l[D]=b,++g,g===u&&r(l)},b=>o(b))}})}static doWhile(e,t){return new ue((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Zp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Yp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=rv(r.target.error);this.P.reject(new Yp(e,o))}}static open(e,t,r,o){try{return new Zp(t,e.transaction(o,r))}catch(u){throw new Yp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GE(t)}}class ro{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ro.D((0,wn.z$)())&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),io(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,wn.hl)())return!1;if(ro.N())return!0;const e=(0,wn.z$)(),t=ro.D(e),r=0<t&&t<10,o=ro.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Yp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;o("VersionError"===g.name?new ke(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ke(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Yp(e,g))},u.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=Zp.open(u.db,e,l?"readonly":"readwrite",r),D=o(_).next(b=>(_.V(),b)).catch(b=>(_.abort(b),ue.reject(b))).toPromise();return D.catch(()=>{}),yield _.v,D}catch(_){const D=_,b="FirebaseError"!==D.name&&g<3;if(ze("SimpleDb","Transaction failed with error:",D.message,"Retrying:",b),u.close(),!b)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iA{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return io(this.q.delete())}}class Yp extends ke{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hu(n){return"IndexedDbTransactionError"===n.name}class GE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),io(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),io(this.store.add(e))}get(e){return io(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),io(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),io(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ue((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ue((r,o)=>{t.onerror=u=>{const l=rv(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void o();const _=new iA(g),D=t(g.primaryKey,g.value,_);if(D instanceof ue){const b=D.catch(R=>(_.done(),ue.reject(R)));r.push(b)}_.isDone?o():null===_.G?g.continue():g.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function io(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=rv(r.target.error);t(o)}})}let zE=!1;function rv(n){const e=ro.D((0,wn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zE||(zE=!0,setTimeout(()=>{throw r},0)),r}}return n}class WE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Hu(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Fa(r)}yield t.nt(6e4)}))}}class _h{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ue.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(g=>{o-=g,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(g=>(ze("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=HE(u);qp(l,r)>0&&(r=l)}),new Ki(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class kC{constructor(e,t,r,o,u,l,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class La{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new La("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}function qE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _l(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function El(n){return null==n}function Eh(n){return 0===n&&1/n==-1/0}function ZE(n){return"number"==typeof n&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new $r(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const YE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Va(n){if(It(!!n),"string"==typeof n){let e=0;const t=YE.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ur(n.seconds),nanos:ur(n.nanos)}}function ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gu(n){return"string"==typeof n?$r.fromBase64String(n):$r.fromUint8Array(n)}function Qp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function QE(n){const e=n.mapValue.fields.__previous_value__;return Qp(e)?QE(e):e}function zu(n){const e=Va(n.mapValue.fields.__local_write_time__.timestampValue);return new er(e.seconds,e.nanos)}const Ua={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wh={nullValue:"NULL_VALUE"};function Ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qp(n)?4:eI(n)?9007199254740991:10:ht()}function so(n,e){if(n===e)return!0;const t=Ba(n);if(t!==Ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zu(n).isEqual(zu(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Va(r.timestampValue),l=Va(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Gu(n.bytesValue).isEqual(Gu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return ur(r.geoPointValue.latitude)===ur(o.geoPointValue.latitude)&&ur(r.geoPointValue.longitude)===ur(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ur(r.integerValue)===ur(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=ur(r.doubleValue),l=ur(o.doubleValue);return u===l?Eh(u)===Eh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return $u(n.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(qE(u)!==qE(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!so(u[g],l[g])))return!1;return!0}(n,e);default:return ht()}var o}function Dh(n,e){return void 0!==(n.values||[]).find(t=>so(t,e))}function $a(n,e){if(n===e)return 0;const t=Ba(n),r=Ba(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=ur(o.integerValue||o.doubleValue),g=ur(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return Jp(n.timestampValue,e.timestampValue);case 4:return Jp(zu(n),zu(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Gu(o),g=Gu(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const D=Ht(l[_],g[_]);if(0!==D)return D}return Ht(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Ht(ur(o.latitude),ur(u.latitude));return 0!==l?l:Ht(ur(o.longitude),ur(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const D=$a(l[_],g[_]);if(D)return D}return Ht(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ua.mapValue&&u===Ua.mapValue)return 0;if(o===Ua.mapValue)return 1;if(u===Ua.mapValue)return-1;const l=o.fields||{},g=Object.keys(l),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let b=0;b<g.length&&b<D.length;++b){const R=Ht(g[b],D[b]);if(0!==R)return R;const z=$a(l[g[b]],_[D[b]]);if(0!==z)return z}return Ht(g.length,D.length)}(n.mapValue,e.mapValue);default:throw ht()}}function Jp(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Va(n),r=Va(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function Il(n){return Xp(n)}function Xp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Va(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gu(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Xp(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${Xp(r.fields[g])}`;return u+"}"}(n.mapValue):ht();var e}function Wu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iv(n){return!!n&&"integerValue"in n}function Ch(n){return!!n&&"arrayValue"in n}function JE(n){return!!n&&"nullValue"in n}function XE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eg(n){return!!n&&"mapValue"in n}function bh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _l(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function tI(n){return"nullValue"in n?wh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wu(La.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function nI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wu(La.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ua:ht()}function rI(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iI(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class jo{constructor(e,t){this.position=e,this.inclusive=t}}function sI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?it.comparator(it.fromName(l.referenceValue),t.key):$a(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function oI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!so(n.position[t],e.position[t]))return!1;return!0}class aI{}class on extends aI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new lI(e,t,r):"array-contains"===t?new uv(e,r):"in"===t?new dI(e,r):"not-in"===t?new cv(e,r):"array-contains-any"===t?new LC(e,r):new on(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new FC(e,r):new sA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($a(t,this.value)):null!==t&&Ba(this.value)===Ba(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends aI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Cn(e,t)}matches(e){return qu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function qu(n){return"and"===n.op}function Th(n){return"or"===n.op}function sv(n){return uI(n)&&qu(n)}function uI(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function Sh(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+Il(n.value);if(sv(n))return n.filters.map(e=>Sh(e)).join(",");{const e=n.filters.map(t=>Sh(t)).join(",");return`${n.op}(${e})`}}function cI(n,e){return n instanceof on?(t=n,(r=e)instanceof on&&t.op===r.op&&t.field.isEqual(r.field)&&so(t.value,r.value)):n instanceof Cn?function(t,r){return r instanceof Cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&cI(u,r.filters[l]),!0)}(n,e):void ht();var t,r}function ov(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function Ku(n){return n instanceof on?`${(e=n).field.canonicalString()} ${e.op} ${Il(e.value)}`:n instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(Ku).join(" ,")+"}"}(n):"Filter";var e}class lI extends on{constructor(e,t,r){super(e,t,r),this.key=it.fromName(r.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class FC extends on{constructor(e,t){super(e,"in",t),this.keys=av(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sA extends on{constructor(e,t){super(e,"not-in",t),this.keys=av(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function av(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>it.fromName(r.referenceValue))}class uv extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ch(t)&&Dh(t.arrayValue,this.value)}}class dI extends on{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dh(this.value.arrayValue,t)}}class cv extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dh(this.value.arrayValue,t)}}class LC extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dh(this.value.arrayValue,r))}}class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function lv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class cr{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ah(this.root,e,this.comparator,!0)}}class Ah{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Zr.RED,this.left=o??Zr.EMPTY,this.right=u??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Zr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1,Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hI(this.data.getIterator())}getIteratorFrom(e){return new hI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class hI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wl(n){return n.hasNext()?n.getNext():void 0}class Oi{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new Nn(vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bh(t)}setAll(e){let t=vr.emptyPath(),r={},o=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=g.popLast()}l?r[g.lastSegment()]=bh(l):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());eg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return so(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];eg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){_l(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new oi(bh(this.value))}}function dv(n){const e=[];return _l(n.fields,(t,r)=>{const o=new vr([t]);if(eg(r)){const u=dv(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Oi(e)}class tr{constructor(e,t,r,o,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new tr(e,0,Mt.min(),Mt.min(),Mt.min(),oi.empty(),0)}static newFoundDocument(e,t,r,o){return new tr(e,1,t,Mt.min(),r,o,0)}static newNoDocument(e,t){return new tr(e,2,t,Mt.min(),Mt.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Mt.min(),Mt.min(),oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fI{constructor(e,t=null,r=[],o=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=g,this.ft=null}}function hv(n,e=null,t=[],r=[],o=null,u=null,l=null){return new fI(n,e,t,r,o,u,l)}function Yu(n){const e=at(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),El(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Il(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Il(r)).join(",")),e.ft=t}return e.ft}function tg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oI(n.startAt,e.startAt)&&oI(n.endAt,e.endAt)}function ng(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rg(n,e){return n.filters.filter(t=>t instanceof on&&t.field.isEqual(e))}function pI(n,e,t){let r=wh,o=!0;for(const u of rg(n,e)){let l=wh,g=!0;switch(u.op){case"<":case"<=":l=tI(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=wh}rI({value:r,inclusive:o},{value:l,inclusive:g})<0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];rI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function gI(n,e,t){let r=Ua,o=!0;for(const u of rg(n,e)){let l=Ua,g=!0;switch(u.op){case">=":case">":l=nI(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Ua}iI({value:r,inclusive:o},{value:l,inclusive:g})>0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];iI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Ho{constructor(e,t=null,r=[],o=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.dt=null,this._t=null}}function mI(n,e,t,r,o,u,l,g){return new Ho(n,e,t,r,o,u,l,g)}function Dl(n){return new Ho(n)}function yI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ig(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function pv(n){return null!==n.collectionGroup}function Qu(n){const e=at(n);if(null===e.dt){e.dt=[];const t=ig(e),r=fv(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Zu(t)),e.dt.push(new Zu(vr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Zu(vr.keyField(),u))}}}return e.dt}function jr(n){const e=at(n);if(!e._t)if("F"===e.limitType)e._t=hv(e.path,e.collectionGroup,Qu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Qu(e))t.push(new Zu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new jo(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new jo(e.startAt.position,e.startAt.inclusive):null;e._t=hv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function sg(n,e){e.getFirstInequalityField(),ig(n);const t=n.filters.concat([e]);return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mh(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cl(n,e){return tg(jr(n),jr(e))&&n.limitType===e.limitType}function gv(n){return`${Yu(jr(n))}|lt:${n.limitType}`}function og(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Ku(r)).join(", ")}]`),El(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Il(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Il(r)).join(",")),`Target(${t})`}(jr(n))}; limitType=${n.limitType})`}function bl(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):it.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Qu(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const g=sI(o,u,l);return o.inclusive?g<=0:g<0}(t.startAt,Qu(t),r)||t.endAt&&!function(o,u,l){const g=sI(o,u,l);return o.inclusive?g>=0:g>0}(t.endAt,Qu(t),r)));var t,r}function vI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VC(n){return(e,t)=>{let r=!1;for(const o of Qu(n)){const u=_I(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function _I(n,e,t){const r=n.field.isKeyField()?it.comparator(e.key,t.key):function(o,u,l){const g=u.data.field(o),_=l.data.field(o);return null!==g&&null!==_?$a(g,_):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function EI(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function II(n){return{integerValue:""+n}}function wI(n,e){return ZE(e)?II(e):EI(n,e)}class ag{constructor(){this._=void 0}}function xh(n,e,t){return n instanceof Si?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Ju?cg(n,e):n instanceof Ls?DI(n,e):function(r,o){const u=ug(r,o),l=CI(u)+CI(r.gt);return iv(u)&&iv(r.gt)?II(l):EI(r.yt,l)}(n,e)}function UC(n,e,t){return n instanceof Ju?cg(n,e):n instanceof Ls?DI(n,e):t}function ug(n,e){return n instanceof Tl?iv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Si extends ag{}class Ju extends ag{constructor(e){super(),this.elements=e}}function cg(n,e){const t=Rh(e);for(const r of n.elements)t.some(o=>so(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ls extends ag{constructor(e){super(),this.elements=e}}function DI(n,e){let t=Rh(e);for(const r of n.elements)t=t.filter(o=>!so(o,r));return{arrayValue:{values:t}}}class Tl extends ag{constructor(e,t){super(),this.yt=e,this.gt=t}}function CI(n){return ur(n.integerValue||n.doubleValue)}function Rh(n){return Ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ja{constructor(e,t){this.field=e,this.transform=t}}class $C{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Sl{}function mv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ec(n.key,Zn.none()):new Ha(n.key,n.data,Zn.none());{const t=n.data,r=oi.empty();let o=new Nn(vr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Go(n.key,r,new Oi(o.toArray()),Zn.none())}}function yv(n,e,t){n instanceof Ha?function(r,o,u){const l=r.value.clone(),g=SI(r.fieldTransforms,o,u.transformResults);l.setAll(g),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Go?function(r,o,u){if(!Nh(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=SI(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(TI(r)),g.setAll(l),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Xu(n,e,t,r){return n instanceof Ha?function(o,u,l,g){if(!Nh(o.precondition,u))return l;const _=o.value.clone(),D=AI(o.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Go?function(o,u,l,g){if(!Nh(o.precondition,u))return l;const _=AI(o.fieldTransforms,g,u),D=u.data;return D.setAll(TI(o)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,Nh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function bI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=ug(r.transform,o||null);null!=u&&(null===t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function lg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&$u(t,r,(o,u)=>function BC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ju&&r instanceof Ju||t instanceof Ls&&r instanceof Ls?$u(t.elements,r.elements,so):t instanceof Tl&&r instanceof Tl?so(t.gt,r.gt):t instanceof Si&&r instanceof Si);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ha extends Sl{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Go extends Sl{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function TI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function SI(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,g=e.data.field(u.field);r.set(u.field,UC(l,g,t[o]))}return r}function AI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,xh(u,l,e))}return r}class ec extends Sl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Oh extends Sl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MI{constructor(e){this.count=e}}var xr,hn;function vv(n){switch(n){default:return ht();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function xI(n){if(void 0===n)return Hn("GRPC error has no .code"),Y.UNKNOWN;switch(n){case xr.OK:return Y.OK;case xr.CANCELLED:return Y.CANCELLED;case xr.UNKNOWN:return Y.UNKNOWN;case xr.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case xr.INTERNAL:return Y.INTERNAL;case xr.UNAVAILABLE:return Y.UNAVAILABLE;case xr.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case xr.NOT_FOUND:return Y.NOT_FOUND;case xr.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case xr.ABORTED:return Y.ABORTED;case xr.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case xr.DATA_LOSS:return Y.DATA_LOSS;default:return ht()}}(hn=xr||(xr={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class zo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return KE(this.inner)}size(){return this.innerSize}}const RI=new cr(it.comparator);function Pi(){return RI}const _v=new cr(it.comparator);function Ph(...n){let e=_v;for(const t of n)e=e.insert(t.key,t);return e}function _i(n){let e=_v;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ai(){return kh()}function NI(){return kh()}function kh(){return new zo(n=>n.toString(),(n,e)=>n.isEqual(e))}const oA=new cr(it.comparator),aA=new Nn(it.comparator);function Yt(...n){let e=aA;for(const t of n)e=e.add(t);return e}const OI=new Nn(Ht);function Ga(){return OI}class Fh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fh(Mt.min(),o,Ga(),Pi(),Yt())}}class tc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tc(r,t,Yt(),Yt(),Yt())}}class dg{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class Ev{constructor(e,t){this.targetId=e,this.Et=t}}class PI{constructor(e,t,r=$r.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class kI{constructor(){this.At=0,this.Rt=Iv(),this.bt=$r.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Yt(),t=Yt(),r=Yt();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ht()}}),new tc(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Iv()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class jC{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Pi(),this.qt=hg(),this.Ut=new Nn(Ht)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(ng(u))if(0===r){const l=new it(u.path);this.Qt(t,l,tr.newNoDocument(l,Mt.min()))}else It(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const g=this.Yt(l);if(g){if(u.current&&ng(g.target)){const _=new it(g.target.path);null!==this.Lt.get(_)||this.te(l,_)||this.Qt(l,_,tr.newNoDocument(_,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=Yt();this.qt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const D=this.Yt(_);return!D||2===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const o=new Fh(e,t,this.Ut,this.Lt,r);return this.Lt=Pi(),this.qt=hg(),this.Ut=new Nn(Ht),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new kI,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Nn(Ht),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new kI),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function hg(){return new cr(it.comparator)}function Iv(){return new cr(it.comparator)}const FI={asc:"ASCENDING",desc:"DESCENDING"},fg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wv={and:"AND",or:"OR"};class uA{constructor(e,t){this.databaseId=e,this.wt=t}}function nc(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LI(n,e){return n.wt?e.toBase64():e.toUint8Array()}function VI(n,e){return nc(n,e.toTimestamp())}function Gn(n){return It(!!n),Mt.fromTimestamp(function(e){const t=Va(e);return new er(t.seconds,t.nanos)}(n))}function Dv(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cv(n){const e=sn.fromString(n);return It(qC(e)),e}function rc(n,e){return Dv(n.databaseId,e.path)}function Wo(n,e){const t=Cv(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(UI(t))}function bv(n,e){return Dv(n.databaseId,e)}function HC(n){const e=Cv(n);return 4===e.length?sn.emptyPath():UI(e)}function Lh(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UI(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function BI(n,e,t){return{name:rc(n,e),fields:t.value.mapValue.fields}}function Tv(n,e,t){const r=Wo(n,e.name),o=Gn(e.updateTime),u=e.createTime?Gn(e.createTime):Mt.min(),l=new oi({mapValue:{fields:e.fields}}),g=tr.newFoundDocument(r,o,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Al(n,e){let t;if(e instanceof Ha)t={update:BI(n,e.key,e.value)};else if(e instanceof ec)t={delete:rc(n,e.key)};else if(e instanceof Go)t={update:BI(n,e.key,e.data),updateMask:cA(e.fieldMask)};else{if(!(e instanceof Oh))return ht();t={verify:rc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Si)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ju)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ls)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Tl)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:VI(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ht()),t;var o}function pg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Zn.updateTime(Gn(o.updateTime)):void 0!==o.exists?Zn.exists(o.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let g=null;"setToServerValue"in l?(It("REQUEST_TIME"===l.setToServerValue),g=new Si):"appendMissingElements"in l?g=new Ju(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Ls(l.removeAllFromArray.values||[]):"increment"in l?g=new Tl(u,l.increment):ht();const _=vr.fromServerFormat(l.fieldPath);return new ja(_,g)}(n,o)):[];var o;if(e.update){const o=Wo(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Oi((e.updateMask.fieldPaths||[]).map(D=>vr.fromServerFormat(D)));return new Go(o,u,l,t,r)}return new Ha(o,u,t,r)}if(e.delete){const o=Wo(n,e.delete);return new ec(o,t)}if(e.verify){const o=Wo(n,e.verify);return new Oh(o,t)}return ht()}function jI(n,e){return{documents:[bv(n,e.path)]}}function gg(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0!==_.length)return Av(Cn.create(_,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:Ml((b=D).field),direction:zI(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(D=e.limit,n.wt||El(D)?D:{value:D});var D,g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function HI(n){let e=HC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=function(b){const R=Sv(b);return R instanceof Cn&&sv(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Zu(Vh((R=b).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let g=null;t.limit&&(g=function(b){let R;return R="object"==typeof b?b.value:b,El(R)?null:R}(t.limit));let _=null;var b;t.startAt&&(_=new jo((b=t.startAt).values||[],!!b.before));let D=null;return t.endAt&&(D=function(b){return new jo(b.values||[],!b.before)}(t.endAt)),mI(e,o,l,u,g,"F",_,D)}function Sv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vh(e.unaryFilter.field);return on.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Vh(e.unaryFilter.field);return on.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Vh(e.unaryFilter.field);return on.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Vh(e.unaryFilter.field);return on.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?on.create(Vh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Cn.create(e.compositeFilter.filters.map(t=>Sv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ht()}}(e.compositeFilter.op))}(n):ht();var e}function zI(n){return FI[n]}function WI(n){return fg[n]}function WC(n){return wv[n]}function Ml(n){return{fieldPath:n.canonicalString()}}function Vh(n){return vr.fromServerFormat(n.fieldPath)}function Av(n){return n instanceof on?function(e){if("=="===e.op){if(XE(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NAN"}};if(JE(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(XE(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NOT_NAN"}};if(JE(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(e.field),op:WI(e.op),value:e.value}}}(n):n instanceof Cn?function(e){const t=e.getFilters().map(r=>Av(r));return 1===t.length?t[0]:{compositeFilter:{op:WC(e.op),filters:t}}}(n):ht()}function cA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KC(e)),e=lA(n.get(t),e);return KC(e)}function lA(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function KC(n){return n+"\x01\x01"}function qo(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&ht(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===o.length?_=g:(o+=g,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:ht()}u=l+2}return new sn(r)}const ZC=["userId","batchId"];function Mv(n,e){return[n,ki(e)]}function Uh(n,e,t){return[n,ki(e),t]}const dA={},qI=["prefixPath","collectionGroup","readTime","documentId"],mg=["prefixPath","collectionGroup","documentId"],KI=["collectionGroup","readTime","prefixPath","documentId"],ZI=["canonicalId","targetId"],hA=["targetId","path"],xv=["path","targetId"],YI=["collectionId","parent"],YC=["indexId","uid"],QI=["uid","sequenceNumber"],fA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pA=["indexId","uid","orderedDocumentKey"],QC=["userId","collectionPath","documentId"],JC=["userId","collectionPath","largestBatchId"],yg=["userId","collectionGroup","largestBatchId"],JI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gA=[...JI,"documentOverlays"],XC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eb=XC,tb=[...eb,"indexConfiguration","indexState","indexEntries"];class Rv extends nv{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=at(n);return ro.M(t.se,e)}class XI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&yv(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=NI();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(o.key)?null:g;const _=mv(l,g);null!==_&&r.set(o.key,_),l.isValidDocument()||l.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,(t,r)=>lg(t,r))&&$u(this.baseMutations,e.baseMutations,(t,r)=>lg(t,r))}}class Nv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=oA;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new Nv(e,t,r,o)}}class vg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ko{constructor(e,t,r,o,u=Mt.min(),l=Mt.min(),g=$r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nb{constructor(e){this.ie=e}}function ew(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rc(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:nc(o,u.version.toTimestamp()),createTime:nc(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ic(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:ic(e.version)}}var o,u;return r}function xl(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ic(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rl(n){const e=new er(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Qr(n,e){const t=(e.baseMutations||[]).map(u=>pg(n.ie,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>pg(n.ie,u)),o=er.fromMillis(e.localWriteTimeMs);return new XI(e.batchId,o,t,r)}function Bh(n){const e=Rl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rl(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=jr(Dl(HC(o.documents[0])))):r=jr(HI(n.query)),new Ko(r,n.targetId,0,n.lastListenSequenceNumber,e,t,$r.fromBase64String(n.resumeToken))}function _g(n,e){const t=ic(e.snapshotVersion),r=ic(e.lastLimboFreeSnapshotVersion);let o;o=ng(e.target)?jI(n.ie,e.target):gg(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Ov(n){const e=HI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Mh(e,e.limit,"L"):e}function Pv(n,e){return new vg(e.largestBatchId,pg(n.ie,e.overlayMutation))}function Eg(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}function kv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ic(r.readTime),documentKey:ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class tw{getBundleMetadata(e,t){return nw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Rl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return nw(e).put({bundleId:(r=t).id,createTime:ic(Gn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Fv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Ov(o.bundledQuery),readTime:Rl(o.readTime)};var o})}saveNamedQuery(e,t){return Fv(e).put({name:(r=t).name,readTime:ic(Gn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function nw(n){return Yr(n,"bundles")}function Fv(n){return Yr(n,"namedQueries")}class $h{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new $h(e,t.uid||"")}getOverlay(e,t){return jh(e).get(Eg(this.userId,t)).next(r=>r?Pv(this.yt,r):null)}getOverlays(e,t){const r=Ai();return ue.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const g=new vg(t,l);o.push(this.oe(e,g))}),ue.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(ki(l.getCollectionPath())));const u=[];return o.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(jh(e).Y("collectionPathOverlayIndex",g))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ai(),u=ki(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return jh(e).W("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const D=Pv(this.yt,_);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ai();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jh(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,D,b)=>{const R=Pv(this.yt,D);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):b.done()}).next(()=>u)}oe(e,t){return jh(e).put(function(r,o,u){const[l,g,_]=Eg(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Al(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function jh(n){return Yr(n,"documentOverlays")}class za{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ur(e.integerValue));else if("doubleValue"in e){const r=ur(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Eh(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Gu(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?eI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ht()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),it.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function rb(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Ig(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=rb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}za.Ie=new za;class Wa{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=Ig(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=Ig(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class rw{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Lv{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Yi{constructor(){this.$e=new Wa,this.Be=new rw(this.$e),this.Le=new Lv(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class sc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sc(this.indexId,this.documentKey,this.arrayValue,r)}}function oc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=iw(n.arrayValue,e.arrayValue),0!==t?t:(t=iw(n.directionalValue,e.directionalValue),0!==t?t:it.comparator(n.documentKey,e.documentKey)))}function iw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ib{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){It(e.collectionGroup===this.collectionId);const t=zp(e);if(void 0!==t&&!this.We(t))return!1;const r=ka(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const l=r[o];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++o}for(;o<r.length;++o)if(u>=this.Ke.length||!this.He(this.Ke[u++],r[o]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function sw(n){var e,t;if(It(n instanceof on||n instanceof Cn),n instanceof on){if(n instanceof dI){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>on.create(n.field,"==",u)))||[];return Cn.create(o,"or")}return n}const r=n.filters.map(o=>sw(o));return Cn.create(r,n.op)}function sb(n){if(0===n.getFilters().length)return[];const e=Uv(sw(n));return It(Vv(e)),wg(e)||ow(e)?[e]:e.getFilters()}function wg(n){return n instanceof on}function ow(n){return n instanceof Cn&&sv(n)}function Vv(n){return wg(n)||ow(n)||function(e){if(e instanceof Cn&&Th(e)){for(const t of e.getFilters())if(!wg(t)&&!ow(t))return!1;return!0}return!1}(n)}function Uv(n){if(It(n instanceof on||n instanceof Cn),n instanceof on)return n;if(1===n.filters.length)return Uv(n.filters[0]);const e=n.filters.map(r=>Uv(r));let t=Cn.create(e,n.op);return t=Nl(t),Vv(t)?t:(It(t instanceof Cn),It(qu(t)),It(t.filters.length>1),t.filters.reduce((r,o)=>Dg(r,o)))}function Dg(n,e){let t;return It(n instanceof on||n instanceof Cn),It(e instanceof on||e instanceof Cn),t=n instanceof on?e instanceof on?Cn.create([n,e],"and"):ob(n,e):e instanceof on?ob(e,n):function(r,o){if(It(r.filters.length>0&&o.filters.length>0),qu(r)&&qu(o))return ov(r,o.getFilters());const u=Th(r)?r:o,l=Th(r)?o:r,g=u.filters.map(_=>Dg(_,l));return Cn.create(g,"or")}(n,e),Nl(t)}function ob(n,e){if(qu(e))return ov(e,n.getFilters());{const t=e.filters.map(r=>Dg(n,r));return Cn.create(t,"or")}}function Nl(n){if(It(n instanceof on||n instanceof Cn),n instanceof on)return n;const e=n.getFilters();if(1===e.length)return Nl(e[0]);if(uI(n))return n;const t=e.map(o=>Nl(o)),r=[];return t.forEach(o=>{o instanceof on?r.push(o):o instanceof Cn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:Cn.create(r,n.op)}class aw{constructor(){this.Je=new Cg}addToCollectionParentIndex(e,t){return this.Je.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ki.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class Cg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Nn(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Nn(sn.comparator)).toArray()}}const Hh=new Uint8Array(0);class uw{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Cg,this.Xe=new zo(r=>Yu(r),(r,o)=>tg(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:ki(o)};return Bv(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ev(t),""],!1,!0);return Bv(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(qo(l.parent))}return r})}addFieldIndex(e,t){const r=ac(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Ol(e);return u.next(g=>{l.put(kv(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ac(e),o=Ol(e),u=qa(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=qa(e);let o=!0;const u=new Map;return ue.forEach(this.Ze(t),l=>this.tn(e,l).next(g=>{o&&(o=!!g),u.set(l,g)})).next(()=>{if(o){let l=Yt();const g=[];return ue.forEach(u,(_,D)=>{var b;ze("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Qt=>`${Qt.fieldPath}:${Qt.kind}`).join(",")}`} to execute ${Yu(t)}`);const R=function(Qt,Jt){const Zt=zp(Jt);if(void 0===Zt)return null;for(const an of rg(Qt,Zt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(D,_),z=function(Qt,Jt){const Zt=new Map;for(const an of ka(Jt))for(const ai of rg(Qt,an.fieldPath))switch(ai.op){case"==":case"in":Zt.set(an.fieldPath.canonicalString(),ai.value);break;case"not-in":case"!=":return Zt.set(an.fieldPath.canonicalString(),ai.value),Array.from(Zt.values())}return null}(D,_),X=function(Qt,Jt){const Zt=[];let an=!0;for(const ai of ka(Jt)){const E_=0===ai.kind?pI(Qt,ai.fieldPath,Qt.startAt):gI(Qt,ai.fieldPath,Qt.startAt);Zt.push(E_.value),an&&(an=E_.inclusive)}return new jo(Zt,an)}(D,_),ae=function(Qt,Jt){const Zt=[];let an=!0;for(const ai of ka(Jt)){const E_=0===ai.kind?gI(Qt,ai.fieldPath,Qt.endAt):pI(Qt,ai.fieldPath,Qt.endAt);Zt.push(E_.value),an&&(an=E_.inclusive)}return new jo(Zt,an)}(D,_),Fe=this.en(_,D,X),We=this.en(_,D,ae),qt=this.nn(_,D,z),Gt=this.sn(_.indexId,R,Fe,X.inclusive,We,ae.inclusive,qt);return ue.forEach(Gt,Qt=>r.J(Qt,t.limit).next(Jt=>{Jt.forEach(Zt=>{const an=it.fromSegments(Zt.documentKey);l.has(an)||(l=l.add(an),g.push(an))})}))}).next(()=>g)}return ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:sb(Cn.create(e.filters,"and")).map(r=>hv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),b=[];for(let R=0;R<_;++R){const z=t?this.rn(t[R/D]):Hh,X=this.on(e,z,r[R%D],o),ae=this.un(e,z,u[R%D],l),Fe=g.map(We=>this.on(e,z,We,!0));b.push(...this.createRange(X,ae,Fe))}return b}on(e,t,r,o){const u=new sc(e,it.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new sc(e,it.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new ib(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const g of u)r.je(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const o=this.Ze(t);return ue.forEach(o,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Nn(vr.comparator),D=!1;for(const b of g.filters)for(const R of b.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?D=!0:_=_.add(R.field));for(const b of g.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new Yi;for(const o of ka(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);za.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new Yi;return za.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Yi;return za.Ie.ue(Wu(this.databaseId,t),r.qe(function(o){const u=ka(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new Yi);let u=0;for(const l of ka(e)){const g=r[u++];for(const _ of o)if(this.hn(t,l.fieldPath)&&Ch(g))o=this.ln(o,l,g);else{const D=_.qe(l.kind);za.Ie.ue(g,D)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of o){const _=new Yi;_.seed(g.Fe()),za.Ie.ue(l,_.qe(t.kind)),u.push(_)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof on&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ac(e),o=Ol(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ue.forEach(u,g=>o.get([g.indexId,this.uid]).next(_=>{l.push(function(D,b){const R=b?new $o(b.sequenceNumber,new Ki(Rl(b.readTime),new it(qo(b.documentKey)),b.largestBatchId)):$o.empty(),z=D.fields.map(([X,ae])=>new Wp(vr.fromServerFormat(X),ae));return new ju(D.indexId,D.collectionGroup,z,R)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ht(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=ac(e),u=Ol(e);return this.dn(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ue.forEach(g,_=>u.put(kv(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ue.forEach(g,_=>this._n(e,o,_).next(D=>{const b=this.wn(u,_);return D.isEqual(b)?ue.resolve():this.mn(e,u,_,D,b)}))))})}gn(e,t,r,o){return qa(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return qa(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=qa(e);let u=new Nn(oc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,g)=>{u=u.add(new sc(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}wn(e,t){let r=new Nn(oc);const o=this.cn(t,e);if(null==o)return r;const u=zp(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ch(l))for(const g of l.arrayValue.values||[])r=r.add(new sc(t.indexId,e.key,this.rn(g),o))}else r=r.add(new sc(t.indexId,e.key,Hh,o));return r}mn(e,t,r,o,u){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,D,b,R){const z=g.getIterator(),X=_.getIterator();let ae=wl(z),Fe=wl(X);for(;ae||Fe;){let We=!1,qt=!1;if(ae&&Fe){const Gt=D(ae,Fe);Gt<0?qt=!0:Gt>0&&(We=!0)}else null!=ae?qt=!0:We=!0;We?(b(Fe),Fe=wl(X)):qt?(R(ae),ae=wl(z)):(ae=wl(z),Fe=wl(X))}}(o,u,oc,g=>{l.push(this.gn(e,t,r,g))},g=>{l.push(this.yn(e,t,r,g))}),ue.waitFor(l)}dn(e){let t=1;return Ol(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>oc(l,g)).filter((l,g,_)=>!g||0!==oc(l,_[g-1]));const o=[];o.push(e);for(const l of r){const g=oc(l,e),_=oc(l,t);if(0===g)o[0]=e.Ue();else if(g>0&&_<0)o.push(l),o.push(l.Ue());else if(_>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.pn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Hh,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Hh,[]]))}return u}pn(e,t){return oc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cw)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||ht())).next(cw)}}function Bv(n){return Yr(n,"collectionParents")}function qa(n){return Yr(n,"indexEntries")}function ac(n){return Yr(n,"indexConfiguration")}function Ol(n){return Yr(n,"indexState")}function cw(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;qp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ki(e.readTime,e.documentKey,t)}const lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qi(e,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ab(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:l},(b,R,z)=>(g++,z.delete()));u.push(_.next(()=>{It(1===g)}));const D=[];for(const b of t.mutations){const R=Uh(e,b.key.path,t.batchId);u.push(o.delete(R)),D.push(b.key)}return ue.waitFor(u).next(()=>D)}function $v(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(41943040,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);class Gh{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Gh(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ka(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Pl(e),l=Ka(e);return l.add({}).next(g=>{It("number"==typeof g);const _=new XI(g,t,r,o),D=function(z,X,ae){const Fe=ae.baseMutations.map(qt=>Al(z.ie,qt)),We=ae.mutations.map(qt=>Al(z.ie,qt));return{userId:X,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Fe,mutations:We}}(this.yt,this.userId,_),b=[];let R=new Nn((z,X)=>Ht(z.canonicalString(),X.canonicalString()));for(const z of o){const X=Uh(this.userId,z.key.path,g);R=R.add(z.key.path.popLast()),b.push(l.put(D)),b.push(u.put(X,dA))}return R.forEach(z=>{b.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),ue.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Ka(e).get(t).next(r=>r?(It(r.userId===this.userId),Qr(this.yt,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ka(e).Z({index:"userMutationsIndex",range:o},(l,g,_)=>{g.userId===this.userId&&(It(g.batchId>=r),u=Qr(this.yt,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ka(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ka(e).W("userMutationsIndex",t).next(r=>r.map(o=>Qr(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Mv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Pl(e).Z({range:o},(l,g,_)=>{const[D,b,R]=l,z=qo(b);if(D===this.userId&&t.path.isEqual(z))return Ka(e).get(R).next(X=>{if(!X)throw ht();It(X.userId===this.userId),u.push(Qr(this.yt,X))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Ht);const o=[];return t.forEach(u=>{const l=Mv(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Pl(e).Z({range:g},(D,b,R)=>{const[z,X,ae]=D,Fe=qo(X);z===this.userId&&u.path.isEqual(Fe)?r=r.add(ae):R.done()});o.push(_)}),ue.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Mv(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Nn(Ht);return Pl(e).Z({range:l},(_,D,b)=>{const[R,z,X]=_,ae=qo(z);R===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(g=g.add(X)):b.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ka(e).get(u).next(l=>{if(null===l)throw ht();It(l.userId===this.userId),r.push(Qr(this.yt,l))}))}),ue.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return ab(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Pl(e).Z({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=qo(u[1]);o.push(_)}else g.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return dw(e,this.userId,t)}Rn(e){return ub(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dw(n,e,t){const r=Mv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Pl(n).Z({range:u,X:!0},(g,_,D)=>{const[b,R,z]=g;b===e&&R===o&&(l=!0),D.done()}).next(()=>l)}function Ka(n){return Yr(n,"mutations")}function Pl(n){return Yr(n,"documentMutations")}function ub(n){return Yr(n,"mutationQueues")}class kl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kl(0)}static vn(){return new kl(-1)}}class mA{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return zh(e).Z((l,g)=>{const _=Bh(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(u)).next(()=>o)}forEachTarget(e,t){return zh(e).Z((r,o)=>{const u=Bh(o);t(u)})}Vn(e){return cb(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}Sn(e,t){return cb(e).put("targetGlobalKey",t)}Dn(e,t){return zh(e).put(_g(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return zh(e).Z({range:o,index:"queryTargetsIndex"},(l,g,_)=>{const D=Bh(g);tg(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Za(e);return t.forEach(l=>{const g=ki(l.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(o)}removeMatchingKeys(e,t,r){const o=Za(e);return ue.forEach(t,u=>{const l=ki(u.path);return ue.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Za(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Za(e);let u=Yt();return o.Z({range:r,X:!0},(l,g,_)=>{const D=qo(l[1]),b=new it(D);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=ki(t.path),o=IDBKeyRange.bound([r],[ev(r)],!1,!0);let u=0;return Za(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,g],_,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}ne(e,t){return zh(e).get(t).next(r=>r?Bh(r):null)}}function zh(n){return Yr(n,"targets")}function cb(n){return Yr(n,"targetGlobal")}function Za(n){return Yr(n,"targetDocuments")}function Wh([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class lb{constructor(e){this.xn=e,this.buffer=new Nn(Wh),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Wh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class db{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Hu(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Fa(r)}yield t.Fn(3e5)}))}}class hw{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Zi.at);const r=new lb(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(lw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lw):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,l,g,_,D;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,g=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(D=Date.now(),Bo()<=Sr.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${o} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${R} documents in `+(D-_)+`ms\nTotal Duration: ${D-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class uc{constructor(e,t){this.db=e,this.garbageCollector=new hw(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return qh(e,r)}removeReference(e,t,r){return qh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qh(e,t)}Gn(e,t){return function(r,o){let u=!1;return ub(r).tt(l=>dw(r,l,o).next(g=>(g&&(u=!0),ue.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,g)=>{if(g<=t){const _=this.Gn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Mt.min()),Za(e).delete([0,ki(l.path)])))});o.push(_)}}).next(()=>ue.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qh(e,t)}Kn(e,t){const r=Za(e);let o,u=Zi.at;return r.Z({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:D})=>{0===l?(u!==Zi.at&&t(new it(qo(o)),u),u=D,o=_):u=Zi.at}).next(()=>{u!==Zi.at&&t(new it(qo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qh(n,e){return Za(n).put((r=n.currentSequenceNumber,{targetId:0,path:ki(e.path),sequenceNumber:r}));var r}class bg{constructor(){this.changes=new zo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jv{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oo(e).put(r)}removeEntry(e,t,r){return oo(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],xl(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return oo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Sg(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return oo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Sg(t))},(o,u)=>{r={document:this.jn(t,u),size:$v(u)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=Pi(),o=new cr(it.comparator);return this.zn(e,t,(u,l)=>{const g=this.jn(u,l);r=r.insert(u,g),o=o.insert(u,$v(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let o=new Nn(fb);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(Sg(o.first()),Sg(o.last())),l=o.getIterator();let g=l.getNext();return oo(e).Z({index:"documentKeyIndex",range:u},(_,D,b)=>{const R=it.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&fb(g,R)<0;)r(g,null),g=l.getNext();g&&g.isEqual(R)&&(r(g,D),g=l.hasNext()?l.getNext():null),g?b.j(Sg(g)):b.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),xl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).W(IDBKeyRange.bound(l,g,!0)).next(_=>{let D=Pi();for(const b of _){const R=this.jn(it.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);R.isFoundDocument()&&(bl(t,R)||o.has(R.key))&&(D=D.insert(R.key,R))}return D})}getAllFromCollectionGroup(e,t,r,o){let u=Pi();const l=hb(t,r),g=hb(t,Ki.max());return oo(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,D,b)=>{const R=this.jn(it.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(R.key,R),u.size===o&&b.done()}).next(()=>u)}newChangeBuffer(e){return new Hv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Tg(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Qn(e,t){return Tg(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Vs(n,e){let t;if(e.document)t=Tv(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=it.fromSegments(e.noDocument.path),o=Rl(e.noDocument.readTime);t=tr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=it.fromSegments(e.unknownDocument.path),o=Rl(e.unknownDocument.version);t=tr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new er(r[0],r[1]);return Mt.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return tr.newInvalidDocument(e)}}function fw(n){return new jv(n)}class Hv extends bg{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new zo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Nn((u,l)=>Ht(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=ew(this.Yn.yt,l);o=o.add(u.path.popLast());const D=$v(_);r+=D-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=ew(this.Yn.yt,l.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Tg(n){return Yr(n,"remoteDocumentGlobal")}function oo(n){return Yr(n,"remoteDocumentsV14")}function Sg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hb(n,e){const t=e.documentKey.path.toArray();return[n,xl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fb(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ht(t[u],r[u]),o)return o;return o=Ht(t.length,r.length),o||(o=Ht(t[t.length-2],r[r.length-2]),o||Ht(t[t.length-1],r[r.length-1]))}class yA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gv{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Xu(r.mutation,o,Oi.empty(),er.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const o=Ai();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Ph();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ai();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,o){let u=Pi();const l=kh(),g=kh();return t.forEach((_,D)=>{const b=r.get(D.key);o.has(D.key)&&(void 0===b||b.mutation instanceof Go)?u=u.insert(D.key,D):void 0!==b?(l.set(D.key,b.mutation.getFieldMask()),Xu(b.mutation,D,b.mutation.getFieldMask(),er.now())):l.set(D.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,b)=>l.set(D,b)),t.forEach((D,b)=>{var R;return g.set(D,new yA(b,null!==(R=l.get(D))&&void 0!==R?R:null))}),g))}recalculateAndSaveOverlays(e,t){const r=kh();let o=new cr((l,g)=>l-g),u=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let b=r.get(_)||Oi.empty();b=g.applyToLocalView(D,b),r.set(_,b);const R=(o.get(g.batchId)||Yt()).add(_);o=o.insert(g.batchId,R)})}).next(()=>{const l=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,b=_.value,R=NI();b.forEach(z=>{if(!u.has(z)){const X=mv(t.get(z),r.get(z));null!==X&&R.set(z,X),u=u.add(z)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,R))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return it.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):pv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ue.resolve(Ai());let g=-1,_=u;return l.next(D=>ue.forEach(D,(b,R)=>(g<R.largestBatchId&&(g=R.largestBatchId),u.get(b)?ue.resolve():this.remoteDocumentCache.getEntry(e,b).next(z=>{_=_.insert(b,z)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,Yt())).next(b=>({batchId:g,changes:_i(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(r=>{let o=Ph();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Ph();return this.indexManager.getCollectionParents(e,o).next(l=>ue.forEach(l,g=>{const _=(D=t,b=g.child(o),new Ho(b,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((b,R)=>{u=u.insert(b,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,tr.newInvalidDocument(D)))});let l=Ph();return u.forEach((g,_)=>{const D=o.get(g);void 0!==D&&Xu(D.mutation,_,Oi.empty(),er.now()),bl(t,_)&&(l=l.insert(g,_))}),l})}}class pb{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Gn(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Ov(r.bundledQuery),readTime:Gn(r.readTime)}),ue.resolve();var r}}class gb{constructor(){this.overlays=new cr(it.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ai();return ue.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const o=Ai(),u=t.length+1,l=new it(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new cr((D,b)=>D-b);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let b=u.get(D.largestBatchId);null===b&&(b=Ai(),u=u.insert(D.largestBatchId,b)),b.set(D.getKey(),D)}}const g=Ai(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,b)=>g.set(D,b)),!(g.size()>=o)););return ue.resolve(g)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new vg(t,r));let u=this.es.get(t);void 0===u&&(u=Yt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class zv{constructor(){this.ns=new Nn(Jr.ss),this.rs=new Nn(Jr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Jr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Jr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new it(new sn([])),r=new Jr(t,e),o=new Jr(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new it(new sn([])),r=new Jr(t,e),o=new Jr(t,e+1);let u=Yt();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Jr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Jr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return it.comparator(e.key,t.key)||Ht(e._s,t._s)}static os(e,t){return Ht(e._s,t._s)||it.comparator(e.key,t.key)}}class pw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Nn(Jr.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new XI(u,t,r,o);this.mutationQueue.push(l);for(const g of o)this.gs=this.gs.add(new Jr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jr(t,0),o=new Jr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const g=this.ys(l._s);u.push(g)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Ht);return t.forEach(o=>{const u=new Jr(o,0),l=new Jr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],g=>{r=r.add(g._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;it.isDocumentKey(u)||(u=u.child(""));const l=new Jr(new it(u),0);let g=new Nn(Ht);return this.gs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(g=g.add(_._s)),!0)},l),ue.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,o=>{const u=new Jr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Jr(t,0),o=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gw{constructor(e){this.Es=e,this.docs=new cr(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():tr.newInvalidDocument(o))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Pi();const l=t.path,g=new it(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:b}}=_.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||qp(HE(b),r)<=0||(o.has(b.key)||bl(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,t,r,o){ht()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mw(this)}getSize(e){return ue.resolve(this.size)}}class mw extends bg{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class mb{constructor(e){this.persistence=e,this.Rs=new zo(t=>Yu(t),tg),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new zv,this.targetCount=0,this.vs=kl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ue.waitFor(u).next(()=>o)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class yw{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Zi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new mb(this),this.indexManager=new aw,this.remoteDocumentCache=new gw(r=>this.referenceDelegate.xs(r)),this.yt=new nb(t),this.Ns=new pb(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new pw(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const o=new vw(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class vw extends nv{constructor(e){super(),this.currentSequenceNumber=e}}class Fl{constructor(e){this.persistence=e,this.Fs=new zv,this.$s=null}static Bs(e){return new Fl(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const o=it.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class vA{constructor(e){this.yt=e}$(e,t,r,o){const u=new Zp("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZC,{unique:!0}),g.createObjectStore("documentMutations"),Wv(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Wv(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").W().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZC,{unique:!0});const b=_.store("mutations"),R=D.map(z=>b.put(z));return ue.waitFor(R)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Us(u))),r<6&&o>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:QC});_.createIndex("collectionPathOverlayIndex",JC,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",yg,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:qI});_.createIndex("documentKeyIndex",mg),_.createIndex("collectionGroupIndex",KI)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:YC}).createIndex("sequenceNumberIndex",QI,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:fA}).createIndex("documentKeyIndex",pA,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=$v(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ue.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(g=>ue.forEach(g,_=>{It(_.userId===u.userId);const D=Qr(this.yt,_);return ab(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,g)=>{const _=new sn(l),D=[0,ki(_)];u.push(t.get(D).next(b=>b?ue.resolve():t.put({targetId:0,path:ki(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:YI});const r=t.store("collectionParents"),o=new Cg,u=l=>{if(o.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:ki(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,g)=>{const _=new sn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,g,_],D)=>{const b=qo(g);return u(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Bh(o),l=_g(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(D=l,D.document?new it(sn.fromString(D.document.name).popFirst(5)):D.noDocument?it.fromSegments(D.noDocument.path):D.unknownDocument?it.fromSegments(D.unknownDocument.path):ht()).path.toArray();var D;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(g.put(b))}).next(()=>ue.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=fw(this.yt),u=new yw(Fl.Bs,this.yt.ie);return r.W().next(l=>{const g=new Map;return l.forEach(_=>{var D;let b=null!==(D=g.get(_.userId))&&void 0!==D?D:Yt();Qr(this.yt,_).keys().forEach(R=>b=b.add(R)),g.set(_.userId,b)}),ue.forEach(g,(_,D)=>{const b=new Ur(D),R=$h.re(this.yt,b),z=u.getIndexManager(b),X=Gh.re(b,this.yt,z,u.referenceDelegate);return new Gv(o,X,R,z).recalculateAndSaveOverlaysForDocumentKeys(new Rv(t,Zi.at),_).next()})})}}function Wv(n){n.createObjectStore("targetDocuments",{keyPath:hA}).createIndex("documentTargetsIndex",xv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZI,{unique:!0}),n.createObjectStore("targetGlobal")}const Kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qv{constructor(e,t,r,o,u,l,g,_,D,b,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=g,this.Js=D,this.Ys=b,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=z=>Promise.resolve(),!qv.C())throw new ke(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uc(this,o),this.ii=t+"main",this.yt=new nb(_),this.ri=new ro(this.ii,this.Xs,new vA(this.yt)),this.Cs=new mA(this.referenceDelegate,this.yt),this.remoteDocumentCache=fw(this.yt),this.Ns=new tw,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(Y.FAILED_PRECONDITION,Kh);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Zi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Hu(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zh(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return Kv(e).delete(this.clientId)}yi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Yr(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return ue.forEach(g,_=>o.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Zh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ke(Y.FAILED_PRECONDITION,Kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kv(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Rv(t,Zi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Kv(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Gh.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new uw(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return $h.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?tb:14===l?eb:13===l?XC:12===l?gA:11===l?JI:void ht();var l;let g;return this.ri.runTransaction(e,o,u,_=>(g=new Rv(_,this.Ss?this.Ss.next():Zi.at),"readwrite-primary"===t?this.fi(g).next(D=>!!D||this.di(g)).next(D=>{if(!D)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ke(Y.FAILED_PRECONDITION,tv);return r(g)}).next(D=>this.wi(g).next(()=>D)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return Zh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(Y.FAILED_PRECONDITION,Kh)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zh(e).put("owner",t)}static C(){return ro.C()}_i(e){const t=Zh(e);return t.get("owner").next(r=>this.mi(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,wn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zh(n){return Yr(n,"owner")}function Kv(n){return Yr(n,"clientMetadata")}function _w(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Zv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Yt(),o=Yt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zv(e,t.fromCache,r,o)}}class Ew{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(yI(t))return ue.resolve(null);let r=jr(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Mh(t,null,"F"),r=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Yt(...u);return this.Ni.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.Fi(t,g);return this.$i(t,D,l,_.readTime)?this.ki(e,Mh(t,null,"F")):this.Bi(e,D,t,_)}))})))}Oi(e,t,r,o){return yI(t)||o.isEqual(Mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(Bo()<=Sr.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),og(t)),this.Bi(e,l,t,jE(o,-1)))})}Fi(e,t){let r=new Nn(VC(e));return t.forEach((o,u)=>{bl(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Bo()<=Sr.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",og(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ki.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class yb{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new cr(Ht),this.Ui=new zo(u=>Yu(u),tg),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function vb(n,e,t,r){return new yb(n,e,t,r)}function _b(n,e){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,Ie.Z)(function*(n,e){const t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=Yt();for(const D of o){l.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}for(const D of u){g.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(D=>({ji:D,removedBatchIds:l,addedBatchIds:g}))})})}),Iw.apply(this,arguments)}function Eb(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function wb(n,e,t){let r=Yt(),o=Yt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Pi();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(Mt.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):ze("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{Wi:l,zi:o}})}function EA(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yh(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ue.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new Ko(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Qh(n,e,t){return ww.apply(this,arguments)}function ww(){return ww=(0,Ie.Z)(function*(n,e,t){const r=at(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Hu(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),ww.apply(this,arguments)}function Yv(n,e,t){const r=at(n);let o=Mt.min(),u=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,D){const b=at(g),R=b.Ui.get(D);return void 0!==R?ue.resolve(b.qi.get(R)):b.Cs.getTargetData(_,D)}(r,l,jr(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:Mt.min(),t?u:Yt())).next(g=>(a(r,vI(e),g),{documents:g,Hi:u})))}function i(n,e){const t=at(n),r=at(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function s(n,e){const t=at(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,jE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(a(t,e,o),o))}function a(n,e,t){let r=n.Ki.get(e)||Mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function d(){return d=(0,Ie.Z)(function*(n,e,t,r){const o=at(n);let u=Yt(),l=Pi();for(const D of t){const b=e.Ji(D.metadata.name);D.document&&(u=u.add(b));const R=e.Yi(D);R.setReadTime(e.Xi(D.metadata.readTime)),l=l.insert(b,R)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Yh(o,(D=r,jr(Dl(sn.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>wb(D,g,l).next(b=>(g.apply(D),b)).next(b=>o.Cs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>o.Cs.addMatchingKeys(D,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,b.Wi,b.zi)).next(()=>b.Wi)))}),d.apply(this,arguments)}function h(n,e){return y.apply(this,arguments)}function y(){return y=(0,Ie.Z)(function*(n,e,t=Yt()){const r=yield Yh(n,jr(Ov(e.bundledQuery))),o=at(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Gn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken($r.EMPTY_BYTE_STRING,l);return o.qi=o.qi.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),y.apply(this,arguments)}function E(n,e){return`firestore_clients_${n}_${e}`}function w(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function C(n,e){return`firestore_targets_${n}_${e}`}class A{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new ke(o.error.code,o.error.message))),l?new A(e,t,o.state,u):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class V{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new ke(r.error.code,r.error.message))),u?new V(e,r.state,o):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class q{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ga();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=ZE(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new q(e,u):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class te{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new te(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ee{constructor(){this.activeTargetIds=Ga()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qe{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new cr(Ht),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=E(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Ee),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(E(e.persistenceKey,o));if(u){const l=q.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(C(this.persistenceKey,e));if(r){const o=V.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(C(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=Zi.at;if(null!=u)try{const g=JSON.parse(u);It("number"==typeof g),l=g}catch(g){Hn("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);o!==Zi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new A(this.currentUser,e,t,r),u=w(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=w(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=C(this.persistenceKey,e),u=new V(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return q.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return A.Zi(new Ur(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return V.Zi(o,t)}yr(e){return te.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],g=[];return u.forEach(_=>{o.has(_)||l.push(_)}),o.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(l,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Ga();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ot{constructor(){this.Lr=new Ee,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ee,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mt{Ur(e){}shutdown(){}}class Nt{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wt{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class nr extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);ze("RestConnection","Sending: ",l,r);const g={};return this.lo(g,o,u),this.fo(e,l,g,r).then(_=>(ze("RestConnection","Received: ",_),_),_=>{throw yl("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${Ue[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const g=new LE;g.setWithCredentials(!0),g.listenOnce(PE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case jp.NO_ERROR:const D=g.getResponseJson();ze("Connection","XHR received:",JSON.stringify(D)),u(D);break;case jp.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),l(new ke(Y.DEADLINE_EXCEEDED,"Request time out"));break;case jp.HTTP_ERROR:const b=g.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',b,"response text:",g.getResponseText()),b>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const z=R?.error;if(z&&z.status&&z.message){const X=function(ae){const Fe=ae.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Fe)>=0?Fe:Y.UNKNOWN}(z.status);l(new ke(X,z.message))}else l(new ke(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else l(new ke(Y.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);g.send(t,"POST",_,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=SC(),l=AC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new FE({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=o.join("");ze("Connection","Creating WebChannel: "+_,g);const D=u.createWebChannel(_,g);let b=!1,R=!1;const z=new Wt({Hr:ae=>{R?ze("Connection","Not sending because WebChannel is closed:",ae):(b||(ze("Connection","Opening WebChannel transport."),D.open(),b=!0),ze("Connection","WebChannel sending:",ae),D.send(ae))},Jr:()=>D.close()}),X=(ae,Fe,We)=>{ae.listen(Fe,qt=>{try{We(qt)}catch(Gt){setTimeout(()=>{throw Gt},0)}})};return X(D,gh.EventType.OPEN,()=>{R||ze("Connection","WebChannel transport opened.")}),X(D,gh.EventType.CLOSE,()=>{R||(R=!0,ze("Connection","WebChannel transport closed"),z.io())}),X(D,gh.EventType.ERROR,ae=>{R||(R=!0,yl("Connection","WebChannel transport errored:",ae),z.io(new ke(Y.UNAVAILABLE,"The operation could not be completed")))}),X(D,gh.EventType.MESSAGE,ae=>{var Fe;if(!R){const We=ae.data[0];It(!!We);const Gt=We.error||(null===(Fe=We[0])||void 0===Fe?void 0:Fe.error);if(Gt){ze("Connection","WebChannel received error:",Gt);const Qt=Gt.status;let Jt=function(an){const ai=xr[an];if(void 0!==ai)return xI(ai)}(Qt),Zt=Gt.message;void 0===Jt&&(Jt=Y.INTERNAL,Zt="Unknown error status: "+Qt+" with message "+Gt.message),R=!0,z.io(new ke(Jt,Zt)),D.close()}else ze("Connection","WebChannel received:",We),z.ro(We)}}),X(l,kE.STAT_EVENT,ae=>{ae.stat===Qy.PROXY?ze("Connection","Detected buffering proxy"):ae.stat===Qy.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.so()},0),z}}function _r(){return typeof window<"u"?window:null}function Qv(){return typeof document<"u"?document:null}function Jv(n){return new uA(n,!0)}class Db{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&ze("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class IA{constructor(e,t,r,o,u,l,g,_){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Db(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ie.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Y.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new ke(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LR extends IA{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function GC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ht(),o=e.targetChange.targetIds||[],u=function(_,D){return _.wt?(It(void 0===D||"string"==typeof D),$r.fromBase64String(D||"")):(It(void 0===D||D instanceof Uint8Array),$r.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const D=void 0===_.code?Y.UNKNOWN:xI(_.code);return new ke(D,_.message||"")}(l);t=new PI(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Wo(n,r.document.name),u=Gn(r.document.updateTime),l=r.document.createTime?Gn(r.document.createTime):Mt.min(),g=new oi({mapValue:{fields:r.document.fields}}),_=tr.newFoundDocument(o,u,l,g);t=new dg(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=Wo(n,r.document),u=r.readTime?Gn(r.readTime):Mt.min(),l=tr.newNoDocument(o,u);t=new dg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Wo(n,r.document);t=new dg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ht();{const r=e.filter,u=new MI(r.count||0);t=new Ev(r.targetId,u)}}var _;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return Mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?Gn(u.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Lh(this.yt),t.addTarget=function(o,u){let l;const g=u.target;return l=ng(g)?{documents:jI(o,g)}:{query:gg(o,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=LI(o,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(l.readTime=nc(o,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function GI(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Lh(this.yt),t.removeTarget=e,this.Bo(t)}}class VR extends IA{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function zC(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=Gn(r.updateTime?r.updateTime:o);return u.isEqual(Mt.min())&&(u=Gn(o)),new $C(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.Zo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Lh(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Al(this.yt,r))};this.Bo(t)}}class UR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new ke(Y.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(Y.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(Y.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class $R{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hn(t),this.ou=!1):ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class jR{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(g=>{r.enqueueAndForget((0,Ie.Z)(function*(){var _;cc(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ie.Z)(function*(D){const b=at(D);b._u.add(4),yield Ag(b),b.gu.set("Unknown"),b._u.delete(4),yield Xv(b)}),function(D){return _.apply(this,arguments)})(l))}))}),this.gu=new $R(r,o)}}function Xv(n){return bb.apply(this,arguments)}function bb(){return bb=(0,Ie.Z)(function*(n){if(cc(n))for(const e of n.wu)yield e(!0)}),bb.apply(this,arguments)}function Ag(n){return Tb.apply(this,arguments)}function Tb(){return Tb=(0,Ie.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Tb.apply(this,arguments)}function Dw(n,e){const t=at(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Mb(t)?Ab(t):xg(t).ko()&&Sb(t,e))}function e_(n,e){const t=at(n),r=xg(t);t.du.delete(e),r.ko()&&wA(t,e),0===t.du.size&&(r.ko()?r.Fo():cc(t)&&t.gu.set("Unknown"))}function Sb(n,e){n.yu.Ot(e.targetId),xg(n).zo(e)}function wA(n,e){n.yu.Ot(e),xg(n).Ho(e)}function Ab(n){n.yu=new jC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),xg(n).start(),n.gu.uu()}function Mb(n){return cc(n)&&!xg(n).No()&&n.du.size>0}function cc(n){return 0===at(n)._u.size}function DA(n){n.yu=void 0}function HR(n){return xb.apply(this,arguments)}function xb(){return xb=(0,Ie.Z)(function*(n){n.du.forEach((e,t)=>{Sb(n,e)})}),xb.apply(this,arguments)}function GR(n,e){return Rb.apply(this,arguments)}function Rb(){return Rb=(0,Ie.Z)(function*(n,e){DA(n),Mb(n)?(n.gu.hu(e),Ab(n)):n.gu.set("Unknown")}),Rb.apply(this,arguments)}function zR(n,e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,Ie.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof PI&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const l=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,l),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cw(n,r)}else if(e instanceof dg?n.yu.Kt(e):e instanceof Ev?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Mt.min()))try{const r=yield Eb(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.Zt(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=o.du.get(_);D&&o.du.set(_,D.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach(g=>{const _=o.du.get(g);if(!_)return;o.du.set(g,_.withResumeToken($r.EMPTY_BYTE_STRING,_.snapshotVersion)),wA(o,g);const D=new Ko(_.target,g,1,_.sequenceNumber);Sb(o,D)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield Cw(n,r)}var r}),Nb.apply(this,arguments)}function Cw(n,e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,Ie.Z)(function*(n,e,t){if(!Hu(e))throw e;n._u.add(1),yield Ag(n),n.gu.set("Offline"),t||(t=()=>Eb(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Xv(n)}))}),Ob.apply(this,arguments)}function CA(n,e){return e().catch(t=>Cw(n,t,e))}function Mg(n){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,Ie.Z)(function*(n){const e=at(n),t=Ll(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;WR(e);)try{const o=yield EA(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,qR(e,o)}catch(o){yield Cw(e,o)}bA(e)&&TA(e)}),Pb.apply(this,arguments)}function WR(n){return cc(n)&&n.fu.length<10}function qR(n,e){n.fu.push(e);const t=Ll(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function bA(n){return cc(n)&&!Ll(n).No()&&n.fu.length>0}function TA(n){Ll(n).start()}function KR(n){return kb.apply(this,arguments)}function kb(){return kb=(0,Ie.Z)(function*(n){Ll(n).eu()}),kb.apply(this,arguments)}function ZR(n){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,Ie.Z)(function*(n){const e=Ll(n);for(const t of n.fu)e.Xo(t.mutations)}),Fb.apply(this,arguments)}function YR(n,e,t){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,Ie.Z)(function*(n,e,t){const r=n.fu.shift(),o=Nv.from(r,e,t);yield CA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Mg(n)}),Lb.apply(this,arguments)}function QR(n,e){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,Ie.Z)(function*(n,e){var t;e&&Ll(n).Yo&&(yield(t=(0,Ie.Z)(function*(r,o){if(vv(u=o.code)&&u!==Y.ABORTED){const l=r.fu.shift();Ll(r).Mo(),yield CA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Mg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),bA(n)&&TA(n)}),Vb.apply(this,arguments)}function SA(n,e){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,Ie.Z)(function*(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=cc(t);t._u.add(3),yield Ag(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Xv(t)}),Ub.apply(this,arguments)}function Bb(n,e){return $b.apply(this,arguments)}function $b(){return $b=(0,Ie.Z)(function*(n,e){const t=at(n);e?(t._u.delete(2),yield Xv(t)):e||(t._u.add(2),yield Ag(t),t.gu.set("Unknown"))}),$b.apply(this,arguments)}function xg(n){return n.pu||(n.pu=function(e,t,r){const o=at(e);return o.su(),new LR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:HR.bind(null,n),Zr:GR.bind(null,n),Wo:zR.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.pu.Mo(),Mb(n)?Ab(n):n.gu.set("Unknown")):(yield n.pu.stop(),DA(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ll(n){return n.Iu||(n.Iu=function(e,t,r){const o=at(e);return o.su(),new VR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:KR.bind(null,n),Zr:QR.bind(null,n),tu:ZR.bind(null,n),Zo:YR.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Mo(),yield Mg(n)):(yield n.Iu.stop(),n.fu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class jb{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,g=new jb(e,t,l,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),Hu(n))return new ke(Y.UNAVAILABLE,`${e}: ${n}`);throw n}class Ng{constructor(e){this.comparator=e?(t,r)=>e(t,r)||it.comparator(t.key,r.key):(t,r)=>it.comparator(t.key,r.key),this.keyedMap=Ph(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new Ng(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ng)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ng;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class AA{constructor(){this.Tu=new cr(it.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Og{constructor(e,t,r,o,u,l,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Og(e,t,Ng.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class JR{constructor(){this.Au=void 0,this.listeners=[]}}class XR{constructor(){this.queries=new zo(e=>gv(e),Cl),this.onlineState="Unknown",this.Ru=new Set}}function Hb(n,e){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,Ie.Z)(function*(n,e){const t=at(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new JR),o)try{u.Au=yield t.onListen(r)}catch(l){const g=Rg(l,`Initialization of query '${og(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&qb(t)}),Gb.apply(this,arguments)}function zb(n,e){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,Ie.Z)(function*(n,e){const t=at(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Wb.apply(this,arguments)}function eN(n,e){const t=at(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const g of l.listeners)g.Pu(o)&&(r=!0);l.Au=o}}r&&qb(t)}function tN(n,e,t){const r=at(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function qb(n){n.Ru.forEach(e=>{e.next()})}class Kb{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Og(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Og.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class nN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class MA{constructor(e){this.yt=e}Ji(e){return Wo(this.yt,e)}Yi(e){return e.metadata.exists?Tv(this.yt,e.document,!1):tr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Gn(e)}}class rN{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=sn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new MA(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const g=(t.get(l)||Yt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function c(n,e,t,r){return d.apply(this,arguments)}(e.localStore,new MA(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield h(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function xA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class RA{constructor(e){this.key=e}}class NA{constructor(e){this.key=e}}class OA{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=VC(e),this.Qu=new Ng(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new AA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,g=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,R)=>{const z=o.get(b),X=bl(this.query,R)?R:null,ae=!!z&&this.mutatedKeys.has(z.key),Fe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let We=!1;z&&X?z.data.isEqual(X.data)?ae!==Fe&&(r.track({type:3,doc:X}),We=!0):this.Hu(z,X)||(r.track({type:2,doc:X}),We=!0,(_&&this.Gu(X,_)>0||D&&this.Gu(X,D)<0)&&(g=!0)):!z&&X?(r.track({type:0,doc:X}),We=!0):z&&!X&&(r.track({type:1,doc:z}),We=!0,(_||D)&&(g=!0)),We&&(X?(l=l.add(X),u=Fe?u.add(b):u.delete(b)):(l=l.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{Qu:l,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,b)=>function(R,z){const X=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return X(R)-X(z)}(D.type,b.type)||this.Gu(D.doc,b.doc)),this.Ju(r);const l=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.Uu;return this.Uu=g,0!==u.length||_?{snapshot:new Og(this.query,e.Qu,o,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new AA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new NA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new RA(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Og.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class iN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sN{constructor(e){this.key=e,this.nc=!1}}class oN{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new zo(g=>gv(g),Cl),this.rc=new Map,this.oc=new Set,this.uc=new cr(it.comparator),this.cc=new Map,this.ac=new zv,this.hc={},this.lc=new Map,this.fc=kl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function aN(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,Ie.Z)(function*(n,e){const t=vT(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield Yh(t.localStore,jr(e));t.isPrimaryClient&&Dw(t.remoteStore,l);const g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Yb(t,e,r,"current"===g,l.resumeToken)}return o}),Zb.apply(this,arguments)}function Yb(n,e,t,r,o){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,Ie.Z)(function*(n,e,t,r,o){n._c=(R,z,X)=>{return(ae=(0,Ie.Z)(function*(Fe,We,qt,Gt){let Qt=We.view.Wu(qt);Qt.$i&&(Qt=yield Yv(Fe.localStore,We.query,!1).then(({documents:an})=>We.view.Wu(an,Qt)));const Jt=Gt&&Gt.targetChanges.get(We.targetId),Zt=We.view.applyChanges(Qt,Fe.isPrimaryClient,Jt);return aT(Fe,We.targetId,Zt.Xu),Zt.snapshot}),function(Fe,We,qt,Gt){return ae.apply(this,arguments)})(n,R,z,X);var ae};const u=yield Yv(n.localStore,e,!0),l=new OA(e,u.Hi),g=l.Wu(u.documents),_=tc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),D=l.applyChanges(g,n.isPrimaryClient,_);aT(n,t,D.Xu);const b=new iN(e,t,l);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),Qb.apply(this,arguments)}function uN(n,e){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,Ie.Z)(function*(n,e){const t=at(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!Cl(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),e_(t.remoteStore,r.targetId),Pg(t,r.targetId)}).catch(Fa))):(Pg(t,r.targetId),yield Qh(t.localStore,r.targetId,!0))}),Jb.apply(this,arguments)}function Xb(){return Xb=(0,Ie.Z)(function*(n,e,t){const r=_T(n);try{const o=yield function(u,l){const g=at(u),_=er.now(),D=l.reduce((z,X)=>z.add(X.key),Yt());let b,R;return g.persistence.runTransaction("Locally write mutations","readwrite",z=>{let X=Pi(),ae=Yt();return g.Gi.getEntries(z,D).next(Fe=>{X=Fe,X.forEach((We,qt)=>{qt.isValidDocument()||(ae=ae.add(We))})}).next(()=>g.localDocuments.getOverlayedDocuments(z,X)).next(Fe=>{b=Fe;const We=[];for(const qt of l){const Gt=bI(qt,b.get(qt.key).overlayedDocument);null!=Gt&&We.push(new Go(qt.key,Gt,dv(Gt.value.mapValue),Zn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,_,We,l)}).next(Fe=>{R=Fe;const We=Fe.applyToLocalDocumentSet(b,ae);return g.documentOverlayCache.saveOverlays(z,Fe.batchId,We)})}).then(()=>({batchId:R.batchId,changes:_i(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,g){let _=u.hc[u.currentUser.toKey()];_||(_=new cr(Ht)),_=_.insert(l,g),u.hc[u.currentUser.toKey()]=_}(r,o.batchId,t),yield lc(r,o.changes),yield Mg(r.remoteStore)}catch(o){const u=Rg(o,"Failed to persist write");t.reject(u)}}),Xb.apply(this,arguments)}function PA(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,Ie.Z)(function*(n,e){const t=at(n);try{const r=yield function Ib(n,e){const t=at(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const g=[];e.targetChanges.forEach((b,R)=>{const z=o.get(R);if(!z)return;g.push(t.Cs.removeMatchingKeys(u,b.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(u,b.addedDocuments,R)));let X=z.withSequenceNumber(u.currentSequenceNumber);var ae,Fe,We;e.targetMismatches.has(R)?X=X.withResumeToken($r.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(b.resumeToken,r)),o=o.insert(R,X),Fe=X,We=b,(0===(ae=z).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||We.addedDocuments.size+We.modifiedDocuments.size+We.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,X))});let _=Pi(),D=Yt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),g.push(wb(u,l,e.documentUpdates).next(b=>{_=b.Wi,D=b.zi})),!r.isEqual(Mt.min())){const b=t.Cs.getLastRemoteSnapshotVersion(u).next(R=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(b)}return ue.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.qi=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?It(l.nc):o.removedDocuments.size>0&&(It(l.nc),l.nc=!1))}),yield lc(t,r,e)}catch(r){yield Fa(r)}}),eT.apply(this,arguments)}function kA(n,e,t){const r=at(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const g=l.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,l){const g=at(u);g.onlineState=l;let _=!1;g.queries.forEach((D,b)=>{for(const R of b.listeners)R.bu(l)&&(_=!0)}),_&&qb(g)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lN(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,Ie.Z)(function*(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new cr(it.comparator);l=l.insert(u,tr.newNoDocument(u,Mt.min()));const g=Yt().add(u),_=new Fh(Mt.min(),new Map,new Nn(Ht),l,g);yield PA(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),uT(r)}else yield Qh(r.localStore,e,!1).then(()=>Pg(r,e,t)).catch(Fa)}),tT.apply(this,arguments)}function dN(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,Ie.Z)(function*(n,e){const t=at(n),r=e.batch.batchId;try{const o=yield function _A(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,D){const b=_.batch,R=b.keys();let z=ue.resolve();return R.forEach(X=>{z=z.next(()=>D.getEntry(g,X)).next(ae=>{const Fe=_.docVersions.get(X);It(null!==Fe),ae.version.compareTo(Fe)<0&&(b.applyToRemoteDocument(ae,_),ae.isValidDocument()&&(ae.setReadTime(_.commitVersion),D.addEntry(ae)))})}),z.next(()=>l.mutationQueue.removeMutationBatch(g,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=Yt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);oT(t,r,null),sT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lc(t,o)}catch(o){yield Fa(o)}}),nT.apply(this,arguments)}function hN(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,Ie.Z)(function*(n,e,t){const r=at(n);try{const o=yield function(u,l){const g=at(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,l).next(b=>(It(null!==b),D=b.keys(),g.mutationQueue.removeMutationBatch(_,b))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);oT(r,e,t),sT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lc(r,o)}catch(o){yield Fa(o)}}),rT.apply(this,arguments)}function iT(){return iT=(0,Ie.Z)(function*(n,e){const t=at(n);cc(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=at(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Rg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),iT.apply(this,arguments)}function sT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function oT(n,e,t){const r=at(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Pg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||FA(n,r)})}function FA(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(e_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),uT(n))}function aT(n,e,t){for(const r of t)r instanceof RA?(n.ac.addReference(r.key,e),pN(n,r)):r instanceof NA?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||FA(n,r.key)):ht()}function pN(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.oc.add(r),uT(n))}function uT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new it(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new sN(t)),n.uc=n.uc.insert(t,r),Dw(n.remoteStore,new Ko(jr(Dl(t.path)),r,2,Zi.at))}}function lc(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,Ie.Z)(function*(n,e,t){const r=at(n),o=[],u=[],l=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{l.push(r._c(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){o.push(D);const b=Zv.Ci(_.targetId,D);u.push(b)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(g=(0,Ie.Z)(function*(_,D){const b=at(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ue.forEach(D,z=>ue.forEach(z.Si,X=>b.persistence.referenceDelegate.addReference(R,z.targetId,X)).next(()=>ue.forEach(z.Di,X=>b.persistence.referenceDelegate.removeReference(R,z.targetId,X)))))}catch(R){if(!Hu(R))throw R;ze("LocalStore","Failed to update sequence numbers: "+R)}for(const R of D){const z=R.targetId;if(!R.fromCache){const X=b.qi.get(z),Fe=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);b.qi=b.qi.insert(z,Fe)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),cT.apply(this,arguments)}function gN(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,Ie.Z)(function*(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield _b(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(g=>{g.reject(new ke(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lc(t,r.ji)}var o}),lT.apply(this,arguments)}function mN(n,e){const t=at(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let o=Yt();const u=t.rc.get(e);if(!u)return o;for(const l of u){const g=t.ic.get(l);o=o.unionWith(g.view.ju)}return o}}function yN(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,Ie.Z)(function*(n,e){const t=at(n),r=yield Yv(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&aT(t,e.targetId,o.Xu),o}),dT.apply(this,arguments)}function vN(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,Ie.Z)(function*(n,e){const t=at(n);return s(t.localStore,e).then(r=>lc(t,r))}),hT.apply(this,arguments)}function _N(n,e,t,r){return fT.apply(this,arguments)}function fT(){return fT=(0,Ie.Z)(function*(n,e,t,r){const o=at(n),u=yield function(l,g){const _=at(l),D=at(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>D.Tn(b,g).next(R=>R?_.localDocuments.getDocuments(b,R):ue.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Mg(o.remoteStore):"acknowledged"===t||"rejected"===t?(oT(o,e,r||null),sT(o,e),g=e,at(at(o.localStore).mutationQueue).An(g)):ht(),yield lc(o,u)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),fT.apply(this,arguments)}function pT(){return pT=(0,Ie.Z)(function*(n,e){const t=at(n);if(vT(t),_T(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield LA(t,r.toArray());t.dc=!0,yield Bb(t.remoteStore,!0);for(const u of o)Dw(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Pg(t,l),Qh(t.localStore,l,!0))),e_(t.remoteStore,l)}),yield o,yield LA(t,r),function(u){const l=at(u);l.cc.forEach((g,_)=>{e_(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new cr(it.comparator)}(t),t.dc=!1,yield Bb(t.remoteStore,!1)}}),pT.apply(this,arguments)}function LA(n,e,t){return gT.apply(this,arguments)}function gT(){return gT=(0,Ie.Z)(function*(n,e,t){const r=at(n),o=[],u=[];for(const l of e){let g;const _=r.rc.get(l);if(_&&0!==_.length){g=yield Yh(r.localStore,jr(_[0]));for(const D of _){const b=r.ic.get(D),R=yield yN(r,b);R.snapshot&&u.push(R.snapshot)}}else{const D=yield i(r.localStore,l);g=yield Yh(r.localStore,D),yield Yb(r,VA(D),l,!1,g.resumeToken)}o.push(g)}return r.sc.Wo(u),o}),gT.apply(this,arguments)}function VA(n){return mI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function IN(n){const e=at(n);return at(at(e.localStore).persistence).vi()}function wN(n,e,t,r){return mT.apply(this,arguments)}function mT(){return mT=(0,Ie.Z)(function*(n,e,t,r){const o=at(n);if(o.dc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield s(o.localStore,vI(u[0])),g=Fh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$r.EMPTY_BYTE_STRING);yield lc(o,l,g);break}case"rejected":yield Qh(o.localStore,e,!0),Pg(o,e,r);break;default:ht()}}),mT.apply(this,arguments)}function DN(n,e,t){return yT.apply(this,arguments)}function yT(){return yT=(0,Ie.Z)(function*(n,e,t){const r=vT(n);if(r.dc){for(const o of e){if(r.rc.has(o)){ze("SyncEngine","Adding an already active target "+o);continue}const u=yield i(r.localStore,o),l=yield Yh(r.localStore,u);yield Yb(r,VA(u),l.targetId,!1,l.resumeToken),Dw(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield Qh(r.localStore,o,!1).then(()=>{e_(r.remoteStore,o),Pg(r,o)}).catch(Fa))}}),yT.apply(this,arguments)}function vT(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lN.bind(null,e),e.sc.Wo=eN.bind(null,e.eventManager),e.sc.wc=tN.bind(null,e.eventManager),e}function _T(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}class UA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.yt=Jv(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return vb(this.persistence,new Ew,e.initialUser,this.yt)}yc(e){return new yw(Fl.Bs,this.yt)}gc(e){return new ot}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BA extends UA{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield _T(r.Ac.syncEngine),yield Mg(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return vb(this.persistence,new Ew,e.initialUser,this.yt)}Tc(e,t){return new db(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new _h(t,this.persistence);return new WE(e.asyncQueue,r)}yc(e){const t=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qi.withCacheSize(this.cacheSizeBytes):Qi.DEFAULT;return new qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_r(),Qv(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ot}}class bN extends BA{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof qe&&(r.sharedClientState.syncEngine={Fr:_N.bind(null,o),$r:wN.bind(null,o),Br:DN.bind(null,o),vi:IN.bind(null,o),Mr:vN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ie.Z)(function*(l){yield function EN(n,e){return pT.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=_r();if(!qe.C(t))throw new ke(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qe(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ET{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>kA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=gN.bind(null,r.syncEngine),yield Bb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new XR}createDatastore(e){const t=Jv(e.databaseInfo.databaseId),r=new nr(e.databaseInfo);return new UR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>kA(this.syncEngine,g,0),l=Nt.C()?new Nt:new mt,new jR(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,g,_,D){const b=new oN(r,o,u,l,g,_);return D&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=at(t);ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Ag(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function IT(n,e,t){if(!t)throw new ke(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $A(n,e,t,r){if(!0===e&&!0===r)throw new ke(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jA(n){if(!it.isDocumentKey(n))throw new ke(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HA(n){if(it.isDocumentKey(n))throw new ke(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bw(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bw(n);throw new ke(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function GA(n,e){if(e<=0)throw new ke(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const zA=new Map;class WA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class t_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vl;switch(t.type){case"gapi":return new yr(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zA.get(e);t&&(ze("ComponentProvider","Removing Datastore"),zA.delete(e),t.terminate())}(this),Promise.resolve()}}class lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class Mi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class Ya extends Mi{constructor(e,t,r){super(e,t,Dl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new it(e))}withConverter(e){return new Ya(this.firestore,e,this._path)}}function KA(n,e,...t){if(n=(0,wn.m9)(n),IT("collection","path",e),n instanceof t_){const r=sn.fromString(e,...t);return HA(r),new Ya(n,null,r)}{if(!(n instanceof lr||n instanceof Ya))throw new ke(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return HA(r),new Ya(n.firestore,null,r)}}function Tw(n,e,...t){if(n=(0,wn.m9)(n),1===arguments.length&&(e=Xy.R()),IT("doc","path",e),n instanceof t_){const r=sn.fromString(e,...t);return jA(r),new lr(n,null,new it(r))}{if(!(n instanceof lr||n instanceof Ya))throw new ke(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return jA(r),new lr(n.firestore,n instanceof Ya?n.converter:null,new it(r))}}function ZA(n,e){return n=(0,wn.m9)(n),e=(0,wn.m9)(e),(n instanceof lr||n instanceof Ya)&&(e instanceof lr||e instanceof Ya)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wT(n,e){return n=(0,wn.m9)(n),e=(0,wn.m9)(e),n instanceof Mi&&e instanceof Mi&&n.firestore===e.firestore&&Cl(n._query,e._query)&&n.converter===e.converter}function YA(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Sw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SN{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Br,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new nN(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ie.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class xN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,l){const g=at(u),_=Lh(g.yt)+"/documents",D={documents:l.map(X=>rc(g.yt,X))},b=yield g._o("BatchGetDocuments",_,D,l.length),R=new Map;b.forEach(X=>{const ae=function $I(n,e){return"found"in e?function(t,r){It(!!r.found);const o=Wo(t,r.found.name),u=Gn(r.found.updateTime),l=r.found.createTime?Gn(r.found.createTime):Mt.min(),g=new oi({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(o,u,l,g)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=Wo(t,r.missing),u=Gn(r.readTime);return tr.newNoDocument(o,u)}(n,e):ht()}(g.yt,X);R.set(ae.key.toString(),ae)});const z=[];return l.forEach(X=>{const ae=R.get(X.toString());It(!!ae),z.push(ae)}),z}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ec(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=it.fromPath(o);e.mutations.push(new Oh(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const l=at(o),g=Lh(l.yt)+"/documents",_={writes:u.map(D=>Al(l.yt,D))};yield l.ao("Commit",g,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new ke(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Db(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ie.Z)(function*(){const t=new xN(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!El(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vv(t)}return!1}}class NN{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ur.UNAUTHENTICATED,this.clientId=Xy.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ie.Z)(function*(g){ze("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(Y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Rg(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function QA(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield _b(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),DT.apply(this,arguments)}function JA(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield bT(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>SA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>SA(e.remoteStore,u)),n.onlineComponents=e}),CT.apply(this,arguments)}function bT(n){return TT.apply(this,arguments)}function TT(){return TT=(0,Ie.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield QA(n,new UA)),n.offlineComponents}),TT.apply(this,arguments)}function Aw(n){return ST.apply(this,arguments)}function ST(){return ST=(0,Ie.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield JA(n,new ET)),n.onlineComponents}),ST.apply(this,arguments)}function XA(n){return bT(n).then(e=>e.persistence)}function Mw(n){return bT(n).then(e=>e.localStore)}function AT(n){return Aw(n).then(e=>e.remoteStore)}function MT(n){return Aw(n).then(e=>e.syncEngine)}function kg(n){return xT.apply(this,arguments)}function xT(){return xT=(0,Ie.Z)(function*(n){const e=yield Aw(n),t=e.eventManager;return t.onListen=aN.bind(null,e.syncEngine),t.onUnlisten=uN.bind(null,e.syncEngine),t}),xT.apply(this,arguments)}function tM(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,l,g,_){const D=new Sw({next:R=>{u.enqueueAndForget(()=>zb(o,b));const z=R.docs.has(l);!z&&R.fromCache?_.reject(new ke(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&g&&"server"===g.source?_.reject(new ke(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),b=new Kb(Dl(l.path),D,{includeMetadataChanges:!0,Nu:!0});return Hb(o,b)}(yield kg(n),n.asyncQueue,e,t,r)})),r.promise}function nM(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,l,g,_){const D=new Sw({next:R=>{u.enqueueAndForget(()=>zb(o,b)),R.fromCache&&"server"===g.source?_.reject(new ke(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),b=new Kb(l,D,{includeMetadataChanges:!0,Nu:!0});return Hb(o,b)}(yield kg(n),n.asyncQueue,e,t,r)})),r.promise}class BN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Db(this,"async_queue_retry"),this.Wc=()=>{const t=Qv();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Qv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Qv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Br;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Hu(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Hn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=jb.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function RT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class $N{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends t_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new BN,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rM(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||rM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kC(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new NN(n._authCredentials,n._appCheckCredentials,n._queue,r)}function iM(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield QA(n,t),yield JA(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;yl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function sM(n){if(n._initialized||n._terminated)throw new ke(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa($r.fromBase64String(e))}catch(t){throw new ke(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jh{constructor(e){this._methodName=e}}class xw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const QN=/^__.*__$/;class JN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Go(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ha(e,this.data,t,this.fieldTransforms)}}class oM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Go(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class Rw{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Rw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Pw(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(aM(this.sa)&&QN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class XN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Jv(e)}da(e,t,r,o=!1){return new Rw({sa:e,methodName:t,fa:r,path:vr.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Xh(n){const e=n._freezeSettings(),t=Jv(n._databaseId);return new XN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nw(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);kT("Data must be an object, but it was:",l,r);const g=lM(r,l);let _,D;if(u.merge)_=new Oi(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const b=[];for(const R of u.mergeFields){const z=FT(e,R,t);if(!l.contains(z))throw new ke(Y.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);hM(b,z)||b.push(z)}_=new Oi(b),D=l.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,D=l.fieldTransforms;return new JN(new oi(g),_,D)}class n_ extends Jh{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n_}}function uM(n,e,t){return new Rw({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class NT extends Jh{_toFieldTransform(e){return new ja(e.path,new Si)}isEqual(e){return e instanceof NT}}class eO extends Jh{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=uM(this,e,!0),r=this._a.map(u=>ef(u,t)),o=new Ju(r);return new ja(e.path,o)}isEqual(e){return this===e}}class tO extends Jh{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=uM(this,e,!0),r=this._a.map(u=>ef(u,t)),o=new Ls(r);return new ja(e.path,o)}isEqual(e){return this===e}}class nO extends Jh{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Tl(e.yt,wI(e.yt,this.wa));return new ja(e.path,t)}isEqual(e){return this===e}}function OT(n,e,t,r){const o=n.da(1,e,t);kT("Data must be an object, but it was:",o,r);const u=[],l=oi.empty();_l(r,(_,D)=>{const b=Ow(e,_,t);D=(0,wn.m9)(D);const R=o.ca(b);if(D instanceof n_)u.push(b);else{const z=ef(D,R);null!=z&&(u.push(b),l.set(b,z))}});const g=new Oi(u);return new oM(l,g,o.fieldTransforms)}function PT(n,e,t,r,o,u){const l=n.da(1,e,t),g=[FT(e,r,t)],_=[o];if(u.length%2!=0)throw new ke(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)g.push(FT(e,u[z])),_.push(u[z+1]);const D=[],b=oi.empty();for(let z=g.length-1;z>=0;--z)if(!hM(D,g[z])){const X=g[z];let ae=_[z];ae=(0,wn.m9)(ae);const Fe=l.ca(X);if(ae instanceof n_)D.push(X);else{const We=ef(ae,Fe);null!=We&&(D.push(X),b.set(X,We))}}const R=new Oi(D);return new oM(b,R,l.fieldTransforms)}function cM(n,e,t,r=!1){return ef(t,n.da(r?4:3,e))}function ef(n,e){if(dM(n=(0,wn.m9)(n)))return kT("Unsupported field value:",e,n),lM(n,e);if(n instanceof Jh)return function(t,r){if(!aM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let g=ef(l,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,wn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wI(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=er.fromDate(t);return{timestampValue:nc(r.yt,o)}}if(t instanceof er){const o=new er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nc(r.yt,o)}}if(t instanceof xw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qa)return{bytesValue:LI(r.yt,t._byteString)};if(t instanceof lr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${bw(t)}`)}(n,e)}function lM(n,e){const t={};return KE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(n,(r,o)=>{const u=ef(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function dM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof er||n instanceof xw||n instanceof Qa||n instanceof lr||n instanceof Jh)}function kT(n,e,t){if(!dM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=bw(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function FT(n,e,t){if((e=(0,wn.m9)(e))instanceof dc)return e._internalPath;if("string"==typeof e)return Ow(n,e);throw Pw("Field path arguments must be of type string or ",n,!1,void 0,t)}const rO=new RegExp("[~\\*/\\[\\]]");function Ow(n,e,t){if(e.search(rO)>=0)throw Pw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw Pw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pw(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${o}`),_+=")"),new ke(Y.INVALID_ARGUMENT,g+n+_)}function hM(n,e){return n.some(t=>t.isEqual(e))}class r_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iO extends r_{data(){return super.data()}}function kw(n,e){return"string"==typeof e?Ow(n,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function fM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LT{}class i_ extends LT{}function Vl(n,e,...t){let r=[];e instanceof LT&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof Fg).length,l=o.filter(g=>g instanceof s_).length;if(u>1||u>0&&l>0)throw new ke(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class s_ extends i_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new s_(e,t,r)}_apply(e){const t=this._parse(e);return yM(e._query,t),new Mi(e.firestore,e.converter,sg(e._query,t))}_parse(e){const t=Xh(e.firestore);return function(o,u,l,g,_,D,b){let R;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new ke(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){mM(b,D);const z=[];for(const X of b)z.push(gM(g,o,X));R={arrayValue:{values:z}}}else R=gM(g,o,b)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||mM(b,D),R=cM(l,"where",b,"in"===D||"not-in"===D);return on.create(_,D,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Fg extends LT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const g of l)yM(u,g),u=sg(u,g)}(e._query,t),new Mi(e.firestore,e.converter,sg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class VT extends i_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new VT(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new ke(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Zu(o,u);return function(g,_){if(null===fv(g)){const D=ig(g);null!==D&&vM(0,D,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ho(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Fw extends i_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Fw(e,t,r)}_apply(e){return new Mi(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}class Lw extends i_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lw(e,t,r)}_apply(e){const t=pM(e,this.type,this._docOrFields,this._inclusive);return new Mi(e.firestore,e.converter,(o=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Vw extends i_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Vw(e,t,r)}_apply(e){const t=pM(e,this.type,this._docOrFields,this._inclusive);return new Mi(e.firestore,e.converter,(o=t,new Ho((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function pM(n,e,t,r){if(t[0]=(0,wn.m9)(t[0]),t[0]instanceof r_)return function(o,u,l,g,_){if(!g)throw new ke(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const b of Qu(o))if(b.field.isKeyField())D.push(Wu(u,g.key));else{const R=g.data.field(b.field);if(Qp(R))throw new ke(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const z=b.field.canonicalString();throw new ke(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}D.push(R)}return new jo(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Xh(n.firestore);return function(u,l,g,_,D,b){const R=u.explicitOrderBy;if(D.length>R.length)throw new ke(Y.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let X=0;X<D.length;X++){const ae=D[X];if(R[X].field.isKeyField()){if("string"!=typeof ae)throw new ke(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ae}`);if(!pv(u)&&-1!==ae.indexOf("/"))throw new ke(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ae}' contains a slash.`);const Fe=u.path.child(sn.fromString(ae));if(!it.isDocumentKey(Fe))throw new ke(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const We=new it(Fe);z.push(Wu(l,We))}else{const Fe=cM(g,_,ae);z.push(Fe)}}return new jo(z,b)}(n._query,n.firestore._databaseId,o,e,t,r)}}function gM(n,e,t){if("string"==typeof(t=(0,wn.m9)(t))){if(""===t)throw new ke(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pv(e)&&-1!==t.indexOf("/"))throw new ke(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!it.isDocumentKey(r))throw new ke(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wu(n,new it(r))}if(t instanceof lr)return Wu(n,t._key);throw new ke(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bw(t)}.`)}function mM(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(Y.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yM(n,e){if(e.isInequality()){const r=ig(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new ke(Y.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=fv(n);null!==u&&vM(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(Y.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vM(n,e,t){if(!t.isEqual(e))throw new ke(Y.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class UT{convertValue(e,t="none"){switch(Ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return _l(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new xw(ur(e.latitude),ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=QE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=Va(e);return new er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);It(qC(r));const o=new La(r.get(1),r.get(3)),u=new it(r.popFirst(5));return o.isEqual(t)||Hn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Uw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class fO extends UT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}class tf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hc extends r_{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new o_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class o_ extends hc{data(e={}){return super.data(e)}}class Ul{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new o_(this._firestore,this._userDataWriter,r.key,r,new tf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new o_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const g=new o_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:pO(l.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function EM(n,e){return n instanceof hc&&e instanceof hc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ul&&e instanceof Ul&&n._firestore===e._firestore&&wT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bl extends UT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}function IM(n,e,t){n=gn(n,lr);const r=gn(n.firestore,dr),o=Uw(n.converter,e,t);return Lg(r,[Nw(Xh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Zn.none())])}function wM(n,e,t,...r){n=gn(n,lr);const o=gn(n.firestore,dr),u=Xh(o);let l;return l="string"==typeof(e=(0,wn.m9)(e))||e instanceof dc?PT(u,"updateDoc",n._key,e,t,r):OT(u,"updateDoc",n._key,e),Lg(o,[l.toMutation(n._key,Zn.exists(!0))])}function DM(n,...e){var t,r,o;n=(0,wn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||RT(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(RT(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let _,D,b;if(n instanceof lr)D=gn(n.firestore,dr),b=Dl(n._key.path),_={next:R=>{e[l]&&e[l](BT(D,n,R))},error:e[l+1],complete:e[l+2]};else{const R=gn(n,Mi);D=gn(R.firestore,dr),b=R._query;const z=new Bl(D);_={next:X=>{e[l]&&e[l](new Ul(D,z,R,X))},error:e[l+1],complete:e[l+2]},fM(n._query)}return function(R,z,X,ae){const Fe=new Sw(ae),We=new Kb(z,Fe,X);return R.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Hb(yield kg(R),We)})),()=>{Fe.bc(),R.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return zb(yield kg(R),We)}))}}(Hr(D),b,g,_)}function Lg(n,e){return function(t,r){const o=new Br;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function cN(n,e,t){return Xb.apply(this,arguments)}(yield MT(t),r,o)})),o.promise}(Hr(n),e)}function BT(n,e,t){const r=t.docs.get(e._key),o=new Bl(n);return new hc(n,o,e._key,r,new tf(t.hasPendingWrites,t.fromCache),e.converter)}const CO={maxAttempts:5};class CM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xh(e)}set(e,t,r){this._verifyNotCommitted();const o=$l(e,this._firestore),u=Uw(o.converter,t,r),l=Nw(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Zn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=$l(e,this._firestore);let l;return l="string"==typeof(t=(0,wn.m9)(t))||t instanceof dc?PT(this._dataReader,"WriteBatch.update",u._key,t,r,o):OT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$l(e,this._firestore);return this._mutations=this._mutations.concat(new ec(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $l(n,e){if((n=(0,wn.m9)(n)).firestore!==e)throw new ke(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xh(e)}get(e){const t=$l(e,this._firestore),r=new fO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ht();const u=o[0];if(u.isFoundDocument())return new r_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new r_(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const o=$l(e,this._firestore),u=Uw(o.converter,t,r),l=Nw(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=$l(e,this._firestore);let l;return l="string"==typeof(t=(0,wn.m9)(t))||t instanceof dc?PT(this._dataReader,"Transaction.update",u._key,t,r,o):OT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=$l(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$l(e,this._firestore),r=new Bl(this._firestore);return super.get(e).then(o=>new hc(this._firestore,r,t._key,o._document,new tf(!1,!1),t.converter))}}!function(n,e=!0){Bu=Au.SDK_VERSION,(0,Au._registerComponent)(new fp.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new dr(new Hp(t.getProvider("auth-internal")),new BE(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ke(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(g.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Au.registerVersion)(Jy,"3.8.3",n),(0,Au.registerVersion)(Jy,"3.8.3","esm2017")}();function $T(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TM(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function SM(){if(!function Ih(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}class a_{constructor(e){this._delegate=e}static fromBase64String(e){return SM(),new a_(Qa.fromBase64String(e))}static fromUint8Array(e){return TM(),new a_(Qa.fromUint8Array(e))}toBase64(){return SM(),this._delegate.toBase64()}toUint8Array(){return TM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jT(n){return function PO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class kO{enableIndexedDbPersistence(e,t){return function HN(n,e){sM(n=gn(n,dr));const t=Hr(n),r=n._freezeSettings(),o=new ET;return iM(t,o,new BA(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function GN(n){sM(n=gn(n,dr));const e=Hr(n),t=n._freezeSettings(),r=new ET;return iM(e,r,new bN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zN(n){if(n._initialized&&!n._terminated)throw new ke(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!ro.C())return Promise.resolve();const o=r+"main";yield ro.delete(o)}),function(r){return t.apply(this,arguments)})(_w(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof La||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function qA(n,e,t,r={}){var o;const u=(n=gn(n,t_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&yl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=Ur.MOCK_USER;else{l=(0,wn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ke(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ur(_)}n._authCredentials=new xC(new UE(l,g))}}(this._delegate,e,t,r)}enableNetwork(){return function qN(n){return function ON(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield XA(n),t=yield AT(n);return e.setNetworkEnabled(!0),function(r){const o=at(r);return o._u.delete(0),Xv(o)}(t)}))}(Hr(n=gn(n,dr)))}(this._delegate)}disableNetwork(){return function KN(n){return function PN(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield XA(n),t=yield AT(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=at(o);u._u.add(0),yield Ag(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Hr(n=gn(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$A("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function WN(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function fN(n,e){return iT.apply(this,arguments)}(yield MT(e),t)})),t.promise}(Hr(n=gn(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function DO(n,e){return function LN(n,e){const t=new Sw(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield kg(n),o=t,at(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield kg(n),o=t,void at(r).Ru.delete(o);var r,o}))}}(Hr(n=gn(n,dr)),RT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vg(this,KA(this._delegate,e))}catch(t){throw Ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new ao(this,Tw(this._delegate,e))}catch(t){throw Ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,function TN(n,e){if(n=gn(n,t_),IT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mi(n,null,(t=e,new Ho(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function TO(n,e,t){n=gn(n,dr);const r=Object.assign(Object.assign({},CO),t);return function(o){if(o.maxAttempts<1)throw new ke(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const g=new Br;return o.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const _=yield function eM(n){return Aw(n).then(e=>e.datastore)}(o);new RN(o.asyncQueue,_,l,u,g).run()})),g.promise}(Hr(n),o=>e(new bO(n,o)),r)}(this._delegate,t=>e(new MM(this,t)))}batch(){return Hr(this._delegate),new xM(new CM(this._delegate,e=>Lg(this._delegate,e)))}loadBundle(e){return function ZN(n,e){const t=Hr(n=gn(n,dr)),r=new $N;return function VN(n,e,t,r){const o=function(u,l){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return YA(_,D);if(_ instanceof ArrayBuffer)return YA(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new SN(_,l);var _}(t,Jv(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function CN(n,e,t){const r=at(n);var o;(o=(0,Ie.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(z,X){const ae=at(z),Fe=Gn(X.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",We=>ae.Ns.getBundleMetadata(We,X.id)).then(We=>!!We&&We.createTime.compareTo(Fe)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(z=_).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);g._updateProgress(xA(_));const D=new rN(_,u.localStore,l.yt);let b=yield l.mc();for(;b;){const z=yield D.Fu(b);z&&g._updateProgress(z),b=yield l.mc()}const R=yield D.complete();return yield lc(u,R.Lu,void 0),yield function(z,X){const ae=at(z);return ae.persistence.runTransaction("Save bundle","readwrite",Fe=>ae.Ns.saveBundleMetadata(Fe,X))}(u.localStore,_),g._completeWith(R.progress),Promise.resolve(R.Bu)}catch(_){return yl("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var z}),function(u,l,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield MT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function YN(n,e){return function UN(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=at(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield Mw(n),e)}))}(Hr(n=gn(n,dr)),e).then(t=>t?new Mi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xi(this,t):null)}}class Bw extends UT{constructor(e){super(),this.firestore=e}convertBytes(e){return new a_(new Qa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ao.forKey(t,this.firestore,null)}}class MM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bw(e)}get(e){const t=rf(e);return this._delegate.get(t).then(r=>new u_(this._firestore,new hc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=rf(e);return r?($T("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=rf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=rf(e);return this._delegate.delete(t),this}}class xM{constructor(e){this._delegate=e}set(e,t,r){const o=rf(e);return r?($T("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=rf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=rf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new o_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new c_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=nf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new nf(e,new Bw(e),t),o.set(t,u)),u}}nf.INSTANCES=new WeakMap;class ao{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ao(t,new lr(t._delegate,r,new it(e)))}static forKey(e,t,r){return new ao(t,new lr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vg(this.firestore,KA(this._delegate,e))}catch(t){throw Ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,wn.m9)(e))instanceof lr&&ZA(this._delegate,e)}set(e,t){t=$T("DocumentReference.set",t);try{return t?IM(this._delegate,e,t):IM(this._delegate,e)}catch(r){throw Ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wM(this._delegate,e):wM(this._delegate,e,t,...r)}catch(o){throw Ji(o,"updateDoc()","DocumentReference.update()")}}delete(){return function IO(n){return Lg(gn(n.firestore,dr),[new ec(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=RM(e),r=NM(e,o=>new u_(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return DM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function mO(n){n=gn(n,lr);const e=gn(n.firestore,dr),t=Hr(e),r=new Bl(e);return function kN(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,l){try{const g=yield function(_,D){const b=at(_);return b.persistence.runTransaction("read document","readonly",R=>b.localDocuments.getDocument(R,D))}(o,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new ke(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Rg(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield Mw(n),e,t);var r})),t.promise}(t,n._key).then(o=>new hc(e,r,n._key,o,new tf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function yO(n){n=gn(n,lr);const e=gn(n.firestore,dr);return tM(Hr(e),n._key,{source:"server"}).then(t=>BT(e,n,t))}(this._delegate):function gO(n){n=gn(n,lr);const e=gn(n.firestore,dr);return tM(Hr(e),n._key).then(t=>BT(e,n,t))}(this._delegate),t.then(r=>new u_(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ao(this.firestore,this._delegate.withConverter(e?nf.getInstance(this.firestore,e):null))}}function Ji(n,e,t){return n.message=n.message.replace(e,t),n}function RM(n){for(const e of n)if("object"==typeof e&&!jT(e))return e;return{}}function NM(n,e){var t,r;let o;return o=jT(n[0])?n[0]:jT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class u_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ao(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EM(this._delegate,e._delegate)}}class c_ extends u_{data(e){const t=this._delegate.data(e);return function VE(n,e){n||ht()}(void 0!==t),t}}class Xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bw(e)}where(e,t,r){try{return new Xi(this.firestore,Vl(this._delegate,function sO(n,e,t){const r=e,o=kw("where",n);return s_._create(o,r,t)}(e,t,r)))}catch(o){throw Ji(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xi(this.firestore,Vl(this._delegate,function oO(n,e="asc"){const t=e,r=kw("orderBy",n);return VT._create(r,t)}(e,t)))}catch(r){throw Ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xi(this.firestore,Vl(this._delegate,function aO(n){return GA("limit",n),Fw._create("limit",n,"F")}(e)))}catch(t){throw Ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xi(this.firestore,Vl(this._delegate,function uO(n){return GA("limitToLast",n),Fw._create("limitToLast",n,"L")}(e)))}catch(t){throw Ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xi(this.firestore,Vl(this._delegate,function cO(...n){return Lw._create("startAt",n,!0)}(...e)))}catch(t){throw Ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xi(this.firestore,Vl(this._delegate,function lO(...n){return Lw._create("startAfter",n,!1)}(...e)))}catch(t){throw Ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xi(this.firestore,Vl(this._delegate,function dO(...n){return Vw._create("endBefore",n,!1)}(...e)))}catch(t){throw Ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xi(this.firestore,Vl(this._delegate,function hO(...n){return Vw._create("endAt",n,!0)}(...e)))}catch(t){throw Ji(t,"endAt()","Query.endAt()")}}isEqual(e){return wT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _O(n){n=gn(n,Mi);const e=gn(n.firestore,dr),t=Hr(e),r=new Bl(e);return function FN(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,l){try{const g=yield Yv(o,u,!0),_=new OA(u,g.Hi),D=_.Wu(g.documents),b=_.applyChanges(D,!1);l.resolve(b.snapshot)}catch(g){const _=Rg(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield Mw(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ul(e,r,n,o))}(this._delegate):"server"===e?.source?function EO(n){n=gn(n,Mi);const e=gn(n.firestore,dr),t=Hr(e),r=new Bl(e);return nM(t,n._query,{source:"server"}).then(o=>new Ul(e,r,n,o))}(this._delegate):function vO(n){n=gn(n,Mi);const e=gn(n.firestore,dr),t=Hr(e),r=new Bl(e);return fM(n._query),nM(t,n._query).then(o=>new Ul(e,r,n,o))}(this._delegate),t.then(r=>new HT(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RM(e),r=NM(e,o=>new HT(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return DM(this._delegate,t,r)}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?nf.getInstance(this.firestore,e):null))}}class LO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new c_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new c_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new LO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new c_(this._firestore,r))})}isEqual(e){return EM(this._delegate,e._delegate)}}class Vg extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ao(this.firestore,e):null}doc(e){try{return new ao(this.firestore,void 0===e?Tw(this._delegate):Tw(this._delegate,e))}catch(t){throw Ji(t,"doc()","CollectionReference.doc()")}}add(e){return function wO(n,e){const t=gn(n.firestore,dr),r=Tw(n),o=Uw(n.converter,e);return Lg(t,[Nw(Xh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ao(this.firestore,t))}isEqual(e){return ZA(this._delegate,e._delegate)}withConverter(e){return new Vg(this.firestore,this._delegate.withConverter(e?nf.getInstance(this.firestore,e):null))}}function rf(n){return gn(n,lr)}class GT{constructor(...e){this._delegate=new dc(...e)}static documentId(){return new GT(vr.keyField().canonicalString())}isEqual(e){return(e=(0,wn.m9)(e))instanceof dc&&this._delegate._internalPath.isEqual(e._internalPath)}}class sf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function AO(){return new NT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sf(e)}static delete(){const e=function SO(){return new n_("deleteField")}();return e._methodName="FieldValue.delete",new sf(e)}static arrayUnion(...e){const t=function MO(...n){return new eO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new sf(t)}static arrayRemove(...e){const t=function xO(...n){return new tO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new sf(t)}static increment(e){const t=function RO(n){return new nO("increment",n)}(e);return t._methodName="FieldValue.increment",new sf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const VO={Firestore:AM,GeoPoint:xw,Timestamp:er,Blob:a_,Transaction:MM,WriteBatch:xM,DocumentReference:ao,DocumentSnapshot:u_,Query:Xi,QueryDocumentSnapshot:c_,QuerySnapshot:HT,CollectionReference:Vg,FieldPath:GT,FieldValue:sf,setLogLevel:function FO(n){!function MC(n){Uo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function BO(n){(function UO(n,e){n.INTERNAL.registerComponent(new fp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},VO)))})(n,(e,t)=>new AM(e,t,new kO)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(U0.Z);var $O=F(6451),$w=F(5363),jO=F(6063);class HO extends Ms.x{constructor(e=1/0,t=1/0,r=jO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var GO=F(3099);function OM(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,GO.B)({connector:()=>new HO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function PM(n,e){return(0,yd.m)(e)?Jn(()=>n,e):Jn(()=>n)}var zT=F(9468),jw=F(259);const qT=new Map,kM={activated:!1,tokenObservers:[]},ZO={initialized:!1,enabled:!1};function xi(n){return qT.get(n)||Object.assign({},kM)}function Hw(){return ZO}const KT="https://content-firebaseappcheck.googleapis.com/v1",XO="exchangeDebugToken",FM={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class tP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new wn.BH,yield function nP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new wn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const es=new wn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function QT(){return QT=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(R){throw es.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw es.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(R){throw es.create("fetch-parse-error",{originalErrorMessage:R?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),b=Date.now();return{token:g.token,expireTimeMillis:b+D,issuedAtTimeMillis:b}}),QT.apply(this,arguments)}const aP="firebase-app-check-database",uP=1,l_="firebase-app-check-store";let Ww=null;function JT(){return JT=(0,Ie.Z)(function*(n,e){const r=(yield function UM(){return Ww||(Ww=new Promise((n,e)=>{try{const t=indexedDB.open(aP,uP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(es.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(l_,{keyPath:"compositeKey"})}}catch(t){e(es.create("storage-open",{originalErrorMessage:t?.message}))}}),Ww)}()).transaction(l_,"readwrite"),u=r.objectStore(l_).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var D;g(es.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})}),JT.apply(this,arguments)}const d_=new Sr.Yd("@firebase/app-check");function tS(n,e){return(0,wn.hl)()?function lP(n,e){return function BM(n,e){return JT.apply(this,arguments)}(function jM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{d_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rS(){return rS=(0,Ie.Z)(function*(){const n=Hw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),rS.apply(this,arguments)}const mP={error:"UNKNOWN_ERROR"};function yP(n){return wn.US.encodeString(JSON.stringify(n),!1)}function qw(n){return iS.apply(this,arguments)}function iS(){return iS=(0,Ie.Z)(function*(n,e=!1){const t=n.app;!function LM(n){if(!xi(n).activated)throw es.create("use-before-activation",{appName:n.name})}(t);const r=xi(t);let u,o=r.token;if(o&&!Bg(o)&&(r.token=void 0,o=void 0),!o){const _=yield r.cachedTokenPromise;_&&(Bg(_)?o=_:yield tS(t,void 0))}if(!e&&o&&Bg(o))return{token:o.token};let g,l=!1;if(function HM(){return Hw().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function YT(n,e){return QT.apply(this,arguments)}(function oP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${KT}/projects/${t}/apps/${r}:${XO}?key=${o}`,body:{debug_token:e}}}(t,yield function GM(){return rS.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield tS(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield xi(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?d_.warn(_.message):d_.error(_),u=_}return o?u?g=Bg(o)?{token:o.token,internalError:u}:qM(u):(g={token:o.token},r.token=o,yield tS(t,o)):g=qM(u),l&&function WM(n,e){const t=xi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),iS.apply(this,arguments)}function oS(n,e){const t=xi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function zM(n){const{app:e}=n,t=xi(e);let r=t.tokenRefresher;r||(r=function vP(n){const{app:e}=n;return new tP((0,Ie.Z)(function*(){let r;if(r=xi(e).token?yield qw(n,!0):yield qw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=xi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},FM.RETRIAL_MIN_WAIT,FM.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Bg(n){return n.expireTimeMillis-Date.now()>0}function qM(n){return{token:yP(mP),error:n}}class _P{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xi(this.app);for(const t of e)oS(this.app,t.next);return Promise.resolve()}}const tx="app-check-internal";!function OP(){(0,Au._registerComponent)(new fp.wA("app-check",n=>function EP(n,e){return new _P(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tx).initialize()})),(0,Au._registerComponent)(new fp.wA(tx,n=>function IP(n){return{getToken:e=>qw(n,e),addTokenListener:e=>function sS(n,e,t,r){const{app:o}=n,u=xi(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Bg(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),zM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>zM(n))}(n,"INTERNAL",e),removeTokenListener:e=>oS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Au.registerVersion)("@firebase/app-check","0.6.3")}();class lS{constructor(){return(0,Rn.vb)("app-check")}}typeof window<"u"&&window;var VP=F(9260);const rx=new p.OlP("angularfire2.auth.use-emulator"),ix=new p.OlP("angularfire2.auth.settings"),sx=new p.OlP("angularfire2.auth.tenant-id"),ox=new p.OlP("angularfire2.auth.langugage-code"),ax=new p.OlP("angularfire2.auth.use-device-language"),ux=new p.OlP("angularfire.auth.persistence"),cx=(n,e,t,r,o,u,l,g)=>(0,gs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),l)for(const[D,b]of Object.entries(l))_.settings[D]=b;return g&&_.setPersistence(g),_},[t,r,o,u,l,g]);let lx=(()=>{class n{constructor(t,r,o,u,l,g,_,D,b,R,z,X){const ae=new Ms.x,Fe=gt(void 0).pipe((0,$w.Q)(l.outsideAngular),Jn(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,At.U)(()=>(0,gs.on)(t,u,r)),(0,At.U)(We=>cx(We,u,g,D,b,R,_,z)),OM({bufferSize:1,refCount:!1}));if(mc(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Fe.pipe(ls()).subscribe();const qt=Fe.pipe(Jn(Jt=>Jt.getRedirectResult().then(Zt=>Zt,()=>null)),Rn.iC,OM({bufferSize:1,refCount:!1})),Gt=Fe.pipe(Jn(Jt=>new fi.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>Jt.onAuthStateChanged(an=>Zt.next(an),an=>Zt.error(an),()=>Zt.complete()))})))),Qt=Fe.pipe(Jn(Jt=>new fi.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>Jt.onIdTokenChanged(an=>Zt.next(an),an=>Zt.error(an),()=>Zt.complete()))}))));this.authState=qt.pipe(PM(Gt),(0,zT.R)(l.outsideAngular),(0,$w.Q)(l.insideAngular)),this.user=qt.pipe(PM(Qt),(0,zT.R)(l.outsideAngular),(0,$w.Q)(l.insideAngular)),this.idToken=this.user.pipe(Jn(Jt=>Jt?(0,xn.D)(Jt.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Jn(Jt=>Jt?(0,xn.D)(Jt.getIdTokenResult()):gt(null))),this.credential=(0,$O.T)(qt,ae,this.authState.pipe(ni(Jt=>!Jt))).pipe((0,At.U)(Jt=>Jt?.user?Jt:null),(0,zT.R)(l.outsideAngular),(0,$w.Q)(l.insideAngular))}return(0,gs.pX)(this,Fe,u,{spy:{apply:(We,qt,Gt)=>{(We.startsWith("signIn")||We.startsWith("createUser"))&&Gt.then(Qt=>ae.next(Qt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(gs.Dh),p.LFG(gs.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Rn.HU),p.LFG(rx,8),p.LFG(ix,8),p.LFG(sx,8),p.LFG(ox,8),p.LFG(ax,8),p.LFG(ux,8),p.LFG(lS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function dx(n,e){return function BP(n,e=dy.z){return new fi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function hS(n,e){return dx(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function Zw(n,e){return hS(n,e).pipe(Vc(void 0),nl(),(0,At.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=o.find(b=>b.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function hx(n,e,t){return Zw(n,t).pipe(Ea((r,o)=>function jP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return fS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return fS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),V0(),(0,At.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function fS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function fx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class px{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Vc(void 0),nl(),ni(([r,o])=>o.length>0||!r),(0,At.U)(([r,o])=>o),Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ea((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fx(e);return hx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return hS(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rn.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Rn.iC)}add(e){return this.ref.add(e)}doc(e){return new gx(this.ref.doc(e),this.afs)}}class gx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=vx(r,t);return new px(o,u,this.afs)}snapshotChanges(){return function $P(n,e){return dx(n,e).pipe(Vc(void 0),nl(),(0,At.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(Rn.iC)}}class GP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zw(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ni(t=>t.length>0),Rn.iC):Zw(this.query,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ea((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fx(e);return hx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return hS(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Rn.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Rn.iC)}}const mx=new p.OlP("angularfire2.enableFirestorePersistence"),yx=new p.OlP("angularfire2.firestore.persistenceSettings"),zP=new p.OlP("angularfire2.firestore.settings"),WP=new p.OlP("angularfire2.firestore.use-emulator");function vx(n,e=(t=>t)){return{query:e(n),ref:n}}let _x=(()=>{class n{constructor(t,r,o,u,l,g,_,D,b,R,z,X,ae,Fe,We,qt,Gt){this.schedulers=_;const Qt=(0,gs.on)(t,g,r),Jt=b;R&&cx(Qt,g,z,ae,Fe,We,X,qt),[this.firestore,this.persistenceEnabled$]=(0,gs.cc)(`${Qt.name}.firestore`,"AngularFirestore",Qt.name,()=>{const Zt=g.runOutsideAngular(()=>Qt.firestore());if(u&&Zt.settings(u),Jt&&Zt.useEmulator(...Jt),o&&!mc(l)){const an=()=>{try{return(0,xn.D)(Zt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(ai){return typeof console<"u"&&console.warn(ai),gt(!1)}};return[Zt,g.runOutsideAngular(an)]}return[Zt,gt(!1)]},[u,Jt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=vx(o,r),g=this.schedulers.ngZone.run(()=>u);return new px(g,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new GP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new gx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(gs.Dh),p.LFG(gs.xv,8),p.LFG(mx,8),p.LFG(zP,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Rn.HU),p.LFG(yx,8),p.LFG(WP,8),p.LFG(lx,8),p.LFG(rx,8),p.LFG(ix,8),p.LFG(sx,8),p.LFG(ox,8),p.LFG(ax,8),p.LFG(ux,8),p.LFG(lS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qP=(()=>{class n{constructor(){VP.Z.registerVersion("angularfire",Rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mx,useValue:!0},{provide:yx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[_x]}),n})(),Ex=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),af=(()=>{class n extends Ex{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Ja=new p.OlP("NgValueAccessor"),YP={provide:Ja,useExisting:(0,p.Gpc)(()=>Yw),multi:!0},JP=new p.OlP("CompositionEventMode");let Yw=(()=>{class n extends Ex{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function QP(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(JP,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([YP]),p.qOj]}),n})();const XP=!1,Fi=new p.OlP("NgValidators"),Hl=new p.OlP("NgAsyncValidators");function Rx(n){return null!=n}function Nx(n){const e=(0,p.QGY)(n)?(0,xn.D)(n):n;if(XP&&!(0,p.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new p.vHH(-1101,t)}return e}function Ox(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Px(n,e){return e.map(t=>t(n))}function kx(n){return n.map(e=>function tk(n){return!n.validate}(e)?e:t=>e.validate(t))}function pS(n){return null!=n?function Fx(n){if(!n)return null;const e=n.filter(Rx);return 0==e.length?null:function(t){return Ox(Px(t,e))}}(kx(n)):null}function gS(n){return null!=n?function Lx(n){if(!n)return null;const e=n.filter(Rx);return 0==e.length?null:function(t){return function KP(...n){const e=(0,Ks.jO)(n),{args:t,keys:r}=Pc(n),o=new fi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,D=l;for(let b=0;b<l;b++){let R=!1;(0,To.Xf)(t[b]).subscribe((0,qn.x)(u,z=>{R||(R=!0,D--),g[b]=z},()=>_--,void 0,()=>{(!_||!R)&&(D||u.next(r?Rs(r,g):g),u.complete())}))}});return e?o.pipe(kc(e)):o}(Px(t,e).map(Nx)).pipe((0,At.U)(Ox))}}(kx(n)):null}function Vx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mS(n){return n?Array.isArray(n)?n:[n]:[]}function Jw(n,e){return Array.isArray(n)?n.includes(e):n===e}function $x(n,e){const t=mS(e);return mS(n).forEach(o=>{Jw(t,o)||t.push(o)}),t}function jx(n,e){return mS(e).filter(t=>!Jw(n,t))}class Hx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ts extends Hx{get formDirective(){return null}get path(){return null}}class Gl extends Hx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zx=(()=>{class n extends Gx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Gl,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),Wx=(()=>{class n extends Gx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ts,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();function qx(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const _S=!1,h_="VALID",eD="INVALID",$g="PENDING",f_="DISABLED";function ES(n){return(tD(n)?n.validators:n)||null}function IS(n,e){return(tD(e)?e.asyncValidators:n)||null}function tD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Yx{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===h_}get invalid(){return this.status===eD}get pending(){return this.status==$g}get disabled(){return this.status===f_}get enabled(){return this.status!==f_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($x(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($x(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jx(e,this._rawAsyncValidators))}hasValidator(e){return Jw(this._rawValidators,e)}hasAsyncValidator(e){return Jw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$g,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=f_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=h_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===h_||this.status===$g)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?f_:h_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$g,this._hasOwnPendingAsyncValidator=!0;const t=Nx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?f_:this.errors?eD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($g)?$g:this._anyControlsHaveStatus(eD)?eD:h_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function uk(n){return Array.isArray(n)?pS(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ck(n){return Array.isArray(n)?gS(n):n||null}(this._rawAsyncValidators)}}class wS extends Yx{constructor(e,t,r){super(ES(t),IS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Zx(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new p.vHH(1002,_S?function ak(n,e){return`Must supply a value for form control ${qx(n,e)}`}(e,o):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Kx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,_S?function sk(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new p.vHH(1001,_S?function ok(n,e){return`Cannot find form control ${qx(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const jg=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>nD}),nD="always";function p_(n,e,t=nD){DS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Qx(n,e)})}(n,e),function pk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Qx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function sD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DS(n,e){const t=function Ux(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Vx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Bx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Vx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();sD(e._rawValidators,o),sD(e._rawAsyncValidators,o)}function Qx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const _k={provide:ts,useExisting:(0,p.Gpc)(()=>aD)},g_=(()=>Promise.resolve())();let aD=(()=>{class n extends ts{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new wS({},pS(t),gS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){g_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),p_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){g_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){g_.then(()=>{const r=this._findContainer(t.path),o=new wS({});(function Jx(n,e){DS(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){g_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){g_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Xx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Fi,10),p.Y36(Hl,10),p.Y36(jg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([_k]),p.qOj]}),n})();function eR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nR=class extends Yx{constructor(e=null,t,r){super(ES(t),IS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wk={provide:Gl,useExisting:(0,p.Gpc)(()=>SS)},sR=(()=>Promise.resolve())();let SS=(()=>{class n extends Gl{constructor(t,r,o,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new nR,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function TS(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Yw?t=u:function yk(n){return Object.getPrototypeOf(n.constructor)===af}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function bS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){p_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,p.D6c)(r);sR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function rD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ts,9),p.Y36(Fi,10),p.Y36(Hl,10),p.Y36(Ja,10),p.Y36(p.sBO,8),p.Y36(jg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([wk]),p.qOj,p.TTD]}),n})(),oR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),uR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),Wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[uR]}),n})(),Kk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jg,useValue:t.callSetDisabledState??nD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Wk]}),n})();function Zk(n,e){if(1&n&&(p.TgZ(0,"li")(1,"article")(2,"h4"),p._uU(3),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.qZA()()()),2&n){const t=e.$implicit;p.xp6(3),p.Oqu(t.title),p.xp6(2),p.Oqu(t.description)}}class m_{constructor(e){this.store=e,this.form={title:"",description:""}}ngOnInit(){this.blogs=this.store.collection("blog").valueChanges({idField:"id"})}save(){this.store.collection("blog").add(this.form)}}m_.\u0275fac=function(e){return new(e||m_)(p.Y36(_x))},m_.\u0275cmp=p.Xpm({type:m_,selectors:[["blog"]],decls:17,vars:5,consts:[[1,"blog-form"],["name","title","type","text",3,"ngModel","ngModelChange"],["name","description",3,"ngModel","ngModelChange"],[1,"text-align-right"],[3,"click"],[1,"blog-list"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(p.TgZ(0,"form",0)(1,"label")(2,"span"),p._uU(3,"Title"),p.qZA(),p.TgZ(4,"input",1),p.NdJ("ngModelChange",function(o){return t.form.title=o}),p.qZA()(),p.TgZ(5,"label")(6,"span"),p._uU(7,"Description"),p.qZA(),p.TgZ(8,"textarea",2),p.NdJ("ngModelChange",function(o){return t.form.description=o}),p.qZA()(),p.TgZ(9,"div",3)(10,"button"),p._uU(11,"Cancel"),p.qZA(),p.TgZ(12,"button",4),p.NdJ("click",function(){return t.save()}),p._uU(13,"Save"),p.qZA()()(),p.TgZ(14,"ul",5),p.YNc(15,Zk,6,2,"li",6),p.ALo(16,"async"),p.qZA()),2&e&&(p.xp6(4),p.Q6J("ngModel",t.form.title),p.xp6(4),p.Q6J("ngModel",t.form.description),p.xp6(7),p.Q6J("ngForOf",p.lcZ(16,3,t.blogs)))},dependencies:[Li,oR,Yw,zx,Wx,SS,aD,Is],styles:[".blog-form[_ngcontent-%COMP%]{margin-top:100px;min-width:600px;width:auto;padding:12px;border:1px solid #000000}.blog-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap}.blog-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .blog-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.blog-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .blog-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .blog-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .blog-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;font-size:14px}.blog-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:300px}.blog-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.blog-list[_ngcontent-%COMP%]{margin-top:20px;width:60vw;padding:0;display:inline-grid;grid-template-columns:1fr 1fr 1fr;gap:20px}.blog-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}.blog-list[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{border:1px solid #000000;padding:8px}.blog-list[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center}.text-align-right[_ngcontent-%COMP%]{text-align:right}"]});class y_{}y_.\u0275fac=function(e){return new(e||y_)},y_.\u0275cmp=p.Xpm({type:y_,selectors:[["app-root"]],decls:2,vars:0,consts:[["id","root"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._UZ(1,"blog"),p.qZA())},dependencies:[m_],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0}#root[_ngcontent-%COMP%]{display:flex;justify-content:center;min-width:100vw;min-height:100vh}"]});var Jk=F(655),TR=F(3008),Xk=F(2722);function e1(n){return new fi.y(function(e){return{unsubscribe:(0,Xk.v)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class uD{constructor(e){return e}}const o1=(0,Rn.u3)(e1,!0);class v_{constructor(e){return e}}const MR=Rn.nk.async,u1=(0,Rn.u3)(TR.Kz,!0),c1=(0,Rn.u3)(TR.Iv,!0);let xR=(()=>{class n{constructor(t,r,o){let u;this.disposables=[],(0,jw.KN)("angularfire",Rn.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(l=>{u=l})),MR().then(()=>{const l=o.get(v_);l?this.disposables=[o1(t).subscribe(g=>{c1(l,g?.uid),u()})]:u()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(uD),p.LFG(p.R0b),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const RR="firebase_screen_id",kS="outlet",__="screen_class",NR="screen_name";let I1=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const FS={},w1=n=>{const e=[n[__],n[kS]].join("#");if(FS.hasOwnProperty(e))return FS[e];{const t=I1++;return FS[e]=t,t}};let C1=(()=>{class n{constructor(t,r,o,u,l,g){(0,jw.KN)("angularfire",Rn.q4.full,"screen-tracking"),MR().then(()=>{const _=g.get(v_);!t||!_||u.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(ni(o=>o instanceof Z_)).pipe(Jn(o=>{var u;const g=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,X=>X.replace("://",":///"))).root.children[o.snapshot.outlet])||void 0===u?void 0:u.toString())||"",_=n.routerState.root.children.map(X=>X).find(X=>X.outlet===o.snapshot.outlet);if(!_)return gt(null);let D=_;for(;D.firstChild;)D=D.firstChild;const b=D.pathFromRoot.map(X=>{var ae;return null===(ae=X.routeConfig)||void 0===ae?void 0:ae.path}).filter(X=>X).join("/")||"/",R={[NR]:b,page_path:`/${g}`,firebase_event_origin:"auto",firebase_screen:b,[kS]:o.snapshot.outlet};e&&(R.page_title=e.getTitle());let z=_.component;if(z){if(z===qc){let X=o.snapshot;for(;X.firstChild;)X=X.firstChild;z=X.component}}else z=o.snapshot.component;if("string"==typeof z)return gt(Object.assign(Object.assign({},R),{[__]:z}));if(z){const X=t.resolveComponentFactory(z);return gt(Object.assign(Object.assign({},R),{[__]:X.selector}))}return gt(null)}),ni(o=>!!o),(0,At.U)(o=>Object.assign({firebase_screen_class:o[__],[RR]:w1(o)},o)),function Qk(n,e,t,r){return(0,qr.e)((o,u)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const g=new Map,_=ae=>{g.forEach(ae),ae(u)},D=ae=>_(Fe=>Fe.error(ae));let b=0,R=!1;const z=new qn.Q(u,ae=>{try{const Fe=n(ae);let We=g.get(Fe);if(!We){g.set(Fe,We=r?r():new Ms.x);const qt=function X(ae,Fe){const We=new fi.y(qt=>{b++;const Gt=Fe.subscribe(qt);return()=>{Gt.unsubscribe(),0==--b&&R&&z.unsubscribe()}});return We.key=ae,We}(Fe,We);if(u.next(qt),t){const Gt=(0,qn.x)(We,()=>{We.complete(),Gt?.unsubscribe()},void 0,void 0,()=>g.delete(Fe));z.add((0,To.Xf)(t(qt)).subscribe(Gt))}}We.next(l?l(ae):ae)}catch(Fe){D(Fe)}},()=>_(ae=>ae.complete()),D,()=>g.clear(),()=>(R=!0,0===b));o.subscribe(z)})}(o=>o[kS]),(0,ri.z)(o=>o.pipe(V0((u,l)=>JSON.stringify(u)===JSON.stringify(l)),Vc(void 0),nl(),(0,At.U)(([u,l])=>u?Object.assign({firebase_previous_class:u[__],firebase_previous_screen:u[NR],firebase_previous_id:u[RR]},l):l)))))(t,r,o).pipe(Jn(D=>(0,Jk.mG)(this,void 0,void 0,function*(){return l&&(yield l.initialized),u1(_,"screen_view",D)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(bi,8),p.LFG(Rc,8),p.LFG(p._Vd),p.LFG(p.R0b),p.LFG(xR,8),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Hg{}Hg.\u0275fac=function(e){return new(e||Hg)},Hg.\u0275mod=p.oAB({type:Hg,bootstrap:[y_]}),Hg.\u0275inj=p.cJS({providers:[C1,xR],imports:[ma,Sa,gs.hO.initializeApp({projectId:"blog-8c941",appId:"1:824668787120:web:559deae17bfb72cddc0675",storageBucket:"blog-8c941.appspot.com",apiKey:"AIzaSyCUSiZzeNlNlglhBHEe-Bs1AgEkU-11MvY",authDomain:"blog-8c941.firebaseapp.com",messagingSenderId:"824668787120",measurementId:"G-85GNM88G89"}),qP,Kk]}),im().bootstrapModule(Hg).catch(n=>console.error(n))},9751:(yt,be,F)=>{F.d(be,{y:()=>le});var p=F(2961),U=F(727),k=F(8822),ee=F(9635),ce=F(2416),oe=F(576),fe=F(2806);let le=(()=>{class Q{constructor(me){me&&(this._subscribe=me)}lift(me){const Ke=new Q;return Ke.source=this,Ke.operator=me,Ke}subscribe(me,Ke,et){const pe=function j(Q){return Q&&Q instanceof p.Lv||function H(Q){return Q&&(0,oe.m)(Q.next)&&(0,oe.m)(Q.error)&&(0,oe.m)(Q.complete)}(Q)&&(0,U.Nn)(Q)}(me)?me:new p.Hp(me,Ke,et);return(0,fe.x)(()=>{const{operator:De,source:Ae}=this;pe.add(De?De.call(pe,Ae):Ae?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(me){try{return this._subscribe(me)}catch(Ke){me.error(Ke)}}forEach(me,Ke){return new(Ke=he(Ke))((et,pe)=>{const De=new p.Hp({next:Ae=>{try{me(Ae)}catch(Te){pe(Te),De.unsubscribe()}},error:pe,complete:et});this.subscribe(De)})}_subscribe(me){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(me)}[k.L](){return this}pipe(...me){return(0,ee.U)(me)(this)}toPromise(me){return new(me=he(me))((Ke,et)=>{let pe;this.subscribe(De=>pe=De,De=>et(De),()=>Ke(pe))})}}return Q.create=Oe=>new Q(Oe),Q})();function he(Q){var Oe;return null!==(Oe=Q??ce.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(yt,be,F)=>{F.d(be,{x:()=>fe});var p=F(9751),U=F(727);const ee=(0,F(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=F(8737),oe=F(2806);let fe=(()=>{class he extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new le(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new ee}next(j){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Oe,observers:me}=this;return Q||Oe?U.Lc:(this.currentObservers=null,me.push(j),new U.w0(()=>{this.currentObservers=null,(0,ce.P)(me,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Oe,isStopped:me}=this;Q?j.error(Oe):me&&j.complete()}asObservable(){const j=new p.y;return j.source=this,j}}return he.create=(H,j)=>new le(H,j),he})();class le extends fe{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,H)}error(H){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==Q?Q:U.Lc}}},2961:(yt,be,F)=>{F.d(be,{Hp:()=>et,Lv:()=>Q});var p=F(576),U=F(727),k=F(2416),ee=F(7849);function ce(){}const oe=he("C",void 0,void 0);function he(Me,Re,Ce){return{kind:Me,value:Re,error:Ce}}var H=F(3410),j=F(2806);class Q extends U.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,U.Nn)(Re)&&Re.add(this)):this.destination=Te}static create(Re,Ce,He){return new et(Re,Ce,He)}next(Re){this.isStopped?Ae(function le(Me){return he("N",Me,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?Ae(function fe(Me){return he("E",void 0,Me)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?Ae(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function me(Me,Re){return Oe.call(Me,Re)}class Ke{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Re)}catch(He){pe(He)}}error(Re){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Re)}catch(He){pe(He)}else pe(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Ce){pe(Ce)}}}class et extends Q{constructor(Re,Ce,He){let Z;if(super(),(0,p.m)(Re)||!Re)Z={next:Re??void 0,error:Ce??void 0,complete:He??void 0};else{let re;this&&k.v.useDeprecatedNextContext?(re=Object.create(Re),re.unsubscribe=()=>this.unsubscribe(),Z={next:Re.next&&me(Re.next,re),error:Re.error&&me(Re.error,re),complete:Re.complete&&me(Re.complete,re)}):Z=Re}this.destination=new Ke(Z)}}function pe(Me){k.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Me):(0,ee.h)(Me)}function Ae(Me,Re){const{onStoppedNotification:Ce}=k.v;Ce&&H.z.setTimeout(()=>Ce(Me,Re))}const Te={closed:!0,next:ce,error:function De(Me){throw Me},complete:ce}},727:(yt,be,F)=>{F.d(be,{Lc:()=>oe,w0:()=>ce,Nn:()=>fe});var p=F(576);const k=(0,F(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Oe)=>`${Oe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ee=F(8737);class ce{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const me of j)me.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,p.m)(Q))try{Q()}catch(me){H=me instanceof k?me.errors:[me]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const me of Oe)try{le(me)}catch(Ke){H=H??[],Ke instanceof k?H=[...H,...Ke.errors]:H.push(Ke)}}if(H)throw new k(H)}}add(H){var j;if(H&&H!==this)if(this.closed)le(H);else{if(H instanceof ce){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,ee.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,ee.P)(j,H),H instanceof ce&&H._removeParent(this)}}ce.EMPTY=(()=>{const he=new ce;return he.closed=!0,he})();const oe=ce.EMPTY;function fe(he){return he instanceof ce||he&&"closed"in he&&(0,p.m)(he.remove)&&(0,p.m)(he.add)&&(0,p.m)(he.unsubscribe)}function le(he){(0,p.m)(he)?he():he.unsubscribe()}},2416:(yt,be,F)=>{F.d(be,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,be,F)=>{F.d(be,{E:()=>U});const U=new(F(9751).y)(ce=>ce.complete())},8996:(yt,be,F)=>{F.d(be,{D:()=>Re});var p=F(8421),U=F(5363),k=F(9468),oe=F(9751),le=F(2202),he=F(576),H=F(9672);function Q(Ce,He){if(!Ce)throw new Error("Iterable cannot be null");return new oe.y(Z=>{(0,H.f)(Z,He,()=>{const re=Ce[Symbol.asyncIterator]();(0,H.f)(Z,He,()=>{re.next().then(_e=>{_e.done?Z.complete():Z.next(_e.value)})},0,!0)})})}var Oe=F(3670),me=F(8239),Ke=F(1144),et=F(6495),pe=F(2206),De=F(4532),Ae=F(3260);function Re(Ce,He){return He?function Me(Ce,He){if(null!=Ce){if((0,Oe.c)(Ce))return function ee(Ce,He){return(0,p.Xf)(Ce).pipe((0,k.R)(He),(0,U.Q)(He))}(Ce,He);if((0,Ke.z)(Ce))return function fe(Ce,He){return new oe.y(Z=>{let re=0;return He.schedule(function(){re===Ce.length?Z.complete():(Z.next(Ce[re++]),Z.closed||this.schedule())})})}(Ce,He);if((0,me.t)(Ce))return function ce(Ce,He){return(0,p.Xf)(Ce).pipe((0,k.R)(He),(0,U.Q)(He))}(Ce,He);if((0,pe.D)(Ce))return Q(Ce,He);if((0,et.T)(Ce))return function j(Ce,He){return new oe.y(Z=>{let re;return(0,H.f)(Z,He,()=>{re=Ce[le.h](),(0,H.f)(Z,He,()=>{let _e,Qe;try{({value:_e,done:Qe}=re.next())}catch(Ge){return void Z.error(Ge)}Qe?Z.complete():Z.next(_e)},0,!0)}),()=>(0,he.m)(re?.return)&&re.return()})}(Ce,He);if((0,Ae.L)(Ce))return function Te(Ce,He){return Q((0,Ae.Q)(Ce),He)}(Ce,He)}throw(0,De.z)(Ce)}(Ce,He):(0,p.Xf)(Ce)}},8421:(yt,be,F)=>{F.d(be,{Xf:()=>Oe});var p=F(655),U=F(1144),k=F(8239),ee=F(9751),ce=F(3670),oe=F(2206),fe=F(4532),le=F(6495),he=F(3260),H=F(576),j=F(7849),Q=F(8822);function Oe(Me){if(Me instanceof ee.y)return Me;if(null!=Me){if((0,ce.c)(Me))return function me(Me){return new ee.y(Re=>{const Ce=Me[Q.L]();if((0,H.m)(Ce.subscribe))return Ce.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,U.z)(Me))return function Ke(Me){return new ee.y(Re=>{for(let Ce=0;Ce<Me.length&&!Re.closed;Ce++)Re.next(Me[Ce]);Re.complete()})}(Me);if((0,k.t)(Me))return function et(Me){return new ee.y(Re=>{Me.then(Ce=>{Re.closed||(Re.next(Ce),Re.complete())},Ce=>Re.error(Ce)).then(null,j.h)})}(Me);if((0,oe.D)(Me))return De(Me);if((0,le.T)(Me))return function pe(Me){return new ee.y(Re=>{for(const Ce of Me)if(Re.next(Ce),Re.closed)return;Re.complete()})}(Me);if((0,he.L)(Me))return function Ae(Me){return De((0,he.Q)(Me))}(Me)}throw(0,fe.z)(Me)}function De(Me){return new ee.y(Re=>{(function Te(Me,Re){var Ce,He,Z,re;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,p.KL)(Me);!(He=yield Ce.next()).done;)if(Re.next(He.value),Re.closed)return}catch(_e){Z={error:_e}}finally{try{He&&!He.done&&(re=Ce.return)&&(yield re.call(Ce))}finally{if(Z)throw Z.error}}Re.complete()})})(Me,Re).catch(Ce=>Re.error(Ce))})}},6451:(yt,be,F)=>{F.d(be,{T:()=>oe});var p=F(8189),U=F(8421),k=F(515),ee=F(7669),ce=F(8996);function oe(...fe){const le=(0,ee.yG)(fe),he=(0,ee._6)(fe,1/0),H=fe;return H.length?1===H.length?(0,U.Xf)(H[0]):(0,p.J)(he)((0,ce.D)(H,le)):k.E}},5403:(yt,be,F)=>{F.d(be,{Q:()=>k,x:()=>U});var p=F(2961);function U(ee,ce,oe,fe,le){return new k(ee,ce,oe,fe,le)}class k extends p.Lv{constructor(ce,oe,fe,le,he,H){super(ce),this.onFinalize=he,this.shouldUnsubscribe=H,this._next=oe?function(j){try{oe(j)}catch(Q){ce.error(Q)}}:super._next,this._error=le?function(j){try{le(j)}catch(Q){ce.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(j){ce.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(yt,be,F)=>{F.d(be,{U:()=>k});var p=F(4482),U=F(5403);function k(ee,ce){return(0,p.e)((oe,fe)=>{let le=0;oe.subscribe((0,U.x)(fe,he=>{fe.next(ee.call(ce,he,le++))}))})}},8189:(yt,be,F)=>{F.d(be,{J:()=>k});var p=F(5577),U=F(4671);function k(ee=1/0){return(0,p.z)(U.y,ee)}},5577:(yt,be,F)=>{F.d(be,{z:()=>le});var p=F(4004),U=F(8421),k=F(4482),ee=F(9672),ce=F(5403),fe=F(576);function le(he,H,j=1/0){return(0,fe.m)(H)?le((Q,Oe)=>(0,p.U)((me,Ke)=>H(Q,me,Oe,Ke))((0,U.Xf)(he(Q,Oe))),j):("number"==typeof H&&(j=H),(0,k.e)((Q,Oe)=>function oe(he,H,j,Q,Oe,me,Ke,et){const pe=[];let De=0,Ae=0,Te=!1;const Me=()=>{Te&&!pe.length&&!De&&H.complete()},Re=He=>De<Q?Ce(He):pe.push(He),Ce=He=>{me&&H.next(He),De++;let Z=!1;(0,U.Xf)(j(He,Ae++)).subscribe((0,ce.x)(H,re=>{Oe?.(re),me?Re(re):H.next(re)},()=>{Z=!0},void 0,()=>{if(Z)try{for(De--;pe.length&&De<Q;){const re=pe.shift();Ke?(0,ee.f)(H,Ke,()=>Ce(re)):Ce(re)}Me()}catch(re){H.error(re)}}))};return he.subscribe((0,ce.x)(H,Re,()=>{Te=!0,Me()})),()=>{et?.()}}(Q,Oe,he,j)))}},5363:(yt,be,F)=>{F.d(be,{Q:()=>ee});var p=F(9672),U=F(4482),k=F(5403);function ee(ce,oe=0){return(0,U.e)((fe,le)=>{fe.subscribe((0,k.x)(le,he=>(0,p.f)(le,ce,()=>le.next(he),oe),()=>(0,p.f)(le,ce,()=>le.complete(),oe),he=>(0,p.f)(le,ce,()=>le.error(he),oe)))})}},3099:(yt,be,F)=>{F.d(be,{B:()=>ce});var p=F(8421),U=F(7579),k=F(2961),ee=F(4482);function ce(fe={}){const{connector:le=(()=>new U.x),resetOnError:he=!0,resetOnComplete:H=!0,resetOnRefCountZero:j=!0}=fe;return Q=>{let Oe,me,Ke,et=0,pe=!1,De=!1;const Ae=()=>{me?.unsubscribe(),me=void 0},Te=()=>{Ae(),Oe=Ke=void 0,pe=De=!1},Me=()=>{const Re=Oe;Te(),Re?.unsubscribe()};return(0,ee.e)((Re,Ce)=>{et++,!De&&!pe&&Ae();const He=Ke=Ke??le();Ce.add(()=>{et--,0===et&&!De&&!pe&&(me=oe(Me,j))}),He.subscribe(Ce),!Oe&&et>0&&(Oe=new k.Hp({next:Z=>He.next(Z),error:Z=>{De=!0,Ae(),me=oe(Te,he,Z),He.error(Z)},complete:()=>{pe=!0,Ae(),me=oe(Te,H),He.complete()}}),(0,p.Xf)(Re).subscribe(Oe))})(Q)}}function oe(fe,le,...he){if(!0===le)return void fe();if(!1===le)return;const H=new k.Hp({next:()=>{H.unsubscribe(),fe()}});return(0,p.Xf)(le(...he)).subscribe(H)}},9468:(yt,be,F)=>{F.d(be,{R:()=>U});var p=F(4482);function U(k,ee=0){return(0,p.e)((ce,oe)=>{oe.add(k.schedule(()=>ce.subscribe(oe),ee))})}},8505:(yt,be,F)=>{F.d(be,{b:()=>ce});var p=F(576),U=F(4482),k=F(5403),ee=F(4671);function ce(oe,fe,le){const he=(0,p.m)(oe)||fe||le?{next:oe,error:fe,complete:le}:oe;return he?(0,U.e)((H,j)=>{var Q;null===(Q=he.subscribe)||void 0===Q||Q.call(he);let Oe=!0;H.subscribe((0,k.x)(j,me=>{var Ke;null===(Ke=he.next)||void 0===Ke||Ke.call(he,me),j.next(me)},()=>{var me;Oe=!1,null===(me=he.complete)||void 0===me||me.call(he),j.complete()},me=>{var Ke;Oe=!1,null===(Ke=he.error)||void 0===Ke||Ke.call(he,me),j.error(me)},()=>{var me,Ke;Oe&&(null===(me=he.unsubscribe)||void 0===me||me.call(he)),null===(Ke=he.finalize)||void 0===Ke||Ke.call(he)}))}):ee.y}},4408:(yt,be,F)=>{F.d(be,{o:()=>ce});var p=F(727);class U extends p.w0{constructor(fe,le){super()}schedule(fe,le=0){return this}}const k={setInterval(oe,fe,...le){const{delegate:he}=k;return he?.setInterval?he.setInterval(oe,fe,...le):setInterval(oe,fe,...le)},clearInterval(oe){const{delegate:fe}=k;return(fe?.clearInterval||clearInterval)(oe)},delegate:void 0};var ee=F(8737);class ce extends U{constructor(fe,le){super(fe,le),this.scheduler=fe,this.work=le,this.pending=!1}schedule(fe,le=0){var he;if(this.closed)return this;this.state=fe;const H=this.id,j=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(j,H,le)),this.pending=!0,this.delay=le,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(j,this.id,le),this}requestAsyncId(fe,le,he=0){return k.setInterval(fe.flush.bind(fe,this),he)}recycleAsyncId(fe,le,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return le;null!=le&&k.clearInterval(le)}execute(fe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(fe,le);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,le){let H,he=!1;try{this.work(fe)}catch(j){he=!0,H=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:fe,scheduler:le}=this,{actions:he}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(he,this),null!=fe&&(this.id=this.recycleAsyncId(le,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,be,F)=>{F.d(be,{v:()=>k});var p=F(6063);class U{constructor(ce,oe=U.now){this.schedulerActionCtor=ce,this.now=oe}schedule(ce,oe=0,fe){return new this.schedulerActionCtor(this,ce).schedule(fe,oe)}}U.now=p.l.now;class k extends U{constructor(ce,oe=U.now){super(ce,oe),this.actions=[],this._active=!1}flush(ce){const{actions:oe}=this;if(this._active)return void oe.push(ce);let fe;this._active=!0;do{if(fe=ce.execute(ce.state,ce.delay))break}while(ce=oe.shift());if(this._active=!1,fe){for(;ce=oe.shift();)ce.unsubscribe();throw fe}}}},4986:(yt,be,F)=>{F.d(be,{z:()=>k});var p=F(4408);const k=new(F(7565).v)(p.o)},6063:(yt,be,F)=>{F.d(be,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(yt,be,F)=>{F.d(be,{z:()=>p});const p={setTimeout(U,k,...ee){const{delegate:ce}=p;return ce?.setTimeout?ce.setTimeout(U,k,...ee):setTimeout(U,k,...ee)},clearTimeout(U){const{delegate:k}=p;return(k?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(yt,be,F)=>{F.d(be,{h:()=>U});const U=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,be,F)=>{F.d(be,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(yt,be,F)=>{F.d(be,{_6:()=>oe,jO:()=>ee,yG:()=>ce});var p=F(576);function k(fe){return fe[fe.length-1]}function ee(fe){return(0,p.m)(k(fe))?fe.pop():void 0}function ce(fe){return function U(fe){return fe&&(0,p.m)(fe.schedule)}(k(fe))?fe.pop():void 0}function oe(fe,le){return"number"==typeof k(fe)?fe.pop():le}},8737:(yt,be,F)=>{function p(U,k){if(U){const ee=U.indexOf(k);0<=ee&&U.splice(ee,1)}}F.d(be,{P:()=>p})},3888:(yt,be,F)=>{function p(U){const ee=U(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}F.d(be,{d:()=>p})},2806:(yt,be,F)=>{F.d(be,{O:()=>ee,x:()=>k});var p=F(2416);let U=null;function k(ce){if(p.v.useDeprecatedSynchronousErrorHandling){const oe=!U;if(oe&&(U={errorThrown:!1,error:null}),ce(),oe){const{errorThrown:fe,error:le}=U;if(U=null,fe)throw le}}else ce()}function ee(ce){p.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=ce)}},9672:(yt,be,F)=>{function p(U,k,ee,ce=0,oe=!1){const fe=k.schedule(function(){ee(),oe?U.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(U.add(fe),!oe)return fe}F.d(be,{f:()=>p})},4671:(yt,be,F)=>{function p(U){return U}F.d(be,{y:()=>p})},1144:(yt,be,F)=>{F.d(be,{z:()=>p});const p=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(yt,be,F)=>{F.d(be,{D:()=>U});var p=F(576);function U(k){return Symbol.asyncIterator&&(0,p.m)(k?.[Symbol.asyncIterator])}},576:(yt,be,F)=>{function p(U){return"function"==typeof U}F.d(be,{m:()=>p})},3670:(yt,be,F)=>{F.d(be,{c:()=>k});var p=F(8822),U=F(576);function k(ee){return(0,U.m)(ee[p.L])}},6495:(yt,be,F)=>{F.d(be,{T:()=>k});var p=F(2202),U=F(576);function k(ee){return(0,U.m)(ee?.[p.h])}},8239:(yt,be,F)=>{F.d(be,{t:()=>U});var p=F(576);function U(k){return(0,p.m)(k?.then)}},3260:(yt,be,F)=>{F.d(be,{L:()=>ee,Q:()=>k});var p=F(655),U=F(576);function k(ce){return(0,p.FC)(this,arguments,function*(){const fe=ce.getReader();try{for(;;){const{value:le,done:he}=yield(0,p.qq)(fe.read());if(he)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(le)}}finally{fe.releaseLock()}})}function ee(ce){return(0,U.m)(ce?.getReader)}},4482:(yt,be,F)=>{F.d(be,{A:()=>U,e:()=>k});var p=F(576);function U(ee){return(0,p.m)(ee?.lift)}function k(ee){return ce=>{if(U(ce))return ce.lift(function(oe){try{return ee(oe,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(yt,be,F)=>{F.d(be,{U:()=>k,z:()=>U});var p=F(4671);function U(...ee){return k(ee)}function k(ee){return 0===ee.length?p.y:1===ee.length?ee[0]:function(oe){return ee.reduce((fe,le)=>le(fe),oe)}}},7849:(yt,be,F)=>{F.d(be,{h:()=>k});var p=F(2416),U=F(3410);function k(ee){U.z.setTimeout(()=>{const{onUnhandledError:ce}=p.v;if(!ce)throw ee;ce(ee)})}},4532:(yt,be,F)=>{function p(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>p})},655:(yt,be,F)=>{function ee(se,de){var ge={};for(var xe in se)Object.prototype.hasOwnProperty.call(se,xe)&&de.indexOf(xe)<0&&(ge[xe]=se[xe]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(xe=Object.getOwnPropertySymbols(se);Le<xe.length;Le++)de.indexOf(xe[Le])<0&&Object.prototype.propertyIsEnumerable.call(se,xe[Le])&&(ge[xe[Le]]=se[xe[Le]])}return ge}function Q(se,de,ge,xe){return new(ge||(ge=Promise))(function(Ve,tt){function nt(ft){try{wt(xe.next(ft))}catch(Ye){tt(Ye)}}function fn(ft){try{wt(xe.throw(ft))}catch(Ye){tt(Ye)}}function wt(ft){ft.done?Ve(ft.value):function Le(Ve){return Ve instanceof ge?Ve:new ge(function(tt){tt(Ve)})}(ft.value).then(nt,fn)}wt((xe=xe.apply(se,de||[])).next())})}function Me(se){return this instanceof Me?(this.v=se,this):new Me(se)}function Re(se,de,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,xe=ge.apply(se,de||[]),Ve=[];return Le={},tt("next"),tt("throw"),tt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function tt(Ut){xe[Ut]&&(Le[Ut]=function(mn){return new Promise(function(Mn,rn){Ve.push([Ut,mn,Mn,rn])>1||nt(Ut,mn)})})}function nt(Ut,mn){try{!function fn(Ut){Ut.value instanceof Me?Promise.resolve(Ut.value.v).then(wt,ft):Ye(Ve[0][2],Ut)}(xe[Ut](mn))}catch(Mn){Ye(Ve[0][3],Mn)}}function wt(Ut){nt("next",Ut)}function ft(Ut){nt("throw",Ut)}function Ye(Ut,mn){Ut(mn),Ve.shift(),Ve.length&&nt(Ve[0][0],Ve[0][1])}}function He(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,de=se[Symbol.asyncIterator];return de?de.call(se):(se=function et(se){var de="function"==typeof Symbol&&Symbol.iterator,ge=de&&se[de],xe=0;if(ge)return ge.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&xe>=se.length&&(se=void 0),{value:se&&se[xe++],done:!se}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),ge={},xe("next"),xe("throw"),xe("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function xe(Ve){ge[Ve]=se[Ve]&&function(tt){return new Promise(function(nt,fn){!function Le(Ve,tt,nt,fn){Promise.resolve(fn).then(function(wt){Ve({value:wt,done:nt})},tt)}(nt,fn,(tt=se[Ve](tt)).done,tt.value)})}}}F.d(be,{FC:()=>Re,KL:()=>He,_T:()=>ee,mG:()=>Q,qq:()=>Me})},4650:(yt,be,F)=>{F.d(be,{$8M:()=>xc,$WT:()=>Nr,$Z:()=>uy,AFp:()=>KI,ALo:()=>bl,AaK:()=>le,CRH:()=>vv,CZH:()=>mg,CqO:()=>Rp,D6c:()=>yb,EJc:()=>JI,F4k:()=>oE,FYo:()=>Ld,FiY:()=>bo,GfV:()=>zm,Gpc:()=>j,JOm:()=>Bi,LFG:()=>Be,Lbi:()=>YC,Lck:()=>FC,MMx:()=>cv,NdJ:()=>ll,OlP:()=>Sn,Oqu:()=>Up,P3R:()=>Hi,PXZ:()=>ib,Q6J:()=>cl,QGY:()=>xp,Qsj:()=>sp,R0b:()=>Qr,RDi:()=>vD,Rgc:()=>Ls,SBq:()=>Jc,Sil:()=>Rv,Suo:()=>hn,TTD:()=>mo,TgZ:()=>Xd,X6Q:()=>lw,XFs:()=>ut,Xpm:()=>ns,Xts:()=>km,Y36:()=>Bd,YKP:()=>lI,YNc:()=>vi,Yjl:()=>Dn,Yz7:()=>Ye,Z0I:()=>rn,ZZ4:()=>Fl,_Bn:()=>ov,_UZ:()=>ku,_Vd:()=>Fd,_c5:()=>Zv,_uU:()=>pl,aQg:()=>Kh,c2e:()=>QC,cJS:()=>mn,cg1:()=>mh,dDg:()=>jh,dqk:()=>Ct,eFA:()=>Vv,ekj:()=>$y,eoX:()=>za,f3M:()=>rt,g9A:()=>YI,h0i:()=>Ku,hGG:()=>Ew,iGM:()=>MI,ifc:()=>ie,ip1:()=>qI,jDz:()=>Zu,kL8:()=>It,lG2:()=>bt,lcZ:()=>_I,lqb:()=>bu,lri:()=>Fv,n5z:()=>Cf,oAB:()=>J,q4F:()=>p0,qLn:()=>Xc,qOj:()=>qd,qZA:()=>eh,rWj:()=>$h,sBO:()=>dw,s_b:()=>ja,soG:()=>yg,tb:()=>QI,tp0:()=>du,uIk:()=>al,vHH:()=>pe,vpe:()=>Si,wAp:()=>Y,xp6:()=>C0,z2F:()=>qa,zSh:()=>u0,zs3:()=>Su});var p=F(7579),U=F(727),k=F(9751),ee=F(6451),ce=F(3099);function oe(i){for(let s in i)if(i[s]===oe)return s;throw Error("Could not find renamed property on target object.")}function fe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const H=oe({__forward_ref__:oe});function j(i){return i.__forward_ref__=j,i.toString=function(){return le(this())},i}function Q(i){return Oe(i)?i():i}function Oe(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===j}function me(i){return i&&!!i.\u0275providers}const et="https://g.co/ng/security#xss";class pe extends Error{constructor(s,a){super(De(s,a)),this.code=s}}function De(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function Ae(i){return"string"==typeof i?i:null==i?"":String(i)}function He(i,s){throw new pe(-201,!1)}function tt(i,s){null==i&&function nt(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Ye(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Mn(i){return yn(i,Qn)||yn(i,ln)}function rn(i){return null!==Mn(i)}function yn(i,s){return i.hasOwnProperty(s)?i[s]:null}function zn(i){return i&&(i.hasOwnProperty(Dr)||i.hasOwnProperty(vn))?i[Dr]:null}const Qn=oe({\u0275prov:oe}),Dr=oe({\u0275inj:oe}),ln=oe({ngInjectableDef:oe}),vn=oe({ngInjectorDef:oe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Fn;function _n(i){const s=Fn;return Fn=i,s}function Ln(i,s,a){const c=Mn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ut.Optional?null:void 0!==s?s:void He(le(i))}const Ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),un={},Vn="__NG_DI_FLAG__",hr="ngTempTokenPath",Un="ngTokenPath",Rr=/\n/gm,Ot="\u0275",Ir="__source";let kt;function fr(i){const s=kt;return kt=i,s}function Bn(i,s=ut.Default){if(void 0===kt)throw new pe(-203,!1);return null===kt?Ln(i,void 0,s):kt.get(i,s&ut.Optional?null:void 0,s)}function Be(i,s=ut.Default){return(function ir(){return Fn}()||Bn)(Q(i),s)}function rt(i,s=ut.Default){return Be(i,vt(s))}function vt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Rt(i){const s=[];for(let a=0;a<i.length;a++){const c=Q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new pe(900,!1);let d,h=ut.Default;for(let y=0;y<c.length;y++){const E=c[y],w=$(E);"number"==typeof w?-1===w?d=E.token:h|=w:d=E}s.push(Be(d,h))}else s.push(Be(c))}return s}function $t(i,s){return i[Vn]=s,i.prototype[Vn]=s,i}function $(i){return i[Vn]}function M(i){return{toString:i}.toString()}var T=(()=>((T=T||{})[T.OnPush=0]="OnPush",T[T.Default=1]="Default",T))(),ie=(()=>{return(i=ie||(ie={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ie;var i})();const Pe={},Ne=[],st=oe({\u0275cmp:oe}),Je=oe({\u0275dir:oe}),Xt=oe({\u0275pipe:oe}),En=oe({\u0275mod:oe}),St=oe({\u0275fac:oe}),pn=oe({__NG_ELEMENT_ID__:oe});let _s=0;function ns(i){return M(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===T.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ne,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ie.Emulated,id:"c"+_s++,styles:i.styles||Ne,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=i.dependencies,y=i.features;return d.inputs=je(i.inputs,c),d.outputs=je(i.outputs),y&&y.forEach(E=>E(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(co).filter(Wn):null,d.pipeDefs=h?()=>("function"==typeof h?h():h).map(dn).filter(Wn):null,d})}function co(i){return _t(i)||nn(i)}function Wn(i){return null!==i}function J(i){return M(()=>({type:i.type,bootstrap:i.bootstrap||Ne,declarations:i.declarations||Ne,imports:i.imports||Ne,exports:i.exports||Ne,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function je(i,s){if(null==i)return Pe;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=c,s&&(s[d]=h)}return a}const bt=ns;function Dn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function _t(i){return i[st]||null}function nn(i){return i[Je]||null}function dn(i){return i[Xt]||null}function Nr(i){const s=_t(i)||nn(i)||dn(i);return null!==s&&s.standalone}function bn(i,s){const a=i[En]||null;if(!a&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}const Or=0,ct=1,Lt=2,$n=3,Cr=4,Ei=5,sr=6,Li=7,On=8,Us=9,Bs=10,jt=11,Es=12,Vi=13,$s=14,rs=15,pr=16,Zo=17,Ii=18,Gr=19,Xr=20,Xa=21,Pn=22,Yo=1,js=2,Qo=7,is=8,Is=9,br=10;function Pr(i){return Array.isArray(i)&&"object"==typeof i[Yo]}function ui(i){return Array.isArray(i)&&!0===i[Yo]}function ss(i){return 0!=(4&i.flags)}function lo(i){return i.componentOffset>-1}function Jo(i){return 1==(1&i.flags)}function kr(i){return null!==i.template}function cf(i){return 0!=(256&i[Lt])}function Ds(i,s){return i.hasOwnProperty(St)?i[St]:null}class go{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function mo(){return na}function na(i){return i.type.prototype.ngOnChanges&&(i.setInput=wi),eu}function eu(){const i=os(this),s=i?.current;if(s){const a=i.previous;if(a===Pe)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function wi(i,s,a,c){const d=this.declaredInputs[a],h=os(i)||function yc(i,s){return i[ra]=s}(i,{previous:Pe,current:null}),y=h.current||(h.current={}),E=h.previous,w=E[d];y[d]=new go(w&&w.currentValue,s,E===Pe),i[c]=s}mo.ngInherit=!0;const ra="__ngSimpleChanges__";function os(i){return i[ra]||null}const Wr=function(i,s,a){};function P(i){for(;Array.isArray(i);)i=i[Or];return i}function W(i,s){return P(s[i])}function ne(i,s){return P(s[i.index])}function Ze(i,s){return i.data[s]}function en(i,s){const a=s[i];return Pr(a)?a:a[Or]}function In(i){return 64==(64&i[Lt])}function Ft(i,s){return null==s?null:i[s]}function as(i){i[Ii]=0}function ci(i,s){i[Ei]+=s;let a=i,c=i[$n];for(;null!==c&&(1===s&&1===a[Ei]||-1===s&&0===a[Ei]);)c[Ei]+=s,a=c,c=c[$n]}const Pt={lFrame:Yg(null),bindingsEnabled:!0};function lf(){return Pt.bindingsEnabled}function ve(){return Pt.lFrame.lView}function cn(){return Pt.lFrame.tView}function Tr(){let i=Wg();for(;null!==i&&64===i.type;)i=i.parent;return i}function Wg(){return Pt.lFrame.currentTNode}function cs(i,s){const a=Pt.lFrame;a.currentTNode=i,a.isParent=s}function _c(){return Pt.lFrame.isParent}function yo(){return Pt.lFrame.bindingIndex++}function gf(i,s){const a=Pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ws(s)}function Ws(i){Pt.lFrame.currentDirectiveIndex=i}function Kg(){return Pt.lFrame.currentQueryIndex}function mf(i){Pt.lFrame.currentQueryIndex=i}function C_(i){const s=i[ct];return 2===s.type?s.declTNode:1===s.type?i[sr]:null}function Zg(i,s,a){if(a&ut.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&ut.Host||(d=C_(h),null===d||(h=h[rs],10&d.type))););if(null===d)return!1;s=d,i=h}const c=Pt.lFrame=b_();return c.currentTNode=s,c.lView=i,!0}function yf(i){const s=b_(),a=i[ct];Pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function b_(){const i=Pt.lFrame,s=null===i?null:i.child;return null===s?Yg(i):s}function Yg(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Qg(){const i=Pt.lFrame;return Pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Jg=Qg;function Xg(){const i=Qg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function li(){return Pt.lFrame.selectedIndex}function Cs(i){Pt.lFrame.selectedIndex=i}function Tn(){const i=Pt.lFrame;return Ze(i.tView,i.selectedIndex)}function ru(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:A}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(a,A)}}function Jl(i,s,a){Dc(i,s,3,a)}function ca(i,s,a,c){(3&i[Lt])===a&&Dc(i,s,a,c)}function wc(i,s){let a=i[Lt];(3&a)===s&&(a&=2047,a+=1,i[Lt]=a)}function Dc(i,s,a,c){const h=c??-1,y=s.length-1;let E=0;for(let w=void 0!==c?65535&i[Ii]:0;w<y;w++)if("number"==typeof s[w+1]){if(E=s[w],null!=c&&E>=c)break}else s[w]<0&&(i[Ii]+=65536),(E<h||-1==h)&&(iu(i,a,s,w),i[Ii]=(4294901760&i[Ii])+w+2),w++}function iu(i,s,a,c){const d=a[c]<0,h=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[Lt]>>11<i[Ii]>>16&&(3&i[Lt])===s){i[Lt]+=2048,Wr(4,E,h);try{h.call(E)}finally{Wr(5,E,h)}}}else{Wr(4,E,h);try{h.call(E)}finally{Wr(5,E,h)}}}const la=-1;class vo{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Cc(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const h=a[c++],y=a[c++],E=a[c++];i.setAttribute(s,y,E,h)}else{const h=d,y=a[++c];da(h)?i.setProperty(s,h,y):i.setAttribute(s,h,y),c++}}return c}function au(i){return 3===i||4===i||6===i}function da(i){return 64===i.charCodeAt(0)}function bs(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||bc(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function bc(i,s,a,c,d){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[h+1]=d));if(c===i[h+1])return void(i[h+2]=d)}h++,null!==c&&h++,null!==d&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==d&&i.splice(h++,0,d)}function ed(i){return i!==la}function ha(i){return 32767&i}function _o(i,s){let a=function tm(i){return i>>16}(i),c=s;for(;a>0;)c=c[rs],a--;return c}let Tc=!0;function Ts(i){const s=Tc;return Tc=i,s}const If=255,uu=5;let nd=0;const di={};function fa(i,s){const a=id(i,s);if(-1!==a)return a;const c=s[ct];c.firstCreatePass&&(i.injectorIndex=s.length,cu(c.data,i),cu(s,null),cu(c.blueprint,null));const d=sd(i,s),h=i.injectorIndex;if(ed(d)){const y=ha(d),E=_o(d,s),w=E[ct].data;for(let C=0;C<8;C++)s[h+C]=E[y+C]|w[y+C]}return s[h+8]=d,h}function cu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function id(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function sd(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=cd(d),null===c)return la;if(a++,d=d[rs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return la}function Sc(i,s,a){!function rd(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(pn)&&(c=a[pn]),null==c&&(c=a[pn]=nd++);const d=c&If;s.data[i+(d>>uu)]|=1<<d}(i,s,a)}function wf(i,s,a){if(a&ut.Optional||void 0!==i)return i;He()}function ad(i,s,a,c){if(a&ut.Optional&&void 0===c&&(c=null),!(a&(ut.Self|ut.Host))){const d=i[Us],h=_n(void 0);try{return d?d.get(s,c,a&ut.Optional):Ln(s,c,a&ut.Optional)}finally{_n(h)}}return wf(c,0,a)}function Df(i,s,a,c=ut.Default,d){if(null!==i){if(1024&s[Lt]){const y=function im(i,s,a,c,d){let h=i,y=s;for(;null!==h&&null!==y&&1024&y[Lt]&&!(256&y[Lt]);){const E=Ac(h,y,a,c|ut.Self,di);if(E!==di)return E;let w=h.parent;if(!w){const C=y[Xa];if(C){const A=C.get(a,di,c);if(A!==di)return A}w=cd(y),y=y[rs]}h=w}return d}(i,s,a,c,di);if(y!==di)return y}const h=Ac(i,s,a,c,di);if(h!==di)return h}return ad(s,a,c,d)}function Ac(i,s,a,c,d){const h=function O_(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(pn)?i[pn]:void 0;return"number"==typeof s?s>=0?s&If:rm:s}(a);if("function"==typeof h){if(!Zg(s,i,c))return c&ut.Host?wf(d,0,c):ad(s,a,c,d);try{const y=h(c);if(null!=y||c&ut.Optional)return y;He()}finally{Jg()}}else if("number"==typeof h){let y=null,E=id(i,s),w=la,C=c&ut.Host?s[pr][sr]:null;for((-1===E||c&ut.SkipSelf)&&(w=-1===E?sd(i,s):s[E+8],w!==la&&Mc(c,!1)?(y=s[ct],E=ha(w),s=_o(w,s)):E=-1);-1!==E;){const A=s[ct];if(ud(h,E,A.data)){const V=nm(E,s,a,y,c,C);if(V!==di)return V}w=s[E+8],w!==la&&Mc(c,s[ct].data[E+8]===C)&&ud(h,E,s)?(y=A,E=ha(w),s=_o(w,s)):E=-1}}return d}function nm(i,s,a,c,d,h){const y=s[ct],E=y.data[i+8],A=Eo(E,y,a,null==c?lo(E)&&Tc:c!=y&&0!=(3&E.type),d&ut.Host&&h===E);return null!==A?Io(s,y,A,E):di}function Eo(i,s,a,c,d){const h=i.providerIndexes,y=s.data,E=1048575&h,w=i.directiveStart,A=h>>20,q=d?E+A:i.directiveEnd;for(let te=c?E:E+A;te<q;te++){const Ee=y[te];if(te<w&&a===Ee||te>=w&&Ee.type===a)return te}if(d){const te=y[w];if(te&&kr(te)&&te.type===a)return w}return null}function Io(i,s,a,c){let d=i[a];const h=s.data;if(function Ef(i){return i instanceof vo}(d)){const y=d;y.resolving&&function Me(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Te(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ae(i)}(h[a]));const E=Ts(y.canSeeViewProviders);y.resolving=!0;const w=y.injectImpl?_n(y.injectImpl):null;Zg(i,c,ut.Default);try{d=i[a]=y.factory(void 0,h,i,c),s.firstCreatePass&&a>=c.directiveStart&&function _f(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(c){const y=na(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==w&&_n(w),Ts(E),y.resolving=!1,Jg()}}return d}function ud(i,s,a){return!!(a[s+(i>>uu)]&1<<i)}function Mc(i,s){return!(i&ut.Self||i&ut.Host&&s)}class pa{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Df(this._tNode,this._lView,s,vt(c),a)}}function rm(){return new pa(Tr(),ve())}function Cf(i){return M(()=>{const s=i.prototype.constructor,a=s[St]||ga(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const h=d[St]||ga(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function ga(i){return Oe(i)?()=>{const s=ga(Q(i));return s&&s()}:Ds(i)}function cd(i){const s=i[ct],a=s.type;return 2===a?s.declTNode:1===a?i[sr]:null}function xc(i){return function od(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const h=a[d];if(au(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(Tr(),i)}const ma="__parameters__";function va(i,s,a){return M(()=>{const c=function Tf(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...h){if(this instanceof d)return c.apply(this,h),this;const y=new d(...h);return E.annotation=y,E;function E(w,C,A){const V=w.hasOwnProperty(ma)?w[ma]:Object.defineProperty(w,ma,{value:[]})[ma];for(;V.length<=A;)V.push(null);return(V[A]=V[A]||[]).push(y),w}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Sn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ye({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Do(i,s){i.forEach(a=>Array.isArray(a)?Do(a,s):s(a))}function um(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Oc(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function hi(i,s,a){let c=As(i,s);return c>=0?i[1|c]=a:(c=~c,function F_(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Mf(i,s){const a=As(i,s);if(a>=0)return i[1|a]}function As(i,s){return function dm(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const h=c+(d-c>>1),y=i[h<<a];if(s===y)return h<<a;y>s?d=h:c=h+1}return~(d<<a)}(i,s,1)}const bo=$t(va("Optional"),8),du=$t(va("SkipSelf"),4);var Bi=(()=>((Bi=Bi||{})[Bi.Important=1]="Important",Bi[Bi.DashCase=2]="DashCase",Bi))();const Mo=new Map;let wd=0;const wr="__ngContext__";function Kn(i,s){Pr(s)?(i[wr]=s[Xr],function Ff(i){Mo.set(i[Xr],i)}(s)):i[wr]=s}let K;function Se(i,s){return K(i,s)}function dt(i){const s=i[$n];return ui(s)?s[$n]:s}function pi(i){return Qs(i[Vi])}function hs(i){return Qs(i[Cr])}function Qs(i){for(;null!==i&&!ui(i);)i=i[Cr];return i}function $i(i,s,a,c,d){if(null!=c){let h,y=!1;ui(c)?h=c:Pr(c)&&(y=!0,c=c[Or]);const E=P(c);0===i&&null!==a?null==d?Ca(s,a,E):_u(s,a,E,d||null,!0):1===i&&null!==a?_u(s,a,E,d||null,!0):2===i?function Wf(i,s,a){const c=Td(i,s);c&&function VS(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=h&&function bm(i,s,a,c,d){const h=a[Qo];h!==P(a)&&$i(s,i,c,h,d);for(let E=br;E<a.length;E++){const w=a[E];Iu(w[ct],w,i,s,c,h)}}(s,i,h,a,d)}}function xo(i,s,a){return i.createElement(s,a)}function vu(i,s){const a=i[Is],c=a.indexOf(s),d=s[$n];512&s[Lt]&&(s[Lt]&=-513,ci(d,-1)),a.splice(c,1)}function Em(i,s){if(i.length<=br)return;const a=br+s,c=i[a];if(c){const d=c[Zo];null!==d&&d!==i&&vu(d,c),s>0&&(i[a-1][Cr]=c[Cr]);const h=Oc(i,br+s);!function yu(i,s){Iu(i,s,s[jt],2,null,null),s[Or]=null,s[sr]=null}(c[ct],c);const y=h[Gr];null!==y&&y.detachView(h[ct]),c[$n]=null,c[Cr]=null,c[Lt]&=-65}return c}function U_(i,s){if(!(128&s[Lt])){const a=s[jt];a.destroyNode&&Iu(i,s,a,3,null,null),function jf(i){let s=i[Vi];if(!s)return Im(i[ct],i);for(;s;){let a=null;if(Pr(s))a=s[Vi];else{const c=s[br];c&&(a=c)}if(!a){for(;s&&!s[Cr]&&s!==i;)Pr(s)&&Im(s[ct],s),s=s[$n];null===s&&(s=i),Pr(s)&&Im(s[ct],s),a=s&&s[Cr]}s=a}}(s)}}function Im(i,s){if(!(128&s[Lt])){s[Lt]&=-65,s[Lt]|=128,function fD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof vo)){const h=a[c+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const E=d[h[y]],w=h[y+1];Wr(4,E,w);try{w.call(E)}finally{Wr(5,E,w)}}else{Wr(4,d,h);try{h.call(d)}finally{Wr(5,d,h)}}}}}(i,s),function hD(i,s){const a=i.cleanup,c=s[Li];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+3];y>=0?c[d=y]():c[d=-y].unsubscribe(),h+=2}else{const y=c[d=a[h+1]];a[h].call(y)}if(null!==c){for(let h=d+1;h<c.length;h++)(0,c[h])();s[Li]=null}}(i,s),1===s[ct].type&&s[jt].destroy();const a=s[Zo];if(null!==a&&ui(s[$n])){a!==s[$n]&&vu(a,s);const c=s[Gr];null!==c&&c.detachView(i)}!function Ni(i){Mo.delete(i[Xr])}(s)}}function Hf(i,s,a){return function bd(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Or];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:h}=i.data[c.directiveStart+d];if(h===ie.None||h===ie.Emulated)return null}return ne(c,a)}}(i,s.parent,a)}function _u(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Ca(i,s,a){i.appendChild(s,a)}function Gf(i,s,a,c,d){null!==c?_u(i,s,a,c,d):Ca(i,s,a)}function Td(i,s){return i.parentNode(s)}let zf,Sm,Zf,Eu=function jc(i,s,a){return 40&i.type?ne(i,a):null};function Sd(i,s,a,c){const d=Hf(i,c,s),h=s[jt],E=function $c(i,s,a){return Eu(i,s,a)}(c.parent||s[sr],c,s);if(null!=d)if(Array.isArray(a))for(let w=0;w<a.length;w++)Gf(h,d,a[w],E,!1);else Gf(h,d,a,E,!1);void 0!==zf&&zf(h,c,s,a,d)}function Ro(i,s){if(null!==s){const a=s.type;if(3&a)return ne(s,i);if(4&a)return Dm(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Ro(i,c);{const d=i[s.index];return ui(d)?Dm(-1,d):P(d)}}if(32&a)return Se(s,i)()||P(i[s.index]);{const c=B_(i,s);return null!==c?Array.isArray(c)?c[0]:Ro(dt(i[pr]),c):Ro(i,s.next)}}return null}function B_(i,s){return null!==s?i[pr][sr].projection[s.projection]:null}function Dm(i,s){const a=br+i+1;if(a<s.length){const c=s[a],d=c[ct].firstChild;if(null!==d)return Ro(c,d)}return s[Qo]}function Cm(i,s,a,c,d,h,y){for(;null!=a;){const E=c[a.index],w=a.type;if(y&&0===s&&(E&&Kn(P(E),c),a.flags|=2),32!=(32&a.flags))if(8&w)Cm(i,s,a.child,c,d,h,!1),$i(s,i,d,E,h);else if(32&w){const C=Se(a,c);let A;for(;A=C();)$i(s,i,d,A,h);$i(s,i,d,E,h)}else 16&w?$_(i,s,c,a,d,h):$i(s,i,d,E,h);a=y?a.projectionNext:a.next}}function Iu(i,s,a,c,d,h){Cm(a,c,i.firstChild,s,d,h,!1)}function $_(i,s,a,c,d,h){const y=a[pr],w=y[sr].projection[c.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)$i(s,i,d,w[C],h);else Cm(i,s,w,y[$n],d,h,!0)}function Tm(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Gc(i,s,a){const{mergedAttrs:c,classes:d,styles:h}=a;null!==c&&Cc(i,s,c),null!==d&&Tm(i,s,d),null!==h&&function j_(i,s,a){i.setAttribute(s,"style",a)}(i,s,h)}function vD(i){Sm=i}function q_(i){return function Am(){if(void 0===Zf&&(Zf=null,Ct.trustedTypes))try{Zf=Ct.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Zf}()?.createScriptURL(i)||i}class K_{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${et})`}}function ba(i){return i instanceof K_?i.changingThisBreaksApplicationSecurity:i}function Md(i,s){const a=function Q_(i){return i instanceof K_&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${et})`)}return a===s}const CD=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Lr=(()=>((Lr=Lr||{})[Lr.NONE=0]="NONE",Lr[Lr.HTML=1]="HTML",Lr[Lr.STYLE=2]="STYLE",Lr[Lr.SCRIPT=3]="SCRIPT",Lr[Lr.URL=4]="URL",Lr[Lr.RESOURCE_URL=5]="RESOURCE_URL",Lr))();function MD(i){const s=Od();return s?s.sanitize(Lr.URL,i)||"":Md(i,"URL")?ba(i):function Wc(i){return(i=String(i)).match(CD)?i:"unsafe:"+i}(Ae(i))}function tp(i){const s=Od();if(s)return q_(s.sanitize(Lr.RESOURCE_URL,i)||"");if(Md(i,"ResourceURL"))return q_(ba(i));throw new pe(904,!1)}function Hi(i,s,a){return function Pm(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?tp:MD}(s,a)(i)}function Od(){const i=ve();return i&&i[Es]}const km=new Sn("ENVIRONMENT_INITIALIZER"),Fm=new Sn("INJECTOR",-1),Pd=new Sn("INJECTOR_DEF_TYPES");class r0{get(s,a=un){if(a===un){const c=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw c.name="NullInjectorError",c}return a}}function Kc(...i){return{\u0275providers:Zc(0,i),\u0275fromNgModule:!0}}function Zc(i,...s){const a=[],c=new Set;let d;return Do(s,h=>{const y=h;Lm(y,a,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&s0(d,a),a}function s0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Du(d,h=>{s.push(h)})}}function Lm(i,s,a,c){if(!(i=Q(i)))return!1;let d=null,h=zn(i);const y=!h&&_t(i);if(h||y){if(y&&!y.standalone)return!1;d=i}else{const w=i.ngModule;if(h=zn(w),!h)return!1;d=w}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const w="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of w)Lm(C,s,a,c)}}else{if(!h)return!1;{if(null!=h.imports&&!E){let C;c.add(d);try{Do(h.imports,A=>{Lm(A,s,a,c)&&(C||(C=[]),C.push(A))})}finally{}void 0!==C&&s0(C,s)}if(!E){const C=Ds(d)||(()=>new d);s.push({provide:d,useFactory:C,deps:Ne},{provide:Pd,useValue:d,multi:!0},{provide:km,useValue:()=>Be(d),multi:!0})}const w=h.providers;null==w||E||Du(w,A=>{s.push(A)})}}return d!==i&&void 0!==i.providers}function Du(i,s){for(let a of i)me(a)&&(a=a.\u0275providers),Array.isArray(a)?Du(a,s):s(a)}const PD=oe({provide:String,useValue:oe});function Vm(i){return null!==i&&"object"==typeof i&&PD in i}function Cu(i){return"function"==typeof i}const u0=new Sn("Set Injector scope."),ip={},Um={};let Yc;function No(){return void 0===Yc&&(Yc=new r0),Yc}class bu{}class c0 extends bu{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$m(s,y=>this.processProvider(y)),this.records.set(Fm,Qc(void 0,this)),d.has("environment")&&this.records.set(bu,Qc(void 0,this));const h=this.records.get(u0);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Pd.multi,Ne,ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=fr(this),c=_n(void 0);try{return s()}finally{fr(a),_n(c)}}get(s,a=un,c=ut.Default){this.assertNotDestroyed(),c=vt(c);const d=fr(this),h=_n(void 0);try{if(!(c&ut.SkipSelf)){let E=this.records.get(s);if(void 0===E){const w=function d0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Sn}(s)&&Mn(s);E=w&&this.injectableDefInScope(w)?Qc(Bm(s),ip):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&ut.Self?No():this.parent).get(s,a=c&ut.Optional&&a===un?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[hr]=y[hr]||[]).unshift(le(s)),d)throw y;return function B(i,s,a,c){const d=i[hr];throw s[Ir]&&d.unshift(s[Ir]),i.message=function N(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Ot?i.slice(2):i;let d=le(s);if(Array.isArray(s))d=s.map(le).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];h.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Rr,"\n  ")}`}("\n"+i.message,d,a,c),i[Un]=d,i[hr]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{_n(h),fr(d)}}resolveInjectorInitializers(){const s=fr(this),a=_n(void 0);try{const c=this.get(km.multi,Ne,ut.Self);for(const d of c)d()}finally{fr(s),_n(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(le(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(s){let a=Cu(s=Q(s))?s:Q(s&&s.provide);const c=function LD(i){return Vm(i)?Qc(void 0,i.useValue):Qc(l0(i),ip)}(s);if(Cu(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Qc(void 0,ip,!0),d.factory=()=>Rt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===ip&&(a.value=Um,a.value=a.factory()),"object"==typeof a.value&&a.value&&function UD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Bm(i){const s=Mn(i),a=null!==s?s.factory:Ds(i);if(null!==a)return a;if(i instanceof Sn)throw new pe(204,!1);if(i instanceof Function)return function FD(i){const s=i.length;if(s>0)throw function _a(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new pe(204,!1);const a=function Yn(i){const s=i&&(i[Qn]||i[ln]);return s?(function rr(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),s):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new pe(204,!1)}function l0(i,s,a){let c;if(Cu(i)){const d=Q(i);return Ds(d)||Bm(d)}if(Vm(i))c=()=>Q(i.useValue);else if(function a0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Rt(i.deps||[]));else if(function o0(i){return!(!i||!i.useExisting)}(i))c=()=>Be(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function VD(i){return!!i.deps}(i))return Ds(d)||Bm(d);c=()=>new d(...Rt(i.deps))}return c}function Qc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function $m(i,s){for(const a of i)Array.isArray(a)?$m(a,s):a&&me(a)?$m(a.\u0275providers,s):s(a)}class jm{}class Hm{}class BD{resolveComponentFactory(s){throw function Gm(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Fd=(()=>{class i{}return i.NULL=new BD,i})();function $D(){return Oo(Tr(),ve())}function Oo(i,s){return new Jc(ne(i,s))}let Jc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=$D,i})();function h0(i){return i instanceof Jc?i.nativeElement:i}class Ld{}let sp=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function f0(){const i=ve(),a=en(Tr().index,i);return(Pr(a)?a:i)[jt]}(),i})(),Vd=(()=>{class i{}return i.\u0275prov=Ye({token:i,providedIn:"root",factory:()=>null}),i})();class zm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const p0=new zm("15.2.0"),Wm={},qm="ngOriginalError";function Km(i){return i[qm]}class Xc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Km(s);for(;a&&Km(a);)a=Km(a);return a||null}}function Po(i){return i instanceof Function?i():i}function y0(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===c||i.charCodeAt(d+h)<=32)return d}a=d+1}}const v0="ng-template";function QD(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==y0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function _0(i){return 4===i.type&&i.value!==v0}function JD(i,s,a){return s===(4!==i.type||a?i.value:v0)}function E0(i,s,a){let c=4;const d=i.attrs||[],h=function Qm(i){for(let s=0;s<i.length;s++)if(au(i[s]))return s;return i.length}(d);let y=!1;for(let E=0;E<s.length;E++){const w=s[E];if("number"!=typeof w){if(!y)if(4&c){if(c=2|1&c,""!==w&&!JD(i,w,a)||""===w&&1===s.length){if(Gi(c))return!1;y=!0}}else{const C=8&c?w:s[++E];if(8&c&&null!==i.attrs){if(!QD(i.attrs,C,a)){if(Gi(c))return!1;y=!0}continue}const V=XD(8&c?"class":w,d,_0(i),a);if(-1===V){if(Gi(c))return!1;y=!0;continue}if(""!==C){let q;q=V>h?"":d[V+1].toLowerCase();const te=8&c?q:null;if(te&&-1!==y0(te,C,0)||2&c&&C!==q){if(Gi(c))return!1;y=!0}}}}else{if(!y&&!Gi(c)&&!Gi(w))return!1;if(y&&Gi(w))continue;y=!1,c=w|1&c}}return Gi(c)||y}function Gi(i){return 0==(1&i)}function XD(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let h=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)h=!0;else{if(1===y||2===y){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=h?1:2}return-1}return function eC(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Ym(i,s,a=!1){for(let c=0;c<s.length;c++)if(E0(i,s[c],a))return!0;return!1}function Ud(i,s){return i?":not("+s.trim()+")":s}function op(i){let s=i[0],a=1,c=2,d="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Gi(y)&&(s+=Ud(h,d),d=""),c=y,h=h||!Gi(c);a++}return""!==d&&(s+=Ud(h,d)),s}const Kt={};function C0(i){b0(cn(),ve(),li()+i,!1)}function b0(i,s,a,c){if(!c)if(3==(3&s[Lt])){const h=i.preOrderCheckHooks;null!==h&&Jl(s,h,a)}else{const h=i.preOrderHooks;null!==h&&ca(s,h,0,a)}Cs(a)}function A0(i,s=null,a=null,c){const d=bi(i,s,a,c);return d.resolveInjectorInitializers(),d}function bi(i,s=null,a=null,c,d=new Set){const h=[a||Ne,Kc(i)];return c=c||("object"==typeof i?void 0:le(i)),new c0(h,s||No(),c||null,d)}let Su=(()=>{class i{static create(a,c){if(Array.isArray(a))return A0({name:""},c,a,"");{const d=a.name??"";return A0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=un,i.NULL=new r0,i.\u0275prov=Ye({token:i,providedIn:"any",factory:()=>Be(Fm)}),i.__NG_ELEMENT_ID__=-1,i})();function Bd(i,s=ut.Default){const a=ve();return null===a?Be(i,s):Df(Tr(),a,Q(i),s)}function uy(){throw new Error("invalid")}function F0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c+1];if(-1!==h){const y=i.data[h];mf(a[c]),y.contentQueries(2,s[h],h)}}}function lp(i,s,a,c,d,h,y,E,w,C,A){const V=s.blueprint.slice();return V[Or]=d,V[Lt]=76|c,(null!==A||i&&1024&i[Lt])&&(V[Lt]|=1024),as(V),V[$n]=V[rs]=i,V[On]=a,V[Bs]=y||i&&i[Bs],V[jt]=E||i&&i[jt],V[Es]=w||i&&i[Es]||null,V[Us]=C||i&&i[Us]||null,V[sr]=h,V[Xr]=function Ia(){return wd++}(),V[Xa]=A,V[pr]=2==s.type?i[pr]:V,V}function tl(i,s,a,c,d){let h=i.data[s];if(null===h)h=function cy(i,s,a,c,d){const h=Wg(),y=_c(),w=i.data[s]=function JS(i,s,a,c,d,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=w),null!==h&&(y?null==h.child&&null!==w.parent&&(h.child=w):null===h.next&&(h.next=w)),w}(i,s,a,c,d),function pf(){return Pt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=a,h.value=c,h.attrs=d;const y=function aa(){const i=Pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return cs(h,!0),h}function $d(i,s,a,c){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function dp(i,s,a){yf(s);try{const c=i.viewQuery;null!==c&&Ma(1,c,a);const d=i.template;null!==d&&cC(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&F0(i,s),i.staticViewQueries&&Ma(2,i.viewQuery,a);const h=i.components;null!==h&&function uC(i,s){for(let a=0;a<s.length;a++)yy(i,s[a])}(s,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Lt]&=-5,Xg()}}function hp(i,s,a,c){const d=s[Lt];if(128!=(128&d)){yf(s);try{as(s),function ua(i){return Pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cC(i,s,a,2,c);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&Jl(s,C,null)}else{const C=i.preOrderHooks;null!==C&&ca(s,C,0,null),wc(s,0)}if(function gC(i){for(let s=pi(i);null!==s;s=hs(s)){if(!s[js])continue;const a=s[Is];for(let c=0;c<a.length;c++){const d=a[c];512&d[Lt]||ci(d[$n],1),d[Lt]|=512}}}(s),function mi(i){for(let s=pi(i);null!==s;s=hs(s))for(let a=br;a<s.length;a++){const c=s[a],d=c[ct];In(c)&&hp(d,c,d.template,c[On])}}(s),null!==i.contentQueries&&F0(i,s),y){const C=i.contentCheckHooks;null!==C&&Jl(s,C)}else{const C=i.contentHooks;null!==C&&ca(s,C,1),wc(s,1)}!function aC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Cs(~d);else{const h=d,y=a[++c],E=a[++c];gf(y,h),E(2,s[h])}}}finally{Cs(-1)}}(i,s);const E=i.components;null!==E&&function L0(i,s){for(let a=0;a<s.length;a++)vp(i,s[a])}(s,E);const w=i.viewQuery;if(null!==w&&Ma(2,w,c),y){const C=i.viewCheckHooks;null!==C&&Jl(s,C)}else{const C=i.viewHooks;null!==C&&ca(s,C,2),wc(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Lt]&=-41,512&s[Lt]&&(s[Lt]&=-513,ci(s[$n],-1))}finally{Xg()}}}function cC(i,s,a,c,d){const h=li(),y=2&c;try{Cs(-1),y&&s.length>Pn&&b0(i,s,Pn,!1),Wr(y?2:0,d),a(c,d)}finally{Cs(h),Wr(y?3:1,d)}}function ly(i,s,a){if(ss(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}function Sa(i,s,a){lf()&&(function mp(i,s,a,c){const d=a.directiveStart,h=a.directiveEnd;lo(a)&&function ii(i,s,a){const c=ne(s,i),d=Rn(a),h=i[Bs],y=zi(i,lp(i,d,null,a.onPush?32:16,c,s,h,h.createRenderer(c,a),null,null,null));i[s.index]=y}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||fa(a,s),Kn(c,s);const y=a.initialInputs;for(let E=d;E<h;E++){const w=i.data[E],C=Io(s,i,E,a);Kn(C,s),null!==y&&B0(0,E-d,C,w,0,y),kr(w)&&(en(a.index,s)[On]=Io(s,i,E,a))}}(i,s,a,ne(a,s)),64==(64&a.flags)&&rl(i,s,a))}function dy(i,s,a=ne){const c=s.localNames;if(null!==c){let d=s.index+1;for(let h=0;h<c.length;h+=2){const y=c[h+1],E=-1===y?a(s,i):i[y];i[d++]=E}}}function Rn(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=nl(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function nl(i,s,a,c,d,h,y,E,w,C){const A=Pn+c,V=A+d,q=function V0(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Kt);return a}(A,V),te="function"==typeof C?C():C;return q[ct]={type:i,blueprint:q,template:a,queries:null,viewQuery:E,declTNode:s,data:q.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:w,consts:te,incompleteFirstPass:!1}}function gs(i,s,a,c){const d=wp(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&vy(i).push(c,d.length-1))}function U0(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const h=i[d];null===c?Ie(a,s,d,h):c.hasOwnProperty(d)&&Ie(a,s,c[d],h)}return a}function Ie(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function wn(i,s){const a=en(s,i);16&a[Lt]||(a[Lt]|=32)}function Et(i,s,a,c){let d=!1;if(lf()){const h=null===c?null:{"":-1},y=function hy(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];if(Ym(s,y.selectors,!1))if(c||(c=[]),kr(y))if(null!==y.findHostDirectiveDefs){const E=[];d=d||new Map,y.findHostDirectiveDefs(y,E,d),c.unshift(...E,y),fy(i,s,E.length)}else c.unshift(y),fy(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let E,w;null===y?E=w=null:[E,w]=y,null!==E&&(d=!0,pp(i,s,a,E,h,w)),h&&function fC(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new pe(-301,!1);c.push(s[d],h)}}}(a,c,h)}return a.mergedAttrs=bs(a.mergedAttrs,a.attrs),d}function pp(i,s,a,c,d,h){for(let C=0;C<c.length;C++)Sc(fa(a,s),i,c[C].type);!function gi(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const A=c[C];A.providersResolver&&A.providersResolver(A)}let y=!1,E=!1,w=$d(i,s,c.length,null);for(let C=0;C<c.length;C++){const A=c[C];a.mergedAttrs=bs(a.mergedAttrs,A.hostAttrs),yp(i,a,s,w,A),pC(w,A,d),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const V=A.type.prototype;!y&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!E&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),w++}!function Au(i,s,a){const d=s.directiveEnd,h=i.data,y=s.attrs,E=[];let w=null,C=null;for(let A=s.directiveStart;A<d;A++){const V=h[A],q=a?a.get(V):null,Ee=q?q.outputs:null;w=U0(V.inputs,A,w,q?q.inputs:null),C=U0(V.outputs,A,C,Ee);const qe=null===w||null===y||_0(s)?null:gy(w,A,y);E.push(qe)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=8),w.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=w,s.outputs=C}(i,a,h)}function rl(i,s,a){const c=a.directiveStart,d=a.directiveEnd,h=a.index,y=function D_(){return Pt.lFrame.currentDirectiveIndex}();try{Cs(h);for(let E=c;E<d;E++){const w=i.data[E],C=s[E];Ws(E),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&hC(w,C)}}finally{Cs(-1),Ws(y)}}function hC(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function fy(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function pC(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;kr(s)&&(a[""]=i)}}function yp(i,s,a,c,d){i.data[c]=d;const h=d.factory||(d.factory=Ds(d.type)),y=new vo(h,kr(d),Bd);i.blueprint[c]=y,a[c]=y,function zt(i,s,a,c,d){const h=d.hostBindings;if(h){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const E=~s.index;(function gp(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,c,h)}}(i,s,c,$d(i,a,d.hostVars,Kt),d)}function si(i,s,a,c,d,h){const y=ne(i,s);!function py(i,s,a,c,d,h,y){if(null==h)i.removeAttribute(s,d,a);else{const E=null==y?Ae(h):y(h,c||"",d);i.setAttribute(s,d,E,a)}}(s[jt],y,h,i.value,a,c,d)}function B0(i,s,a,c,d,h){const y=h[s];if(null!==y){const E=c.setInput;for(let w=0;w<y.length;){const C=y[w++],A=y[w++],V=y[w++];null!==E?c.setInput(a,V,C,A):a[A]=V}}}function gy(i,s,a){let c=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;if(i.hasOwnProperty(h)){null===c&&(c=[]);const y=i[h];for(let E=0;E<y.length;E+=2)if(y[E]===s){c.push(h,y[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function my(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function vp(i,s){const a=en(s,i);if(In(a)){const c=a[ct];48&a[Lt]?hp(c,a,c.template,a[On]):a[Ei]>0&&_p(a)}}function _p(i){for(let c=pi(i);null!==c;c=hs(c))for(let d=br;d<c.length;d++){const h=c[d];if(In(h))if(512&h[Lt]){const y=h[ct];hp(y,h,y.template,h[On])}else h[Ei]>0&&_p(h)}const a=i[ct].components;if(null!==a)for(let c=0;c<a.length;c++){const d=en(a[c],i);In(d)&&d[Ei]>0&&_p(d)}}function yy(i,s){const a=en(s,i),c=a[ct];(function Ep(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),dp(c,a,a[On])}function zi(i,s){return i[Vi]?i[$s][Cr]=s:i[Vi]=s,i[$s]=s,s}function jd(i){for(;i;){i[Lt]|=32;const s=dt(i);if(cf(i)&&!s)return i;i=s}return null}function Ip(i,s,a,c=!0){const d=s[Bs];d.begin&&d.begin();try{hp(i,s,i.template,a)}catch(y){throw c&&_y(s,y),y}finally{d.end&&d.end()}}function Ma(i,s,a){mf(0),s(i,a)}function wp(i){return i[Li]||(i[Li]=[])}function vy(i){return i.cleanup||(i.cleanup=[])}function _y(i,s){const a=i[Us],c=a?a.get(Xc,null):null;c&&c.handleError(s)}function il(i,s,a,c,d){for(let h=0;h<a.length;){const y=a[h++],E=a[h++],w=s[y],C=i.data[y];null!==C.setInput?C.setInput(w,d,c,E):w[E]=d}}function sl(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?h=E:1==h?d=he(d,E):2==h&&(c=he(c,E+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function ol(i,s,a,c,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&c.push(P(h)),ui(h))for(let E=br;E<h.length;E++){const w=h[E],C=w[ct].firstChild;null!==C&&ol(w[ct],w,C,c)}const y=a.type;if(8&y)ol(i,s,a.child,c);else if(32&y){const E=Se(a,s);let w;for(;w=E();)c.push(w)}else if(16&y){const E=B_(s,a);if(Array.isArray(E))c.push(...E);else{const w=dt(s[pr]);ol(w[ct],w,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class Hd{get rootNodes(){const s=this._lView,a=s[ct];return ol(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(s){this._lView[On]=s}get destroyed(){return 128==(128&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[$n];if(ui(s)){const a=s[is],c=a?a.indexOf(this):-1;c>-1&&(Em(s,c),Oc(a,c))}this._attachedToViewContainer=!1}U_(this._lView[ct],this._lView)}onDestroy(s){gs(this._lView[ct],this._lView,null,s)}markForCheck(){jd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-65}reattach(){this._lView[Lt]|=64}detectChanges(){Ip(this._lView[ct],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bc(i,s){Iu(i,s,s[jt],2,null,null)}(this._lView[ct],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=s}}class yC extends Hd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ip(s[ct],s,s[On],!1)}checkNoChanges(){}get context(){return null}}class Dp extends Fd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=_t(s);return new zd(a,this.ngModule)}}function Ey(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Gd{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=vt(c);const d=this.injector.get(s,Wm,c);return d!==Wm||a===Wm?d:this.parentInjector.get(s,a,c)}}class zd extends Hm{get inputs(){return Ey(this.componentDef.inputs)}get outputs(){return Ey(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function w0(i){return i.map(op).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let h=(d=d||this.ngModule)instanceof bu?d:d?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new Gd(s,h):s,E=y.get(Ld,null);if(null===E)throw new pe(407,!1);const w=y.get(Vd,null),C=E.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",V=c?function lC(i,s,a){return i.selectRootElement(s,a===ie.ShadowDom)}(C,c,this.componentDef.encapsulation):xo(C,A,function vC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),q=this.componentDef.onPush?288:272,te=nl(0,null,null,1,0,null,null,null,null,null),Ee=lp(null,te,null,q,null,null,E,C,w,y,null);let qe,ot;yf(Ee);try{const mt=this.componentDef;let Nt,Ue=null;mt.findHostDirectiveDefs?(Nt=[],Ue=new Map,mt.findHostDirectiveDefs(mt,Nt,Ue),Nt.push(mt)):Nt=[mt];const Wt=function _C(i,s){const a=i[ct],c=Pn;return i[c]=s,tl(a,c,2,"#host",null)}(Ee,V),nr=function Cp(i,s,a,c,d,h,y,E){const w=d[ct];!function Iy(i,s,a,c){for(const d of i)s.mergedAttrs=bs(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(sl(s,s.mergedAttrs,!0),null!==a&&Gc(c,a,s))}(c,i,s,y);const C=h.createRenderer(s,a),A=lp(d,Rn(a),null,a.onPush?32:16,d[i.index],i,h,C,E||null,null,null);return w.firstCreatePass&&fy(w,i,c.length-1),zi(d,A),d[i.index]=A}(Wt,V,mt,Nt,Ee,E,C);ot=Ze(te,Pn),V&&function H0(i,s,a,c){if(c)Cc(i,a,["ng-version",p0.full]);else{const{attrs:d,classes:h}=function D0(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++c]):8===d&&a.push(h);else{if(!Gi(d))break;d=h}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Cc(i,a,d),h&&h.length>0&&Tm(i,a,h.join(" "))}}(C,mt,V,c),void 0!==a&&function G0(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const h=a[d];c.push(null!=h?Array.from(h):null)}}(ot,this.ngContentSelectors,a),qe=function j0(i,s,a,c,d,h){const y=Tr(),E=d[ct],w=ne(y,d);pp(E,d,y,a,null,c);for(let A=0;A<a.length;A++)Kn(Io(d,E,y.directiveStart+A,y),d);rl(E,d,y),w&&Kn(w,d);const C=Io(d,E,y.directiveStart+y.componentOffset,y);if(i[On]=d[On]=C,null!==h)for(const A of h)A(C,s);return ly(E,y,i),C}(nr,mt,Nt,Ue,Ee,[bp]),dp(te,Ee,null)}finally{Xg()}return new Wd(this.componentType,qe,Oo(ot,Ee),Ee,ot)}}class Wd extends jm{constructor(s,a,c,d,h){super(),this.location=c,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new yC(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const h=this._rootLView;il(h[ct],h,d,s,a),wn(h,this._tNode.index)}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function bp(){const i=Tr();ru(ve()[ct],i)}function qd(i){let s=function Tp(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(kr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new pe(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Kd(i.inputs),y.declaredInputs=Kd(i.declaredInputs),y.outputs=Kd(i.outputs);const E=d.hostBindings;E&&EC(i,E);const w=d.viewQuery,C=d.contentQueries;if(w&&z0(i,w),C&&W0(i,C),fe(i.inputs,d.inputs),fe(i.declaredInputs,d.declaredInputs),fe(i.outputs,d.outputs),kr(d)&&d.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let y=0;y<h.length;y++){const E=h[y];E&&E.ngInherit&&E(i),E===qd&&(a=!1)}}s=Object.getPrototypeOf(s)}!function wy(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=bs(d.hostAttrs,a=bs(a,d.hostAttrs))}}(c)}function Kd(i){return i===Pe?{}:i===Ne?[]:i}function z0(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function W0(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,h)=>{s(c,d,h),a(c,d,h)}:s}function EC(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}let Ar=null;function Xs(){if(!Ar){const i=Ct.Symbol;if(i&&i.iterator)Ar=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ar=c)}}}return Ar}function Ap(i){return!!by(i)&&(Array.isArray(i)||!(i instanceof Map)&&Xs()in i)}function by(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function yi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function al(i,s,a,c){const d=ve();return yi(d,yo(),s)&&(cn(),si(Tn(),d,i,s,a,c)),al}function vi(i,s,a,c,d,h,y,E){const w=ve(),C=cn(),A=i+Pn,V=C.firstCreatePass?function iE(i,s,a,c,d,h,y,E,w){const C=s.consts,A=tl(s,i,4,y||null,Ft(C,E));Et(s,a,A,Ft(C,w)),ru(s,A);const V=A.tViews=nl(2,A,c,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,A),V.queries=s.queries.embeddedTView(A)),A}(A,C,w,s,a,c,d,h,y):C.data[A];cs(V,!1);const q=w[jt].createComment("");Sd(C,w,q,V),Kn(q,w),zi(w,w[A]=my(q,w,q,V)),Jo(V)&&Sa(C,w,V),null!=y&&dy(w,V,E)}function cl(i,s,a){const c=ve();return yi(c,yo(),s)&&function Sr(i,s,a,c,d,h,y,E){const w=ne(s,a);let A,C=s.inputs;!E&&null!=C&&(A=C[c])?(il(i,a,A,c,d),lo(s)&&wn(a,s.index)):3&s.type&&(c=function fp(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,h.setProperty(w,c,d))}(cn(),Tn(),c,i,s,c[jt],a,!1),cl}function Mp(i,s,a,c,d){const y=d?"class":"style";il(i,a,s.inputs[y],y,c)}function Xd(i,s,a,c){const d=ve(),h=cn(),y=Pn+i,E=d[jt],w=d[y]=xo(E,s,function x_(){return Pt.lFrame.currentNamespace}()),C=h.firstCreatePass?function Ay(i,s,a,c,d,h,y){const E=s.consts,C=tl(s,i,2,d,Ft(E,h));return Et(s,a,C,Ft(E,y)),null!==C.attrs&&sl(C,C.attrs,!1),null!==C.mergedAttrs&&sl(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(y,h,d,0,s,a,c):h.data[y];return cs(C,!0),Gc(E,w,C),32!=(32&C.flags)&&Sd(h,d,w,C),0===function ei(){return Pt.lFrame.elementDepthCount}()&&Kn(w,d),function us(){Pt.lFrame.elementDepthCount++}(),Jo(C)&&(Sa(h,d,C),ly(h,C,d)),null!==c&&dy(d,C),Xd}function eh(){let i=Tr();_c()?function hf(){Pt.lFrame.isParent=!1}():(i=i.parent,cs(i,!1));const s=i;!function oa(){Pt.lFrame.elementDepthCount--}();const a=cn();return a.firstCreatePass&&(ru(a,i),ss(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function em(i){return 0!=(8&i.flags)}(s)&&Mp(a,s,ve(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function ou(i){return 0!=(16&i.flags)}(s)&&Mp(a,s,ve(),s.stylesWithoutHost,!1),eh}function ku(i,s,a,c){return Xd(i,s,a,c),eh(),ku}function xp(i){return!!i&&"function"==typeof i.then}function oE(i){return!!i&&"function"==typeof i.subscribe}const Rp=oE;function ll(i,s,a,c){const d=ve(),h=cn(),y=Tr();return function xy(i,s,a,c,d,h,y){const E=Jo(c),C=i.firstCreatePass&&vy(i),A=s[On],V=wp(s);let q=!0;if(3&c.type||y){const qe=ne(c,s),ot=y?y(qe):qe,mt=V.length,Nt=y?Wt=>y(P(Wt[c.index])):c.index;let Ue=null;if(!y&&E&&(Ue=function aE(i,s,a,c){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const y=d[h];if(y===a&&d[h+1]===c){const E=s[Li],w=d[h+2];return E.length>w?E[w]:null}"string"==typeof y&&(h+=2)}return null}(i,s,d,c.index)),null!==Ue)(Ue.__ngLastListenerFn__||Ue).__ngNextListenerFn__=h,Ue.__ngLastListenerFn__=h,q=!1;else{h=uE(c,s,A,h,!1);const Wt=a.listen(ot,d,h);V.push(h,Wt),C&&C.push(d,Nt,mt,mt+1)}}else h=uE(c,s,A,h,!1);const te=c.outputs;let Ee;if(q&&null!==te&&(Ee=te[d])){const qe=Ee.length;if(qe)for(let ot=0;ot<qe;ot+=2){const nr=s[Ee[ot]][Ee[ot+1]].subscribe(h),_r=V.length;V.push(h,nr),C&&C.push(d,c.index,_r,-(_r+1))}}}(h,d,d[jt],y,i,s,c),ll}function Ry(i,s,a,c){try{return Wr(6,s,a),!1!==a(c)}catch(d){return _y(i,d),!1}finally{Wr(7,s,a)}}function uE(i,s,a,c,d){return function h(y){if(y===Function)return c;jd(i.componentOffset>-1?en(i.index,s):s);let w=Ry(s,a,c,y),C=h.__ngNextListenerFn__;for(;C;)w=Ry(s,a,C,y)&&w,C=C.__ngNextListenerFn__;return d&&!1===w&&(y.preventDefault(),y.returnValue=!1),w}}function Fu(i,s){return i<<17|s<<2}function Lo(i){return i>>17&32767}function Lu(i){return 2|i}function Fs(i){return(131068&i)>>2}function Py(i,s){return-131069&i|s<<2}function ky(i){return 1|i}function Vo(i,s,a,c,d){const h=i[a+1],y=null===s;let E=c?Lo(h):Fs(h),w=!1;for(;0!==E&&(!1===w||y);){const A=i[E+1];pE(i[E],s)&&(w=!0,i[E+1]=c?ky(A):Lu(A)),E=c?Lo(A):Fs(A)}w&&(i[a+1]=c?Lu(h):ky(h))}function pE(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&As(i,s)>=0}function $y(i,s){return function vs(i,s,a,c){const d=ve(),h=cn(),y=function zs(i){const s=Pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function EE(i,s,a,c){const d=i.data;if(null===d[a+1]){const h=d[li()],y=function hl(i,s){return s>=i.expandoStartIndex}(i,a);(function Vp(i,s){return 0!=(i.flags&(s?8:16))})(h,c)&&null===s&&!y&&(s=!1),s=function mr(i,s,a,c){const d=function nu(i){const s=Pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=fl(a=jy(null,i,s,a,c),s.attrs,c),h=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=jy(d,i,s,a,c),null===h){let w=function IE(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Fs(c))return i[Lo(c)]}(i,s,c);void 0!==w&&Array.isArray(w)&&(w=jy(null,i,s,w[1],c),w=fl(w,s.attrs,c),function bC(i,s,a,c){i[Lo(a?s.classBindings:s.styleBindings)]=c}(i,s,c,w))}else h=function TC(i,s,a){let c;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)c=fl(c,i[h].hostAttrs,a);return fl(c,s.attrs,a)}(i,s,c)}return void 0!==h&&(c?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,c),function DC(i,s,a,c,d,h){let y=h?s.classBindings:s.styleBindings,E=Lo(y),w=Fs(y);i[c]=a;let A,C=!1;if(Array.isArray(a)?(A=a[1],(null===A||As(a,A)>0)&&(C=!0)):A=a,d)if(0!==w){const q=Lo(i[E+1]);i[c+1]=Fu(q,E),0!==q&&(i[q+1]=Py(i[q+1],c)),i[E+1]=function Pp(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=Fu(E,0),0!==E&&(i[E+1]=Py(i[E+1],c)),E=c;else i[c+1]=Fu(w,0),0===E?E=c:i[w+1]=Py(i[w+1],c),w=c;C&&(i[c+1]=Lu(i[c+1])),Vo(i,A,c,!0),Vo(i,A,c,!1),function ch(i,s,a,c,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&As(h,s)>=0&&(a[c+1]=ky(a[c+1]))}(s,A,i,c,h),y=Fu(E,w),h?s.classBindings=y:s.styleBindings=y}(d,h,s,a,y,c)}}(h,i,y,c),s!==Kt&&yi(d,y,s)&&function Gy(i,s,a,c,d,h,y,E){if(!(3&s.type))return;const w=i.data,C=w[E+1],A=function fE(i){return 1==(1&i)}(C)?no(w,s,a,d,Fs(C),y):void 0;dh(A)||(dh(h)||function Xn(i){return 2==(2&i)}(C)&&(h=no(w,null,a,d,E,y)),function mD(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let h=-1===c.indexOf("-")?void 0:Bi.DashCase;null==d?i.removeStyle(a,c,h):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),h|=Bi.Important),i.setStyle(a,c,d,h))}}(c,y,W(li(),a),d,h))}(h,h.data[li()],d,d[jt],i,d[y+1]=function DE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(ba(i)))),i}(s,a),c,y)}(i,s,null,!0),$y}function jy(i,s,a,c,d){let h=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(h=s[E],c=fl(c,h.hostAttrs,d),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function fl(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),hi(i,y,!!a||s[++h]))}return void 0===i?null:i}function no(i,s,a,c,d,h){const y=null===s;let E;for(;d>0;){const w=i[d],C=Array.isArray(w),A=C?w[1]:w,V=null===A;let q=a[d+1];q===Kt&&(q=V?Ne:void 0);let te=V?Mf(q,c):A===c?q:void 0;if(C&&!dh(te)&&(te=Mf(w,c)),dh(te)&&(E=te,y))return E;const Ee=i[d+1];d=y?Lo(Ee):Fs(Ee)}if(null!==s){let w=h?s.residualClasses:s.residualStyles;null!=w&&(E=Mf(w,c))}return E}function dh(i){return void 0!==i}function pl(i,s=""){const a=ve(),c=cn(),d=i+Pn,h=c.firstCreatePass?tl(c,d,1,s,null):c.data[d],y=a[d]=function wa(i,s){return i.createText(s)}(a[jt],s);Sd(c,a,y,h),cs(h,!1)}function Up(i){return hh("",i,""),Up}function hh(i,s,a){const c=ve(),d=function Ra(i,s,a,c){return yi(i,yo(),a)?s+Ae(a)+c:Kt}(c,i,s,a);return d!==Kt&&function Ps(i,s,a){const c=W(s,i);!function Da(i,s,a){i.setValue(s,a)}(i[jt],c,a)}(c,li(),d),hh}const Bo=void 0;var ze=["en",[["a","p"],["AM","PM"],Bo],[["AM","PM"],Bo,Bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bo,"{1} 'at' {0}",Bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MC(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Hn={};function mh(i){const s=function ke(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=VE(s);if(a)return a;const c=s.split("-")[0];if(a=VE(c),a)return a;if("en"===c)return ze;throw new pe(701,!1)}function It(i){return mh(i)[Y.PluralCase]}function VE(i){return i in Hn||(Hn[i]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[i]),Hn[i]}var Y=(()=>((Y=Y||{})[Y.LocaleId=0]="LocaleId",Y[Y.DayPeriodsFormat=1]="DayPeriodsFormat",Y[Y.DayPeriodsStandalone=2]="DayPeriodsStandalone",Y[Y.DaysFormat=3]="DaysFormat",Y[Y.DaysStandalone=4]="DaysStandalone",Y[Y.MonthsFormat=5]="MonthsFormat",Y[Y.MonthsStandalone=6]="MonthsStandalone",Y[Y.Eras=7]="Eras",Y[Y.FirstDayOfWeek=8]="FirstDayOfWeek",Y[Y.WeekendRange=9]="WeekendRange",Y[Y.DateFormat=10]="DateFormat",Y[Y.TimeFormat=11]="TimeFormat",Y[Y.DateTimeFormat=12]="DateTimeFormat",Y[Y.NumberSymbols=13]="NumberSymbols",Y[Y.NumberFormats=14]="NumberFormats",Y[Y.CurrencyCode=15]="CurrencyCode",Y[Y.CurrencySymbol=16]="CurrencySymbol",Y[Y.CurrencyName=17]="CurrencyName",Y[Y.Currencies=18]="Currencies",Y[Y.Directionality=19]="Directionality",Y[Y.PluralCase=20]="PluralCase",Y[Y.ExtraData=21]="ExtraData",Y))();const vl="en-US";let BE=vl;function on(i,s,a,c,d){if(i=Q(i),Array.isArray(i))for(let h=0;h<i.length;h++)on(i[h],s,a,c,d);else{const h=cn(),y=ve();let E=Cu(i)?i:Q(i.provide),w=l0(i);const C=Tr(),A=1048575&C.providerIndexes,V=C.directiveStart,q=C.providerIndexes>>20;if(Cu(i)||!i.multi){const te=new vo(w,d,Bd),Ee=Th(E,s,d?A:A+q,V);-1===Ee?(Sc(fa(C,y),h,E),Cn(h,i,s.length),s.push(E),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(te),y.push(te)):(a[Ee]=te,y[Ee]=te)}else{const te=Th(E,s,A+q,V),Ee=Th(E,s,A,A+q),ot=Ee>=0&&a[Ee];if(d&&!ot||!d&&!(te>=0&&a[te])){Sc(fa(C,y),h,E);const mt=function cI(i,s,a,c,d){const h=new vo(i,a,Bd);return h.multi=[],h.index=s,h.componentProviders=0,qu(h,d,c&&!a),h}(d?uI:sv,a.length,d,c,w);!d&&ot&&(a[Ee].providerFactory=mt),Cn(h,i,s.length,0),s.push(E),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(mt),y.push(mt)}else Cn(h,i,te>-1?te:Ee,qu(a[d?Ee:te],w,!d&&c));!d&&c&&ot&&a[Ee].componentProviders++}}}function Cn(i,s,a,c){const d=Cu(s),h=function kD(i){return!!i.useClass}(s);if(d||h){const w=(h?Q(s.useClass):s).prototype.ngOnDestroy;if(w){const C=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const A=C.indexOf(a);-1===A?C.push(a,[c,w]):C[A+1].push(c,w)}else C.push(a,w)}}}function qu(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Th(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function sv(i,s,a,c){return Sh(this.multi,[])}function uI(i,s,a,c){const d=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Io(a,a[ct],this.providerFactory.index,c);h=E.slice(0,y),Sh(d,h);for(let w=y;w<E.length;w++)h.push(E[w])}else h=[],Sh(d,h);return h}function Sh(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function ov(i,s=[]){return a=>{a.providersResolver=(c,d)=>function aI(i,s,a){const c=cn();if(c.firstCreatePass){const d=kr(i);on(a,c.data,c.blueprint,d,!0),on(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Ku{}class lI{}function FC(i,s){return new av(i,s??null)}class av extends Ku{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dp(this);const c=bn(s);this._bootstrapComponents=Po(c.bootstrap),this._r3Injector=bi(s,a,[{provide:Ku,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class uv extends lI{constructor(s){super(),this.moduleType=s}create(s){return new av(this.moduleType,s)}}class dI extends Ku{constructor(s,a,c){super(),this.componentFactoryResolver=new Dp(this),this.instance=null;const d=new c0([...s,{provide:Ku,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],a||No(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function cv(i,s,a=null){return new dI(i,s,a).injector}let LC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Zc(0,a.type),d=c.length>0?cv([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ye({token:i,providedIn:"environment",factory:()=>new i(Be(bu))}),i})();function Zu(i){i.getStandaloneInjector=s=>s.get(LC).getOrCreateStandaloneInjector(i)}function sg(i,s,a,c,d,h){const y=s+a;return yi(i,y,d)?function ks(i,s,a){return i[s]=a}(i,y+1,h?c.call(h,d):c(d)):function jr(i,s){const a=i[s];return a===Kt?void 0:a}(i,y+1)}function bl(i,s){const a=cn();let c;const d=i+Pn;a.firstCreatePass?(c=function vI(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const h=c.factory||(c.factory=Ds(c.type)),y=_n(Bd);try{const E=Ts(!1),w=h();return Ts(E),function sE(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,ve(),d,w),w}finally{_n(y)}}function _I(i,s,a){const c=i+Pn,d=ve(),h=function Dt(i,s){return i[s]}(d,c);return function xh(i,s){return i[ct].data[s].pure}(d,c)?sg(d,function ti(){const i=Pt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,h.transform,a,h):h.transform(a)}function ug(i){return s=>{setTimeout(i,void 0,s)}}const Si=class UC extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,h=a||(()=>null),y=c;if(s&&"object"==typeof s){const w=s;d=w.next?.bind(w),h=w.error?.bind(w),y=w.complete?.bind(w)}this.__isAsync&&(h=ug(h),d&&(d=ug(d)),y&&(y=ug(y)));const E=super.subscribe({next:d,error:h,complete:y});return s instanceof U.w0&&s.add(E),E}};function Ju(){return this._results[Xs()]()}class cg{get changes(){return this._changes||(this._changes=new Si)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xs(),c=cg.prototype;c[a]||(c[a]=Ju)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Ci(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function P_(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],h=s[c];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ls=(()=>{class i{}return i.__NG_ELEMENT_ID__=CI,i})();const DI=Ls,Tl=class extends DI{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=lp(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[Zo]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[Gr];return null!==y&&(d[Gr]=y.createEmbeddedView(c)),dp(c,d,s),new Hd(d)}};function CI(){return Rh(Tr(),ve())}function Rh(i,s){return 4&i.type?new Tl(s,i,Oo(i,s)):null}let ja=(()=>{class i{}return i.__NG_ELEMENT_ID__=BC,i})();function BC(){return mv(Tr(),ve())}const $C=ja,Zn=class extends $C{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Oo(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){const s=sd(this._hostTNode,this._hostLView);if(ed(s)){const a=_o(s,this._hostLView),c=ha(s);return new pa(a[ct].data[c+8],a)}return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Nh(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-br}createEmbeddedView(s,a,c){let d,h;"number"==typeof c?d=c:null!=c&&(d=c.index,h=c.injector);const y=s.createEmbeddedView(a||{},h);return this.insert(y,d),y}createComponent(s,a,c,d,h){const y=s&&!function Nc(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const V=a||{};E=V.index,c=V.injector,d=V.projectableNodes,h=V.environmentInjector||V.ngModuleRef}const w=y?s:new zd(_t(s)),C=c||this.parentInjector;if(!h&&null==w.ngModule){const q=(y?C:this.parentInjector).get(bu,null);q&&(h=q)}const A=w.create(C,d,void 0,h);return this.insert(A.hostView,E),A}insert(s,a){const c=s._lView,d=c[ct];if(function kn(i){return ui(i[$n])}(c)){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const V=c[$n],q=new Zn(V,V[sr],V[$n]);q.detach(q.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function _m(i,s,a,c){const d=br+c,h=a.length;c>0&&(a[d-1][Cr]=s),c<h-br?(s[Cr]=a[d],um(a,br+c,s)):(a.push(s),s[Cr]=null),s[$n]=a;const y=s[Zo];null!==y&&a!==y&&function Cd(i,s){const a=i[Is];s[pr]!==s[$n][$n][pr]&&(i[js]=!0),null===a?i[Is]=[s]:a.push(s)}(y,s);const E=s[Gr];null!==E&&E.insertView(i),s[Lt]|=64}(d,c,y,h);const E=Dm(h,y),w=c[jt],C=Td(w,y[Qo]);return null!==C&&function Dd(i,s,a,c,d,h){c[Or]=d,c[sr]=s,Iu(i,c,a,1,d,h)}(d,y[sr],w,c,C,E),s.attachToViewContainerRef(),um(Sl(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Nh(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Em(this._lContainer,a);c&&(Oc(Sl(this._lContainer),a),U_(c[ct],c))}detach(s){const a=this._adjustIndex(s,-1),c=Em(this._lContainer,a);return c&&null!=Oc(Sl(this._lContainer),a)?new Hd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Nh(i){return i[is]}function Sl(i){return i[is]||(i[is]=[])}function mv(i,s){let a;const c=s[i.index];if(ui(c))a=c;else{let d;if(8&i.type)d=P(c);else{const h=s[jt];d=h.createComment("");const y=ne(i,s);_u(h,Td(h,y),d,function gD(i,s){return i.nextSibling(s)}(h,y),!1)}s[i.index]=a=my(c,s,d,i),zi(s,a)}return new Zn(a,i,s)}class yv{constructor(s){this.queryList=s,this.matches=null}clone(){return new yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xu{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<c;h++){const y=a.getByIndex(h);d.push(this.queries[y.indexInDeclarationView].clone())}return new Xu(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==_v(s,a).matches&&this.queries[a].setDirty()}}class bI{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class lg{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(s,d);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new lg(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ha{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ha(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const h=c[d];this.matchTNodeWithReadOption(s,a,Go(a,h)),this.matchTNodeWithReadOption(s,a,Eo(a,s,h,!1,!1))}else c===Ls?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Eo(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Jc||d===ja||d===Ls&&4&a.type)this.addMatch(a.index,-2);else{const h=Eo(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Go(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function SI(i,s,a,c){return-1===a?function TI(i,s){return 11&i.type?Oo(i,s):4&i.type?Rh(i,s):null}(s,i):-2===a?function AI(i,s,a){return a===Jc?Oo(s,i):a===Ls?Rh(s,i):a===ja?mv(s,i):void 0}(i,s,c):Io(i,i[ct],a,s)}function ec(i,s,a,c){const d=s[Gr].queries[c];if(null===d.matches){const h=i.data,y=a.matches,E=[];for(let w=0;w<y.length;w+=2){const C=y[w];E.push(C<0?null:SI(s,h[C],y[w+1],a.metadata.read))}d.matches=E}return d.matches}function Oh(i,s,a,c){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const y=ec(i,s,d,a);for(let E=0;E<h.length;E+=2){const w=h[E];if(w>0)c.push(y[E/2]);else{const C=h[E+1],A=s[-w];for(let V=br;V<A.length;V++){const q=A[V];q[Zo]===q[$n]&&Oh(q[ct],q,C,c)}if(null!==A[Is]){const V=A[Is];for(let q=0;q<V.length;q++){const te=V[q];Oh(te[ct],te,C,c)}}}}}return c}function MI(i){const s=ve(),a=cn(),c=Kg();mf(c+1);const d=_v(a,c);if(i.dirty&&function jn(i){return 4==(4&i[Lt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?Oh(a,s,c,[]):ec(a,s,d,c);i.reset(h,h0),i.notifyOnChanges()}return!0}return!1}function hn(i,s,a,c){const d=cn();if(d.firstCreatePass){const h=Tr();(function RI(i,s,a){null===i.queries&&(i.queries=new lg),i.queries.track(new Ha(s,a))})(d,new bI(s,a,c),h.index),function Pi(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function zo(i,s,a){const c=new cg(4==(4&a));gs(i,s,c,c.destroy),null===s[Gr]&&(s[Gr]=new Xu),s[Gr].queries.push(new yv(c))}(d,ve(),a)}function vv(){return function xI(i,s){return i[Gr].queries[s].queryList}(ve(),Kg())}function _v(i,s){return i.queries.getByIndex(s)}function Uh(...i){}const qI=new Sn("Application Initializer");let mg=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Uh,this.reject=Uh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(xp(h))a.push(h);else if(Rp(h)){const y=new Promise((E,w)=>{h.subscribe({complete:E,error:w})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Be(qI,8))},i.\u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const KI=new Sn("AppId",{providedIn:"root",factory:function ZI(){return`${xv()}${xv()}${xv()}`}});function xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const YI=new Sn("Platform Initializer"),YC=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),QI=new Sn("appBootstrapListener");let QC=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const yg=new Sn("LocaleId",{providedIn:"root",factory:()=>rt(yg,ut.Optional|ut.SkipSelf)||function JC(){return typeof $localize<"u"&&$localize.locale||vl}()}),JI=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class tb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Rv=(()=>{class i{compileModuleSync(a){return new uv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=Po(bn(a).declarations).reduce((y,E)=>{const w=_t(E);return w&&y.push(new zd(w)),y},[]);return new tb(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ew=(()=>Promise.resolve(0))();function xl(i){typeof Zone>"u"?ew.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Qr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ic(){let i=Ct.requestAnimationFrame,s=Ct.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Pv(i){const s=()=>{!function Ov(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ct,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Eg(i),i.isCheckStableRunning=!0,_g(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Eg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,h,y,E)=>{try{return kv(i),a.invokeTask(d,h,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),tw(i)}},onInvoke:(a,c,d,h,y,E,w)=>{try{return kv(i),a.invoke(d,h,y,E,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),tw(i)}},onHasTask:(a,c,d,h)=>{a.hasTask(d,h),c===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Eg(i),_g(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qr.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(Qr.isInAngularZone())throw new pe(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+d,s,Bh,Uh,Uh);try{return h.runTask(y,a,c)}finally{h.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Bh={};function _g(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Eg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function kv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function tw(i){i._nesting--,_g(i)}class nw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Fv=new Sn(""),$h=new Sn("");let Ig,jh=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ig||(function rb(i){Ig=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qr.assertNotInAngularZone(),xl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xl(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Be(Qr),Be(za),Be($h))},i.\u0275prov=Ye({token:i,factory:i.\u0275fac}),i})(),za=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Ig?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Wa=null;const rw=new Sn("AllowMultipleToken"),Lv=new Sn("PlatformDestroyListeners"),Yi=!1;class ib{constructor(s,a){this.name=s,this.token=a}}function Vv(i,s,a=[]){const c=`Platform: ${s}`,d=new Sn(c);return(h=[])=>{let y=Nl();if(!y||y.injector.get(rw,!1)){const E=[...a,...h,{provide:d,useValue:!0}];i?i(E):function sw(i){if(Wa&&!Wa.get(rw,!1))throw new pe(400,!1);Wa=i;const s=i.get(aw);(function wg(i){const s=i.get(YI,null);s&&s.forEach(a=>a())})(i)}(function Dg(i=[],s){return Su.create({name:s,providers:[{provide:u0,useValue:"platform"},{provide:Lv,useValue:new Set([()=>Wa=null])},...i]})}(E,c))}return function Uv(i){const s=Nl();if(!s)throw new pe(401,!1);return s}()}}function Nl(){return Wa?.get(aw)??null}let aw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Hh(i,s){let a;return a="noop"===i?new nw:("zone.js"===i?void 0:i)||new Qr(s),a}(c?.ngZone,function Cg(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),h=[{provide:Qr,useValue:d}];return d.run(()=>{const y=Su.create({providers:h,parent:this.injector,name:a.moduleType.name}),E=a.create(y),w=E.injector.get(Xc,null);if(!w)throw new pe(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:A=>{w.handleError(A)}});E.onDestroy(()=>{ac(this._modules,E),C.unsubscribe()})}),function uw(i,s,a){try{const c=a();return xp(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(w,d,()=>{const C=E.injector.get(mg);return C.runInitializers(),C.donePromise.then(()=>(function NC(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(BE=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(yg,vl)||vl),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=Bv({},c);return function sc(i,s,a){const c=new uv(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const c=a.injector.get(qa);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new pe(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Lv,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Be(Su))},i.\u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Bv(i,s){return Array.isArray(s)?s.reduce(Bv,i):{...i,...s}}let qa=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new k.y(E=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{Qr.assertNotInAngularZone(),xl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Qr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{w.unsubscribe(),C.unsubscribe()}});this.isStable=(0,ee.T)(h,y.pipe((0,ce.B)()))}bootstrap(a,c){const d=a instanceof Hm;if(!this._injector.get(mg).done){!d&&Nr(a);throw new pe(405,Yi)}let y;y=d?a:this._injector.get(Fd).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function iw(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Ku),C=y.create(Su.NULL,[],c||y.selector,E),A=C.location.nativeElement,V=C.injector.get(Fv,null);return V?.registerApplication(A),C.onDestroy(()=>{this.detachView(C.hostView),ac(this.components,C),V?.unregisterApplication(A)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ac(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(QI,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ac(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new pe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Be(Qr),Be(bu),Be(Xc))},i.\u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ac(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function lw(){return!1}let dw=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ka,i})();function Ka(i){return function Pl(i,s,a){if(lo(i)&&!a){const c=en(i.index,s);return new Hd(c,c)}return 47&i.type?new Hd(s[pr],s):null}(Tr(),ve(),16==(16&i))}class Gv{constructor(){}supports(s){return Ap(s)}create(s){return new gb(s)}}const pb=(i,s)=>s;class gb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||pb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,h=null;for(;a||c;){const y=!c||a&&a.currentIndex<gw(c,d,h)?a:c,E=gw(y,d,h),w=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{h||(h=[]);const C=E-d,A=w-d;if(C!=A){for(let q=0;q<C;q++){const te=q<h.length?h[q]:h[q]=0,Ee=te+q;A<=Ee&&Ee<C&&(h[q]=te+1)}h[y.previousIndex]=A-C}}E!==w&&s(y,E,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ap(s))throw new pe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)h=s[E],y=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,h,y,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,E),c=!0),a=a._next}else d=0,function X0(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Xs()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new zv(a,c),h,d),s}_verifyReinsertion(s,a,c,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new pw),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class zv{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jr{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class pw{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Jr,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gw(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class mw{constructor(){}supports(s){return s instanceof Map||by(s)}create(){return new mb}}class mb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||by(s)))throw new pe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,y=d._next;return h&&(h._next=y),y&&(y._prev=h),d._next=null,d._prev=null,d}const c=new yw(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class yw{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vw(){return new Fl([new Gv])}let Fl=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||vw()),deps:[[i,new du,new bo]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new pe(901,!1)}}return i.\u0275prov=Ye({token:i,providedIn:"root",factory:vw}),i})();function Wv(){return new Kh([new mw])}let Kh=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Wv()),deps:[[i,new du,new bo]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new pe(901,!1)}}return i.\u0275prov=Ye({token:i,providedIn:"root",factory:Wv}),i})();const Zv=Vv(null,"core",[]);let Ew=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Be(qa))},i.\u0275mod=J({type:i}),i.\u0275inj=mn({}),i})();function yb(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(yt,be,F)=>{F.d(be,{Z:()=>Ke});var p=F(2090),U=F(4859),k=F(9681),ee=F(1877);class ce{constructor(pe,De){this._delegate=pe,this.firebase=De,(0,k._addComponent)(pe,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(pe,De=k._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(pe);return!Te.isInitialized()&&"EXPLICIT"===(null===(Ae=Te.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:De})}_removeServiceInstance(pe,De=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(De)}_addComponent(pe){(0,k._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,k._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function he(){const et=function le(et){const pe={},De={__esModule:!0,initializeApp:function Me(Z,re={}){const _e=k.initializeApp(Z,re);if((0,p.r3)(pe,_e.name))return pe[_e.name];const Qe=new et(_e,De);return pe[_e.name]=Qe,Qe},app:Te,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Z){const re=Z.name,_e=re.replace("-compat","");if(k._registerComponent(Z)&&"PUBLIC"===Z.type){const Qe=(Ge=Te())=>{if("function"!=typeof Ge[_e])throw fe.create("invalid-app-argument",{appName:re});return Ge[_e]()};void 0!==Z.serviceProps&&(0,p.ZB)(Qe,Z.serviceProps),De[_e]=Qe,et.prototype[_e]=function(...Ge){return this._getService.bind(this,re).apply(this,Z.multipleInstances?Ge:[])}}return"PUBLIC"===Z.type?De[_e]:null},removeApp:function Ae(Z){delete pe[Z]},useAsService:function He(Z,re){return"serverAuth"===re?null:re},modularAPIs:k}};function Te(Z){if(!(0,p.r3)(pe,Z=Z||k._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Z});return pe[Z]}return De.default=De,Object.defineProperty(De,"apps",{get:function Re(){return Object.keys(pe).map(Z=>pe[Z])}}),Te.App=et,De}(ce);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(De){(0,p.ZB)(et,De)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),et}(),j=new ee.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=H;!function me(et){(0,k.registerVersion)("@firebase/app-compat","0.2.3",et)}()},9681:(yt,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Yn,_DEFAULT_ENTRY_NAME:()=>Le,_addComponent:()=>fn,_addOrOverwriteComponent:()=>wt,_apps:()=>tt,_clearComponents:()=>mn,_components:()=>nt,_getProvider:()=>Ye,_registerComponent:()=>ft,_removeServiceInstance:()=>Ut,deleteApp:()=>Dr,getApp:()=>zn,getApps:()=>Qn,initializeApp:()=>rr,onLog:()=>ut,registerVersion:()=>vn,setLogLevel:()=>Fn});var p=F(5861),U=F(4859),k=F(1877),ee=F(2090),ce=F(8766);class oe{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function fe(Be){return"VERSION"===Be.getComponent()?.type}(rt)){const vt=rt.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(rt=>rt).join(" ")}}const le="@firebase/app",H=new k.Yd("@firebase/app"),Le="[DEFAULT]",Ve={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tt=new Map,nt=new Map;function fn(Be,we){try{Be.container.addComponent(we)}catch(rt){H.debug(`Component ${we.name} failed to register with FirebaseApp ${Be.name}`,rt)}}function wt(Be,we){Be.container.addOrOverwriteComponent(we)}function ft(Be){const we=Be.name;if(nt.has(we))return H.debug(`There were multiple attempts to register component ${we}.`),!1;nt.set(we,Be);for(const rt of tt.values())fn(rt,Be);return!0}function Ye(Be,we){const rt=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),Be.container.getProvider(we)}function Ut(Be,we,rt=Le){Ye(Be,we).clearInstance(rt)}function mn(){nt.clear()}const rn=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yn{constructor(we,rt,vt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}}const Yn="9.17.1";function rr(Be,we={}){let rt=Be;"object"!=typeof we&&(we={name:we});const vt=Object.assign({name:Le,automaticDataCollectionEnabled:!1},we),Rt=vt.name;if("string"!=typeof Rt||!Rt)throw rn.create("bad-app-name",{appName:String(Rt)});if(rt||(rt=(0,ee.aH)()),!rt)throw rn.create("no-options");const $t=tt.get(Rt);if($t){if((0,ee.vZ)(rt,$t.options)&&(0,ee.vZ)(vt,$t.config))return $t;throw rn.create("duplicate-app",{appName:Rt})}const $=new U.H0(Rt);for(const N of nt.values())$.addComponent(N);const B=new yn(rt,vt,$);return tt.set(Rt,B),B}function zn(Be=Le){const we=tt.get(Be);if(!we&&Be===Le)return rr();if(!we)throw rn.create("no-app",{appName:Be});return we}function Qn(){return Array.from(tt.values())}function Dr(Be){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(Be){const we=Be.name;tt.has(we)&&(tt.delete(we),yield Promise.all(Be.container.getProviders().map(rt=>rt.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function vn(Be,we,rt){var vt;let Rt=null!==(vt=Ve[Be])&&void 0!==vt?vt:Be;rt&&(Rt+=`-${rt}`);const $t=Rt.match(/\s|\//),$=we.match(/\s|\//);if($t||$){const B=[`Unable to register library "${Rt}" with version "${we}":`];return $t&&B.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),$t&&$&&B.push("and"),$&&B.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void H.warn(B.join(" "))}ft(new U.wA(`${Rt}-version`,()=>({library:Rt,version:we}),"VERSION"))}function ut(Be,we){if(null!==Be&&"function"!=typeof Be)throw rn.create("invalid-log-argument");(0,k.Am)(Be,we)}function Fn(Be){(0,k.Ub)(Be)}const ir="firebase-heartbeat-database",_n=1,Ln="firebase-heartbeat-store";let Er=null;function Ct(){return Er||(Er=(0,ce.X3)(ir,_n,{upgrade:(Be,we)=>{0===we&&Be.createObjectStore(Ln)}}).catch(Be=>{throw rn.create("idb-open",{originalErrorMessage:Be.message})})),Er}function Tt(){return(Tt=(0,p.Z)(function*(Be){try{return(yield Ct()).transaction(Ln).objectStore(Ln).get(Vn(Be))}catch(we){if(we instanceof ee.ZR)H.warn(we.message);else{const rt=rn.create("idb-get",{originalErrorMessage:we?.message});H.warn(rt.message)}}})).apply(this,arguments)}function Bt(Be,we){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(Be,we){try{const vt=(yield Ct()).transaction(Ln,"readwrite");return yield vt.objectStore(Ln).put(we,Vn(Be)),vt.done}catch(rt){if(rt instanceof ee.ZR)H.warn(rt.message);else{const vt=rn.create("idb-set",{originalErrorMessage:rt?.message});H.warn(vt.message)}}})).apply(this,arguments)}function Vn(Be){return`${Be.name}!${Be.options.appId}`}class Rr{constructor(we){this.container=we,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new kt(rt),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var we=this;return(0,p.Z)(function*(){const vt=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Ot();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!we._heartbeatsCache.heartbeats.some($t=>$t.date===Rt))return we._heartbeatsCache.heartbeats.push({date:Rt,agent:vt}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter($t=>{const $=new Date($t.date).valueOf();return Date.now()-$<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,p.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const rt=Ot(),{heartbeatsToSend:vt,unsentEntries:Rt}=function Ir(Be,we=1024){const rt=[];let vt=Be.slice();for(const Rt of Be){const $t=rt.find($=>$.agent===Rt.agent);if($t){if($t.dates.push(Rt.date),fr(rt)>we){$t.dates.pop();break}}else if(rt.push({agent:Rt.agent,dates:[Rt.date]}),fr(rt)>we){rt.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:vt}}(we._heartbeatsCache.heartbeats),$t=(0,ee.L)(JSON.stringify({version:2,heartbeats:vt}));return we._heartbeatsCache.lastSentHeartbeatDate=rt,Rt.length>0?(we._heartbeatsCache.heartbeats=Rt,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),$t})()}}function Ot(){return(new Date).toISOString().substring(0,10)}class kt{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,p.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function pt(Be){return Tt.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var rt=this;return(0,p.Z)(function*(){var vt;if(yield rt._canUseIndexedDBPromise){const $t=yield rt.read();return Bt(rt.app,{lastSentHeartbeatDate:null!==(vt=we.lastSentHeartbeatDate)&&void 0!==vt?vt:$t.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var rt=this;return(0,p.Z)(function*(){var vt;if(yield rt._canUseIndexedDBPromise){const $t=yield rt.read();return Bt(rt.app,{lastSentHeartbeatDate:null!==(vt=we.lastSentHeartbeatDate)&&void 0!==vt?vt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...we.heartbeats]})}})()}}function fr(Be){return(0,ee.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function Bn(Be){ft(new U.wA("platform-logger",we=>new oe(we),"PRIVATE")),ft(new U.wA("heartbeat",we=>new Rr(we),"PRIVATE")),vn(le,"0.9.3",Be),vn(le,"0.9.3","esm2017"),vn("fire-js","")}("")},4859:(yt,be,F)=>{F.d(be,{H0:()=>le,wA:()=>k});var p=F(5861),U=F(2090);class k{constructor(H,j,Q){this.name=H,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ee="[DEFAULT]";class ce{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const Q=new U.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:j});Oe&&Q.resolve(Oe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const Q=this.normalizeInstanceIdentifier(H?.identifier),Oe=null!==(j=H?.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(me){if(Oe)return null;throw me}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function fe(he){return"EAGER"===he.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[j,Q]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(j);try{const me=this.getOrInitializeService({instanceIdentifier:Oe});Q.resolve(me)}catch{}}}}clearInstance(H=ee){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,p.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ee){return this.instances.has(H)}getOptions(H=ee){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,Q=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[me,Ke]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(me)&&Ke.resolve(Oe);return Oe}onInit(H,j){var Q;const Oe=this.normalizeInstanceIdentifier(j),me=null!==(Q=this.onInitCallbacks.get(Oe))&&void 0!==Q?Q:new Set;me.add(H),this.onInitCallbacks.set(Oe,me);const Ke=this.instances.get(Oe);return Ke&&H(Ke,Oe),()=>{me.delete(H)}}invokeOnInitCallbacks(H,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Oe of Q)try{Oe(H,j)}catch{}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let Q=this.instances.get(H);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=H,he===ee?void 0:he),options:j}),this.instances.set(H,Q),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(Q,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Q)}catch{}var he;return Q||null}normalizeInstanceIdentifier(H=ee){return this.component?this.component.multipleInstances?H:ee:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new ce(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},2833:(yt,be,F)=>{var p=F(5861),U=F(9681),k=F(4859),ee=F(2090),ce=F(8766);const oe="@firebase/installations",fe="0.6.3",le=1e4,he=`w:${fe}`,H="FIS_v2",j="https://firebaseinstallations.googleapis.com/v1",Q=36e5,et=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pe(J){return J instanceof ee.ZR&&J.code.includes("request-failed")}function De({projectId:J}){return`${j}/projects/${J}/installations`}function Ae(J){return{token:J.token,requestStatus:2,expiresIn:re(J.expiresIn),creationTime:Date.now()}}function Te(J,ye){return Me.apply(this,arguments)}function Me(){return(Me=(0,p.Z)(function*(J,ye){const bt=(yield ye.json()).error;return et.create("request-failed",{requestName:J,serverCode:bt.code,serverMessage:bt.message,serverStatus:bt.status})})).apply(this,arguments)}function Re({apiKey:J}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":J})}function He(J){return Z.apply(this,arguments)}function Z(){return(Z=(0,p.Z)(function*(J){const ye=yield J();return ye.status>=500&&ye.status<600?J():ye})).apply(this,arguments)}function re(J){return Number(J.replace("s","000"))}function Ge(){return(Ge=(0,p.Z)(function*({appConfig:J,heartbeatServiceProvider:ye},{fid:je}){const bt=De(J),Dn=Re(J),_t=ye.getImmediate({optional:!0});if(_t){const bn=yield _t.getHeartbeatsHeader();bn&&Dn.append("x-firebase-client",bn)}const dn={method:"POST",headers:Dn,body:JSON.stringify({fid:je,authVersion:H,appId:J.appId,sdkVersion:he})},Nr=yield He(()=>fetch(bt,dn));if(Nr.ok){const bn=yield Nr.json();return{fid:bn.fid||je,registrationStatus:2,refreshToken:bn.refreshToken,authToken:Ae(bn.authToken)}}throw yield Te("Create Installation",Nr)})).apply(this,arguments)}function xt(J){return new Promise(ye=>{setTimeout(ye,J)})}const se=/^[cdef][\w-]{21}$/,de="";function ge(){try{const J=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(J),J[0]=112+J[0]%16;const je=function xe(J){return function Xe(J){return btoa(String.fromCharCode(...J)).replace(/\+/g,"-").replace(/\//g,"_")}(J).substr(0,22)}(J);return se.test(je)?je:de}catch{return de}}function Le(J){return`${J.appName}!${J.appId}`}const Ve=new Map;function tt(J,ye){const je=Le(J);wt(je,ye),function ft(J,ye){const je=function Ut(){return!Ye&&"BroadcastChannel"in self&&(Ye=new BroadcastChannel("[Firebase] FID Change"),Ye.onmessage=J=>{wt(J.data.key,J.data.fid)}),Ye}();je&&je.postMessage({key:J,fid:ye}),function mn(){0===Ve.size&&Ye&&(Ye.close(),Ye=null)}()}(je,ye)}function wt(J,ye){const je=Ve.get(J);if(je)for(const bt of je)bt(ye)}let Ye=null;const Mn="firebase-installations-database",rn=1,yn="firebase-installations-store";let Yn=null;function rr(){return Yn||(Yn=(0,ce.X3)(Mn,rn,{upgrade:(J,ye)=>{0===ye&&J.createObjectStore(yn)}})),Yn}function zn(J,ye){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,p.Z)(function*(J,ye){const je=Le(J),Dn=(yield rr()).transaction(yn,"readwrite"),_t=Dn.objectStore(yn),nn=yield _t.get(je);return yield _t.put(ye,je),yield Dn.done,(!nn||nn.fid!==ye.fid)&&tt(J,ye.fid),ye})).apply(this,arguments)}function Dr(J){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(J){const ye=Le(J),bt=(yield rr()).transaction(yn,"readwrite");yield bt.objectStore(yn).delete(ye),yield bt.done})).apply(this,arguments)}function vn(J,ye){return ut.apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(J,ye){const je=Le(J),Dn=(yield rr()).transaction(yn,"readwrite"),_t=Dn.objectStore(yn),nn=yield _t.get(je),dn=ye(nn);return void 0===dn?yield _t.delete(je):yield _t.put(dn,je),yield Dn.done,dn&&(!nn||nn.fid!==dn.fid)&&tt(J,dn.fid),dn})).apply(this,arguments)}function Fn(J){return ir.apply(this,arguments)}function ir(){return ir=(0,p.Z)(function*(J){let ye;const je=yield vn(J.appConfig,bt=>{const Dn=function _n(J){return un(J||{fid:ge(),registrationStatus:0})}(bt),_t=function Ln(J,ye){if(0===ye.registrationStatus){if(!navigator.onLine)return{installationEntry:ye,registrationPromise:Promise.reject(et.create("app-offline"))};const je={fid:ye.fid,registrationStatus:1,registrationTime:Date.now()},bt=function Er(J,ye){return Ct.apply(this,arguments)}(J,je);return{installationEntry:je,registrationPromise:bt}}return 1===ye.registrationStatus?{installationEntry:ye,registrationPromise:pt(J)}:{installationEntry:ye}}(J,Dn);return ye=_t.registrationPromise,_t.installationEntry});return je.fid===de?{installationEntry:yield ye}:{installationEntry:je,registrationPromise:ye}}),ir.apply(this,arguments)}function Ct(){return Ct=(0,p.Z)(function*(J,ye){try{const je=yield function Qe(J,ye){return Ge.apply(this,arguments)}(J,ye);return zn(J.appConfig,je)}catch(je){throw pe(je)&&409===je.customData.serverCode?yield Dr(J.appConfig):yield zn(J.appConfig,{fid:ye.fid,registrationStatus:0}),je}}),Ct.apply(this,arguments)}function pt(J){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*(J){let ye=yield Bt(J.appConfig);for(;1===ye.registrationStatus;)yield xt(100),ye=yield Bt(J.appConfig);if(0===ye.registrationStatus){const{installationEntry:je,registrationPromise:bt}=yield Fn(J);return bt||je}return ye})).apply(this,arguments)}function Bt(J){return vn(J,ye=>{if(!ye)throw et.create("installation-not-found");return un(ye)})}function un(J){return function Vn(J){return 1===J.registrationStatus&&J.registrationTime+le<Date.now()}(J)?{fid:J.fid,registrationStatus:0}:J}function Un(){return(Un=(0,p.Z)(function*({appConfig:J,heartbeatServiceProvider:ye},je){const bt=function Rr(J,{fid:ye}){return`${De(J)}/${ye}/authTokens:generate`}(J,je),Dn=function Ce(J,{refreshToken:ye}){const je=Re(J);return je.append("Authorization",function _e(J){return`${H} ${J}`}(ye)),je}(J,je),_t=ye.getImmediate({optional:!0});if(_t){const bn=yield _t.getHeartbeatsHeader();bn&&Dn.append("x-firebase-client",bn)}const dn={method:"POST",headers:Dn,body:JSON.stringify({installation:{sdkVersion:he,appId:J.appId}})},Nr=yield He(()=>fetch(bt,dn));if(Nr.ok)return Ae(yield Nr.json());throw yield Te("Generate Auth Token",Nr)})).apply(this,arguments)}function Ot(J){return Ir.apply(this,arguments)}function Ir(){return Ir=(0,p.Z)(function*(J,ye=!1){let je;const bt=yield vn(J.appConfig,_t=>{if(!rt(_t))throw et.create("not-registered");const nn=_t.authToken;if(!ye&&function vt(J){return 2===J.requestStatus&&!function Rt(J){const ye=Date.now();return ye<J.creationTime||J.creationTime+J.expiresIn<ye+Q}(J)}(nn))return _t;if(1===nn.requestStatus)return je=function kt(J,ye){return fr.apply(this,arguments)}(J,ye),_t;{if(!navigator.onLine)throw et.create("app-offline");const dn=function $t(J){const ye={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},J),{authToken:ye})}(_t);return je=function Be(J,ye){return we.apply(this,arguments)}(J,dn),dn}});return je?yield je:bt.authToken}),Ir.apply(this,arguments)}function fr(){return(fr=(0,p.Z)(function*(J,ye){let je=yield Bn(J.appConfig);for(;1===je.authToken.requestStatus;)yield xt(100),je=yield Bn(J.appConfig);const bt=je.authToken;return 0===bt.requestStatus?Ot(J,ye):bt})).apply(this,arguments)}function Bn(J){return vn(J,ye=>{if(!rt(ye))throw et.create("not-registered");return function $(J){return 1===J.requestStatus&&J.requestTime+le<Date.now()}(ye.authToken)?Object.assign(Object.assign({},ye),{authToken:{requestStatus:0}}):ye})}function we(){return we=(0,p.Z)(function*(J,ye){try{const je=yield function hr(J,ye){return Un.apply(this,arguments)}(J,ye),bt=Object.assign(Object.assign({},ye),{authToken:je});return yield zn(J.appConfig,bt),je}catch(je){if(!pe(je)||401!==je.customData.serverCode&&404!==je.customData.serverCode){const bt=Object.assign(Object.assign({},ye),{authToken:{requestStatus:0}});yield zn(J.appConfig,bt)}else yield Dr(J.appConfig);throw je}}),we.apply(this,arguments)}function rt(J){return void 0!==J&&2===J.registrationStatus}function N(){return(N=(0,p.Z)(function*(J){const ye=J,{installationEntry:je,registrationPromise:bt}=yield Fn(ye);return bt?bt.catch(console.error):Ot(ye).catch(console.error),je.fid})).apply(this,arguments)}function T(){return T=(0,p.Z)(function*(J,ye=!1){const je=J;return yield function x(J){return G.apply(this,arguments)}(je),(yield Ot(je,ye)).token}),T.apply(this,arguments)}function G(){return(G=(0,p.Z)(function*(J){const{registrationPromise:ye}=yield Fn(J);ye&&(yield ye)})).apply(this,arguments)}function pn(J){return et.create("missing-app-config-values",{valueName:J})}const _s="installations",uo=J=>{const ye=J.getProvider("app").getImmediate(),je=function St(J){if(!J||!J.options)throw pn("App Configuration");if(!J.name)throw pn("App Name");const ye=["projectId","apiKey","appId"];for(const je of ye)if(!J.options[je])throw pn(je);return{appName:J.name,projectId:J.options.projectId,apiKey:J.options.apiKey,appId:J.options.appId}}(ye);return{app:ye,appConfig:je,heartbeatServiceProvider:(0,U._getProvider)(ye,"heartbeat"),_delete:()=>Promise.resolve()}},co=J=>{const ye=J.getProvider("app").getImmediate(),je=(0,U._getProvider)(ye,_s).getImmediate();return{getId:()=>function B(J){return N.apply(this,arguments)}(je),getToken:Dn=>function M(J){return T.apply(this,arguments)}(je,Dn)}};(function Wn(){(0,U._registerComponent)(new k.wA(_s,uo,"PUBLIC")),(0,U._registerComponent)(new k.wA("installations-internal",co,"PRIVATE"))})(),(0,U.registerVersion)(oe,fe),(0,U.registerVersion)(oe,fe,"esm2017")},1877:(yt,be,F)=>{F.d(be,{Am:()=>he,Ub:()=>le,Yd:()=>fe,in:()=>U});const p=[];var U=(()=>{return(H=U||(U={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",U;var H})();const k={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ee=U.INFO,ce={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},oe=(H,j,...Q)=>{if(j<H.logLevel)return;const Oe=(new Date).toISOString(),me=ce[j];if(!me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[me](`[${Oe}]  ${H.name}:`,...Q)};class fe{constructor(j){this.name=j,this._logLevel=ee,this._logHandler=oe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in U))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...j),this._logHandler(this,U.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...j),this._logHandler(this,U.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,U.INFO,...j),this._logHandler(this,U.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,U.WARN,...j),this._logHandler(this,U.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...j),this._logHandler(this,U.ERROR,...j)}}function le(H){p.forEach(j=>{j.setLogLevel(H)})}function he(H,j){for(const Q of p){let Oe=null;j&&j.level&&(Oe=k[j.level]),Q.userLogHandler=null===H?null:(me,Ke,...et)=>{const pe=et.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");Ke>=(Oe??me.logLevel)&&H({level:U[Ke].toLowerCase(),message:pe,args:et,type:me.name})}}}},3008:(yt,be,F)=>{F.d(be,{Gb:()=>Ir,Kz:()=>vt,Iv:()=>Bn});var p=F(5861),U=F(9681),k=F(1877),ee=F(2090),ce=F(4859);F(2833);const fe="analytics",le="firebase_id",he="origin",H=6e4,j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Q="https://www.googletagmanager.com/gtag/js",Oe=new k.Yd("@firebase/analytics");function me(N){return Promise.all(N.map(M=>M.catch(T=>T)))}function De(){return(De=(0,p.Z)(function*(N,M,T,x,G,ie){const Pe=x[G];try{if(Pe)yield M[Pe];else{const st=(yield me(T)).find(Je=>Je.measurementId===G);st&&(yield M[st.appId])}}catch(Ne){Oe.error(Ne)}N("config",G,ie)})).apply(this,arguments)}function Te(){return(Te=(0,p.Z)(function*(N,M,T,x,G){try{let ie=[];if(G&&G.send_to){let Pe=G.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Ne=yield me(T);for(const st of Pe){const Je=Ne.find(En=>En.measurementId===st),Xt=Je&&M[Je.appId];if(!Xt){ie=[];break}ie.push(Xt)}}0===ie.length&&(ie=Object.values(M)),yield Promise.all(ie),N("event",x,G||{})}catch(ie){Oe.error(ie)}})).apply(this,arguments)}const Z=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),re=30,Ge=new class Qe{constructor(M={},T=1e3){this.throttleMetadata=M,this.intervalMillis=T}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,T){this.throttleMetadata[M]=T}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function xt(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function se(){return(se=(0,p.Z)(function*(N){var M;const{appId:T,apiKey:x}=N,G={method:"GET",headers:xt(x)},ie=j.replace("{app-id}",T),Pe=yield fetch(ie,G);if(200!==Pe.status&&304!==Pe.status){let Ne="";try{const st=yield Pe.json();null!==(M=st.error)&&void 0!==M&&M.message&&(Ne=st.error.message)}catch{}throw Z.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Ne})}return Pe.json()})).apply(this,arguments)}function ge(){return(ge=(0,p.Z)(function*(N,M=Ge,T){const{appId:x,apiKey:G,measurementId:ie}=N.options;if(!x)throw Z.create("no-app-id");if(!G){if(ie)return{measurementId:ie,appId:x};throw Z.create("no-api-key")}const Pe=M.getThrottleMetadata(x)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ne=new nt;return setTimeout((0,p.Z)(function*(){Ne.abort()}),void 0!==T?T:H),xe({appId:x,apiKey:G,measurementId:ie},Pe,Ne,M)})).apply(this,arguments)}function xe(N,M,T){return Le.apply(this,arguments)}function Le(){return Le=(0,p.Z)(function*(N,{throttleEndTimeMillis:M,backoffCount:T},x,G=Ge){var ie;const{appId:Pe,measurementId:Ne}=N;try{yield function Ve(N,M){return new Promise((T,x)=>{const G=Math.max(M-Date.now(),0),ie=setTimeout(T,G);N.addEventListener(()=>{clearTimeout(ie),x(Z.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(x,M)}catch(st){if(Ne)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:Pe,measurementId:Ne};throw st}try{const st=yield function Xe(N){return se.apply(this,arguments)}(N);return G.deleteThrottleMetadata(Pe),st}catch(st){const Je=st;if(!function tt(N){if(!(N instanceof ee.ZR&&N.customData))return!1;const M=Number(N.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Je)){if(G.deleteThrottleMetadata(Pe),Ne)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Je?.message}]`),{appId:Pe,measurementId:Ne};throw st}const Xt=503===Number(null===(ie=Je?.customData)||void 0===ie?void 0:ie.httpStatus)?(0,ee.$s)(T,G.intervalMillis,re):(0,ee.$s)(T,G.intervalMillis),En={throttleEndTimeMillis:Date.now()+Xt,backoffCount:T+1};return G.setThrottleMetadata(Pe,En),Oe.debug(`Calling attemptFetch again in ${Xt} millis`),xe(N,En,x,G)}}),Le.apply(this,arguments)}class nt{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let fn,zn;function ft(){return(ft=(0,p.Z)(function*(N,M,T,x,G){if(G&&G.global)N("event",T,x);else{const ie=yield M;N("event",T,Object.assign(Object.assign({},x),{send_to:ie}))}})).apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*(N,M,T,x){if(x&&x.global)return N("set",{user_id:T}),Promise.resolve();N("config",yield M,{update:!0,user_id:T})})).apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(){if(!(0,ee.hl)())return Oe.warn(Z.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(N){return Oe.warn(Z.create("indexeddb-unavailable",{errorInfo:N?.toString()}).message),!1}return!0})).apply(this,arguments)}function Fn(){return Fn=(0,p.Z)(function*(N,M,T,x,G,ie,Pe){var Ne;const st=function de(N){return ge.apply(this,arguments)}(N);st.then(pn=>{T[pn.measurementId]=pn.appId,N.options.measurementId&&pn.measurementId!==N.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pn=>Oe.error(pn)),M.push(st);const Je=function ln(){return vn.apply(this,arguments)}().then(pn=>{if(pn)return x.getId()}),[Xt,En]=yield Promise.all([st,Je]);(function Ce(N){const M=window.document.getElementsByTagName("script");for(const T of Object.values(M))if(T.src&&T.src.includes(Q)&&T.src.includes(N))return T;return null})(ie)||function Ke(N,M){const T=document.createElement("script");T.src=`${Q}?l=${N}&id=${M}`,T.async=!0,document.head.appendChild(T)}(ie,Xt.measurementId),zn&&(G("consent","default",zn),function Qn(N){zn=N}(void 0)),G("js",new Date);const St=null!==(Ne=Pe?.config)&&void 0!==Ne?Ne:{};return St[he]="firebase",St.update=!0,null!=En&&(St[le]=En),G("config",Xt.measurementId,St),fn&&(G("set",fn),function Dr(N){fn=N}(void 0)),Xt.measurementId}),Fn.apply(this,arguments)}class ir{constructor(M){this.app=M}_delete(){return delete _n[this.app.options.appId],Promise.resolve()}}let _n={},Ln=[];const Er={};let Tt,Bt,Ct="dataLayer",pt="gtag",un=!1;function Un(N,M,T){!function hr(){const N=[];if((0,ee.ru)()&&N.push("This is a browser extension environment."),(0,ee.zI)()||N.push("Cookies are not available."),N.length>0){const M=N.map((x,G)=>`(${G+1}) ${x}`).join(" "),T=Z.create("invalid-analytics-context",{errorInfo:M});Oe.warn(T.message)}}();const x=N.options.appId;if(!x)throw Z.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw Z.create("no-api-key");Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_n[x])throw Z.create("already-exists",{id:x});if(!un){!function et(N){let M=[];Array.isArray(window[N])?M=window[N]:window[N]=M}(Ct);const{wrappedGtag:ie,gtagCore:Pe}=function Re(N,M,T,x,G){let ie=function(...Pe){window[x].push(arguments)};return window[G]&&"function"==typeof window[G]&&(ie=window[G]),window[G]=function Me(N,M,T,x){function ie(){return ie=(0,p.Z)(function*(Pe,Ne,st){try{"event"===Pe?yield function Ae(N,M,T,x,G){return Te.apply(this,arguments)}(N,M,T,Ne,st):"config"===Pe?yield function pe(N,M,T,x,G,ie){return De.apply(this,arguments)}(N,M,T,x,Ne,st):"consent"===Pe?N("consent","update",st):N("set",Ne)}catch(Je){Oe.error(Je)}}),ie.apply(this,arguments)}return function G(Pe,Ne,st){return ie.apply(this,arguments)}}(ie,N,M,T),{gtagCore:ie,wrappedGtag:window[G]}}(_n,Ln,Er,Ct,pt);Bt=ie,Tt=Pe,un=!0}return _n[x]=function ut(N,M,T,x,G,ie,Pe){return Fn.apply(this,arguments)}(N,Ln,Er,M,Tt,Ct,T),new ir(N)}function Ir(){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}function Bn(N,M,T){N=(0,ee.m9)(N),function mn(N,M,T,x){return Mn.apply(this,arguments)}(Bt,_n[N.app.options.appId],M,T).catch(x=>Oe.error(x))}function vt(N,M,T,x){N=(0,ee.m9)(N),function wt(N,M,T,x,G){return ft.apply(this,arguments)}(Bt,_n[N.app.options.appId],M,T,x).catch(G=>Oe.error(G))}const $t="@firebase/analytics",$="0.9.3";!function B(){(0,U._registerComponent)(new ce.wA(fe,(M,{options:T})=>Un(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),T),"PUBLIC")),(0,U._registerComponent)(new ce.wA("analytics-internal",function N(M){try{const T=M.getProvider(fe).getImmediate();return{logEvent:(x,G,ie)=>vt(T,x,G,ie)}}catch(T){throw Z.create("interop-component-reg-failed",{reason:T})}},"PRIVATE")),(0,U.registerVersion)($t,$),(0,U.registerVersion)($t,$,"esm2017")}()},259:(yt,be,F)=>{F.d(be,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp});var p=F(9681);(0,p.registerVersion)("firebase","9.17.1","app")},9260:(yt,be,F)=>{F.d(be,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(yt,be,F)=>{F.r(be);var p=F(5861),U=F(3942),k=F(2722),ee=F(2090),fe=(F(9681),F(1877),F(4859));function le(){return window}const he=2e3;function j(){return j=(0,p.Z)(function*(M,T,x){var G;const{BuildInfo:ie}=le();(0,k.ap)(T.sessionId,"AuthEvent did not contain a session ID");const Pe=yield function De(M){return Ae.apply(this,arguments)}(T.sessionId),Ne={};return(0,k.aq)()?Ne.ibi=ie.packageName:(0,k.ar)()?Ne.apn=ie.packageName:(0,k.as)(M,"operation-not-supported-in-this-environment"),ie.displayName&&(Ne.appDisplayName=ie.displayName),Ne.sessionId=Pe,(0,k.at)(M,x,T.type,void 0,null!==(G=T.eventId)&&void 0!==G?G:void 0,Ne)}),j.apply(this,arguments)}function Oe(){return(Oe=(0,p.Z)(function*(M){const{BuildInfo:T}=le(),x={};(0,k.aq)()?x.iosBundleId=T.packageName:(0,k.ar)()?x.androidPackageName=T.packageName:(0,k.as)(M,"operation-not-supported-in-this-environment"),yield(0,k.au)(M,x)})).apply(this,arguments)}function et(){return(et=(0,p.Z)(function*(M,T,x){const{cordova:G}=le();let ie=()=>{};try{yield new Promise((Pe,Ne)=>{let st=null;function Je(){var St;Pe();const pn=null===(St=G.plugins.browsertab)||void 0===St?void 0:St.close;"function"==typeof pn&&pn(),"function"==typeof x?.close&&x.close()}function Xt(){st||(st=window.setTimeout(()=>{Ne((0,k.aw)(M,"redirect-cancelled-by-user"))},he))}function En(){"visible"===document?.visibilityState&&Xt()}T.addPassiveListener(Je),document.addEventListener("resume",Xt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",En,!1),ie=()=>{T.removePassiveListener(Je),document.removeEventListener("resume",Xt,!1),document.removeEventListener("visibilitychange",En,!1),st&&window.clearTimeout(st)}})}finally{ie()}})).apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(M){const T=function Te(M){if((0,k.ap)(/[0-9a-zA-Z]+/.test(M),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(M);const T=new ArrayBuffer(M.length),x=new Uint8Array(T);for(let G=0;G<M.length;G++)x[G]=M.charCodeAt(G);return x}(M),x=yield crypto.subtle.digest("SHA-256",T);return Array.from(new Uint8Array(x)).map(ie=>ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Me=20;class Re extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(T=>{this.resolveInialized=T})}addPassiveListener(T){this.passiveListeners.add(T)}removePassiveListener(T){this.passiveListeners.delete(T)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(T){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(T)),super.onEvent(T)}initialized(){var T=this;return(0,p.Z)(function*(){yield T.initPromise})()}}function Z(M){return re.apply(this,arguments)}function re(){return(re=(0,p.Z)(function*(M){const T=yield Ge()._get(xt(M));return T&&(yield Ge()._remove(xt(M))),T})).apply(this,arguments)}function Qe(){const M=[],T="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<Me;x++){const G=Math.floor(Math.random()*T.length);M.push(T.charAt(G))}return M.join("")}function Ge(){return(0,k.az)(k.b)}function xt(M){return(0,k.aA)("authEvent",M.config.apiKey,M.name)}function de(M){if(!M?.includes("?"))return{};const[T,...x]=M.split("?");return(0,ee.zd)(x.join("?"))}const Le=class xe{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(T){var x=this;return(0,p.Z)(function*(){const G=T._key();let ie=x.eventManagers.get(G);return ie||(ie=new Re(T),x.eventManagers.set(G,ie),x.attachCallbackListeners(T,ie)),ie})()}_openPopup(T){(0,k.as)(T,"operation-not-supported-in-this-environment")}_openRedirect(T,x,G,ie){var Pe=this;return(0,p.Z)(function*(){!function pe(M){var T,x,G,ie,Pe,Ne,st,Je,Xt,En;const St=le();(0,k.ax)("function"==typeof(null===(T=St?.universalLinks)||void 0===T?void 0:T.subscribe),M,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(x=St?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(Pe=null===(ie=null===(G=St?.cordova)||void 0===G?void 0:G.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Pe?void 0:Pe.openUrl),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Je=null===(st=null===(Ne=St?.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===st?void 0:st.browsertab)||void 0===Je?void 0:Je.isAvailable),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(En=null===(Xt=St?.cordova)||void 0===Xt?void 0:Xt.InAppBrowser)||void 0===En?void 0:En.open),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(T);const Ne=yield Pe._initialize(T);yield Ne.initialized(),Ne.resetRedirect(),(0,k.aD)(),yield Pe._originValidation(T);const st=function Ce(M,T,x=null){return{type:T,eventId:x,urlResponse:null,sessionId:Qe(),postBody:null,tenantId:M.tenantId,error:(0,k.aw)(M,"no-auth-event")}}(T,G,ie);yield function He(M,T){return Ge()._set(xt(M),T)}(T,st);const Je=yield function H(M,T,x){return j.apply(this,arguments)}(T,st,x),Xt=yield function me(M){const{cordova:T}=le();return new Promise(x=>{T.plugins.browsertab.isAvailable(G=>{let ie=null;G?T.plugins.browsertab.openUrl(M):ie=T.InAppBrowser.open(M,(0,k.av)()?"_blank":"_system","location=yes"),x(ie)})})}(Je);return function Ke(M,T,x){return et.apply(this,arguments)}(T,Ne,Xt)})()}_isIframeWebStorageSupported(T,x){throw new Error("Method not implemented.")}_originValidation(T){const x=T._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function Q(M){return Oe.apply(this,arguments)}(T)),this.originValidationPromises[x]}attachCallbackListeners(T,x){const{universalLinks:G,handleOpenURL:ie,BuildInfo:Pe}=le(),Ne=setTimeout((0,p.Z)(function*(){yield Z(T),x.onEvent(Ve())}),500),st=function(){var En=(0,p.Z)(function*(St){clearTimeout(Ne);const pn=yield Z(T);let _s=null;pn&&St?.url&&(_s=function _e(M,T){var x,G;const ie=function se(M){const T=de(M),x=T.link?decodeURIComponent(T.link):void 0,G=de(x).link,ie=T.deep_link_id?decodeURIComponent(T.deep_link_id):void 0;return de(ie).link||ie||G||x||M}(T);if(ie.includes("/__/auth/callback")){const Pe=de(ie),Ne=Pe.firebaseError?function Xe(M){try{return JSON.parse(M)}catch{return null}}(decodeURIComponent(Pe.firebaseError)):null,st=null===(G=null===(x=Ne?.code)||void 0===x?void 0:x.split("auth/"))||void 0===G?void 0:G[1],Je=st?(0,k.aw)(st):null;return Je?{type:M.type,eventId:M.eventId,tenantId:M.tenantId,error:Je,urlResponse:null,sessionId:null,postBody:null}:{type:M.type,eventId:M.eventId,tenantId:M.tenantId,sessionId:M.sessionId,urlResponse:ie,postBody:null}}return null}(pn,St.url)),x.onEvent(_s||Ve())});return function(pn){return En.apply(this,arguments)}}();typeof G<"u"&&"function"==typeof G.subscribe&&G.subscribe(null,st);const Je=ie,Xt=`${Pe.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var En=(0,p.Z)(function*(St){if(St.toLowerCase().startsWith(Xt)&&st({url:St}),"function"==typeof Je)try{Je(St)}catch(pn){console.error(pn)}});return function(St){return En.apply(this,arguments)}}()}};function Ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}const wt=1e3;function ft(){var M;return(null===(M=self?.location)||void 0===M?void 0:M.protocol)||null}function Ut(M=(0,ee.z$)()){return!("file:"!==ft()&&"ionic:"!==ft()&&"capacitor:"!==ft()||!M.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yn(){try{const M=self.localStorage,T=k.aI();if(M)return M.setItem(T,"1"),M.removeItem(T),!function yn(M=(0,ee.z$)()){return function Mn(){return(0,ee.w1)()&&11===document?.documentMode}()||function rn(M=(0,ee.z$)()){return/Edge\/\d+/.test(M)}(M)}()||(0,ee.hl)()}catch{return rr()&&(0,ee.hl)()}return!1}function rr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function Ye(){return"http:"===ft()||"https:"===ft()}()||(0,ee.ru)()||Ut())&&!function mn(){return(0,ee.b$)()||(0,ee.UG)()}()&&Yn()&&!rr()}function Qn(){return Ut()&&typeof document<"u"}function ln(){return(ln=(0,p.Z)(function*(){return!!Qn()&&new Promise(M=>{const T=setTimeout(()=>{M(!1)},wt);document.addEventListener("deviceready",()=>{clearTimeout(T),M(!0)})})})).apply(this,arguments)}const ut={LOCAL:"local",NONE:"none",SESSION:"session"},Fn=k.ax,ir="persistence";function Ln(M){return Er.apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(M){yield M._initializationPromise;const T=pt(),x=k.aA(ir,M.config.apiKey,M.name);T&&T.setItem(x,M._getPersistence())})).apply(this,arguments)}function pt(){var M;try{return(null===(M=function vn(){return typeof window<"u"?window:null}())||void 0===M?void 0:M.sessionStorage)||null}catch{return null}}const Tt=k.ax;class Bt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(Le),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(T){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(T)})()}_openPopup(T,x,G,ie){var Pe=this;return(0,p.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._openPopup(T,x,G,ie)})()}_openRedirect(T,x,G,ie){var Pe=this;return(0,p.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._openRedirect(T,x,G,ie)})()}_isIframeWebStorageSupported(T,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(T,x)}_originValidation(T){return this.assertedUnderlyingResolver._originValidation(T)}get _shouldInitProactively(){return Qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var T=this;return(0,p.Z)(function*(){if(T.underlyingResolver)return;const x=yield function Dr(){return ln.apply(this,arguments)}();T.underlyingResolver=x?T.cordovaResolver:T.browserResolver})()}}function un(M){return M.unwrap()}function hr(M){return Rr(M)}function Rr(M){const{_tokenResponse:T}=M instanceof ee.ZR?M.customData:M;if(!T)return null;if(!(M instanceof ee.ZR)&&"temporaryProof"in T&&"phoneNumber"in T)return k.P.credentialFromResult(M);const x=T.providerId;if(!x||x===k.o.PASSWORD)return null;let G;switch(x){case k.o.GOOGLE:G=k.Q;break;case k.o.FACEBOOK:G=k.N;break;case k.o.GITHUB:G=k.T;break;case k.o.TWITTER:G=k.W;break;default:const{oauthIdToken:ie,oauthAccessToken:Pe,oauthTokenSecret:Ne,pendingToken:st,nonce:Je}=T;return Pe||Ne||ie||st?st?x.startsWith("saml.")?k.aL._create(x,st):k.J._fromParams({providerId:x,signInMethod:x,pendingToken:st,idToken:ie,accessToken:Pe}):new k.U(x).credential({idToken:ie,accessToken:Pe,rawNonce:Je}):null}return M instanceof ee.ZR?G.credentialFromError(M):G.credentialFromResult(M)}function Ot(M,T){return T.catch(x=>{throw x instanceof ee.ZR&&function Un(M,T){var x;const G=null===(x=T.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===T?.code)T.resolver=new fr(M,k.an(M,T));else if(G){const ie=Rr(T),Pe=T;ie&&(Pe.credential=ie,Pe.tenantId=G.tenantId||void 0,Pe.email=G.email||void 0,Pe.phoneNumber=G.phoneNumber||void 0)}}(M,x),x}).then(x=>{const ie=x.user;return{operationType:x.operationType,credential:hr(x),additionalUserInfo:k.al(x),user:Bn.getOrCreate(ie)}})}function Ir(M,T){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(M,T){const x=yield T;return{verificationId:x.verificationId,confirm:G=>Ot(M,x.confirm(G))}})).apply(this,arguments)}class fr{constructor(T,x){this.resolver=x,this.auth=function Vn(M){return M.wrapped()}(T)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(T){return Ot(un(this.auth),this.resolver.resolveSignIn(T))}}class Bn{constructor(T){this._delegate=T,this.multiFactor=k.ao(T)}static getOrCreate(T){return Bn.USER_MAP.has(T)||Bn.USER_MAP.set(T,new Bn(T)),Bn.USER_MAP.get(T)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(T){return this._delegate.getIdTokenResult(T)}getIdToken(T){return this._delegate.getIdToken(T)}linkAndRetrieveDataWithCredential(T){return this.linkWithCredential(T)}linkWithCredential(T){var x=this;return(0,p.Z)(function*(){return Ot(x.auth,k.Z(x._delegate,T))})()}linkWithPhoneNumber(T,x){var G=this;return(0,p.Z)(function*(){return Ir(G.auth,k.l(G._delegate,T,x))})()}linkWithPopup(T){var x=this;return(0,p.Z)(function*(){return Ot(x.auth,k.d(x._delegate,T,Bt))})()}linkWithRedirect(T){var x=this;return(0,p.Z)(function*(){return yield Ln(k.aE(x.auth)),k.g(x._delegate,T,Bt)})()}reauthenticateAndRetrieveDataWithCredential(T){return this.reauthenticateWithCredential(T)}reauthenticateWithCredential(T){var x=this;return(0,p.Z)(function*(){return Ot(x.auth,k._(x._delegate,T))})()}reauthenticateWithPhoneNumber(T,x){return Ir(this.auth,k.r(this._delegate,T,x))}reauthenticateWithPopup(T){return Ot(this.auth,k.e(this._delegate,T,Bt))}reauthenticateWithRedirect(T){var x=this;return(0,p.Z)(function*(){return yield Ln(k.aE(x.auth)),k.h(x._delegate,T,Bt)})()}sendEmailVerification(T){return k.ab(this._delegate,T)}unlink(T){var x=this;return(0,p.Z)(function*(){return yield k.ak(x._delegate,T),x})()}updateEmail(T){return k.ag(this._delegate,T)}updatePassword(T){return k.ah(this._delegate,T)}updatePhoneNumber(T){return k.u(this._delegate,T)}updateProfile(T){return k.af(this._delegate,T)}verifyBeforeUpdateEmail(T,x){return k.ac(this._delegate,T,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bn.USER_MAP=new WeakMap;const Be=k.ax;let we=(()=>{class M{constructor(x,G){if(this.app=x,G.isInitialized())return this._delegate=G.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ie}=x.options;Be(ie,"invalid-api-key",{appName:x.name}),Be(ie,"invalid-api-key",{appName:x.name});const Pe=typeof window<"u"?Bt:void 0;this._delegate=G.initialize({options:{persistence:vt(ie,x.name),popupRedirectResolver:Pe}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,G){k.G(this._delegate,x,G)}applyActionCode(x){return k.a2(this._delegate,x)}checkActionCode(x){return k.a3(this._delegate,x)}confirmPasswordReset(x,G){return k.a1(this._delegate,x,G)}createUserWithEmailAndPassword(x,G){var ie=this;return(0,p.Z)(function*(){return Ot(ie._delegate,k.a5(ie._delegate,x,G))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return k.aa(this._delegate,x)}isSignInWithEmailLink(x){return k.a8(this._delegate,x)}getRedirectResult(){var x=this;return(0,p.Z)(function*(){Be(zn(),x._delegate,"operation-not-supported-in-this-environment");const G=yield k.j(x._delegate,Bt);return G?Ot(x._delegate,Promise.resolve(G)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function tt(M,T){(0,k.aE)(M)._logFramework(T)}(this._delegate,x)}onAuthStateChanged(x,G,ie){const{next:Pe,error:Ne,complete:st}=rt(x,G,ie);return this._delegate.onAuthStateChanged(Pe,Ne,st)}onIdTokenChanged(x,G,ie){const{next:Pe,error:Ne,complete:st}=rt(x,G,ie);return this._delegate.onIdTokenChanged(Pe,Ne,st)}sendSignInLinkToEmail(x,G){return k.a7(this._delegate,x,G)}sendPasswordResetEmail(x,G){return k.a0(this._delegate,x,G||void 0)}setPersistence(x){var G=this;return(0,p.Z)(function*(){let ie;switch(function _n(M,T){Fn(Object.values(ut).includes(T),M,"invalid-persistence-type"),(0,ee.b$)()?Fn(T!==ut.SESSION,M,"unsupported-persistence-type"):(0,ee.UG)()?Fn(T===ut.NONE,M,"unsupported-persistence-type"):rr()?Fn(T===ut.NONE||T===ut.LOCAL&&(0,ee.hl)(),M,"unsupported-persistence-type"):Fn(T===ut.NONE||Yn(),M,"unsupported-persistence-type")}(G._delegate,x),x){case ut.SESSION:ie=k.a;break;case ut.LOCAL:ie=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case ut.NONE:ie=k.L;break;default:return k.as("argument-error",{appName:G._delegate.name})}return G._delegate.setPersistence(ie)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return Ot(this._delegate,k.X(this._delegate))}signInWithCredential(x){return Ot(this._delegate,k.Y(this._delegate,x))}signInWithCustomToken(x){return Ot(this._delegate,k.$(this._delegate,x))}signInWithEmailAndPassword(x,G){return Ot(this._delegate,k.a6(this._delegate,x,G))}signInWithEmailLink(x,G){return Ot(this._delegate,k.a9(this._delegate,x,G))}signInWithPhoneNumber(x,G){return Ir(this._delegate,k.s(this._delegate,x,G))}signInWithPopup(x){var G=this;return(0,p.Z)(function*(){return Be(zn(),G._delegate,"operation-not-supported-in-this-environment"),Ot(G._delegate,k.c(G._delegate,x,Bt))})()}signInWithRedirect(x){var G=this;return(0,p.Z)(function*(){return Be(zn(),G._delegate,"operation-not-supported-in-this-environment"),yield Ln(G._delegate),k.f(G._delegate,x,Bt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return k.a4(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return M.Persistence=ut,M})();function rt(M,T,x){let G=M;"function"!=typeof M&&({next:G,error:T,complete:x}=M);const ie=G;return{next:Ne=>ie(Ne&&Bn.getOrCreate(Ne)),error:T,complete:x}}function vt(M,T){const x=function Ct(M,T){const x=pt();if(!x)return[];const G=k.aA(ir,M,T);switch(x.getItem(G)){case ut.NONE:return[k.L];case ut.LOCAL:return[k.i,k.a];case ut.SESSION:return[k.a];default:return[]}}(M,T);if(typeof self<"u"&&!x.includes(k.i)&&x.push(k.i),typeof window<"u")for(const G of[k.b,k.a])x.includes(G)||x.push(G);return x.includes(k.L)||x.push(k.L),x}class Rt{constructor(){this.providerId="phone",this._delegate=new k.P(un(U.Z.auth()))}static credential(T,x){return k.P.credential(T,x)}verifyPhoneNumber(T,x){return this._delegate.verifyPhoneNumber(T,x)}unwrap(){return this._delegate}}Rt.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Rt.PROVIDER_ID=k.P.PROVIDER_ID;const $t=k.ax;class ${constructor(T,x,G=U.Z.app()){var ie;$t(null===(ie=G.options)||void 0===ie?void 0:ie.apiKey,"invalid-api-key",{appName:G.name}),this._delegate=new k.R(T,x,G.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function N(M){M.INTERNAL.registerComponent(new fe.wA("auth-compat",T=>{const x=T.getProvider("app-compat").getImmediate(),G=T.getProvider("auth");return new we(x,G)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Rt,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:$,TwitterAuthProvider:k.W,Auth:we,AuthCredential:k.H,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),M.registerVersion("@firebase/auth-compat","0.3.3")}(U.Z)},8766:(yt,be,F)=>{F.d(be,{Lj:()=>Me,X3:()=>Te});var p=F(5861);const U=(re,_e)=>_e.some(Qe=>re instanceof Qe);let k,ee;const fe=new WeakMap,le=new WeakMap,he=new WeakMap,H=new WeakMap,j=new WeakMap;let me={get(re,_e,Qe){if(re instanceof IDBTransaction){if("done"===_e)return le.get(re);if("objectStoreNames"===_e)return re.objectStoreNames||he.get(re);if("store"===_e)return Qe.objectStoreNames[1]?void 0:Qe.objectStore(Qe.objectStoreNames[0])}return De(re[_e])},set:(re,_e,Qe)=>(re[_e]=Qe,!0),has:(re,_e)=>re instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in re};function pe(re){return"function"==typeof re?function et(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(..._e){return re.apply(Ae(this),_e),De(fe.get(this))}:function(..._e){return De(re.apply(Ae(this),_e))}:function(_e,...Qe){const Ge=re.call(Ae(this),_e,...Qe);return he.set(Ge,_e.sort?_e.sort():[_e]),De(Ge)}}(re):(re instanceof IDBTransaction&&function Oe(re){if(le.has(re))return;const _e=new Promise((Qe,Ge)=>{const xt=()=>{re.removeEventListener("complete",Xe),re.removeEventListener("error",se),re.removeEventListener("abort",se)},Xe=()=>{Qe(),xt()},se=()=>{Ge(re.error||new DOMException("AbortError","AbortError")),xt()};re.addEventListener("complete",Xe),re.addEventListener("error",se),re.addEventListener("abort",se)});le.set(re,_e)}(re),U(re,function ce(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,me):re)}function De(re){if(re instanceof IDBRequest)return function Q(re){const _e=new Promise((Qe,Ge)=>{const xt=()=>{re.removeEventListener("success",Xe),re.removeEventListener("error",se)},Xe=()=>{Qe(De(re.result)),xt()},se=()=>{Ge(re.error),xt()};re.addEventListener("success",Xe),re.addEventListener("error",se)});return _e.then(Qe=>{Qe instanceof IDBCursor&&fe.set(Qe,re)}).catch(()=>{}),j.set(_e,re),_e}(re);if(H.has(re))return H.get(re);const _e=pe(re);return _e!==re&&(H.set(re,_e),j.set(_e,re)),_e}const Ae=re=>j.get(re);function Te(re,_e,{blocked:Qe,upgrade:Ge,blocking:xt,terminated:Xe}={}){const se=indexedDB.open(re,_e),de=De(se);return Ge&&se.addEventListener("upgradeneeded",ge=>{Ge(De(se.result),ge.oldVersion,ge.newVersion,De(se.transaction))}),Qe&&se.addEventListener("blocked",()=>Qe()),de.then(ge=>{Xe&&ge.addEventListener("close",()=>Xe()),xt&&ge.addEventListener("versionchange",()=>xt())}).catch(()=>{}),de}function Me(re,{blocked:_e}={}){const Qe=indexedDB.deleteDatabase(re);return _e&&Qe.addEventListener("blocked",()=>_e()),De(Qe).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],He=new Map;function Z(re,_e){if(!(re instanceof IDBDatabase)||_e in re||"string"!=typeof _e)return;if(He.get(_e))return He.get(_e);const Qe=_e.replace(/FromIndex$/,""),Ge=_e!==Qe,xt=Ce.includes(Qe);if(!(Qe in(Ge?IDBIndex:IDBObjectStore).prototype)||!xt&&!Re.includes(Qe))return;const Xe=function(){var se=(0,p.Z)(function*(de,...ge){const xe=this.transaction(de,xt?"readwrite":"readonly");let Le=xe.store;return Ge&&(Le=Le.index(ge.shift())),(yield Promise.all([Le[Qe](...ge),xt&&xe.done]))[0]});return function(ge){return se.apply(this,arguments)}}();return He.set(_e,Xe),Xe}!function Ke(re){me=re(me)}(re=>({...re,get:(_e,Qe,Ge)=>Z(_e,Qe)||re.get(_e,Qe,Ge),has:(_e,Qe)=>!!Z(_e,Qe)||re.has(_e,Qe)}))},5861:(yt,be,F)=>{function p(k,ee,ce,oe,fe,le,he){try{var H=k[le](he),j=H.value}catch(Q){return void ce(Q)}H.done?ee(j):Promise.resolve(j).then(oe,fe)}function U(k){return function(){var ee=this,ce=arguments;return new Promise(function(oe,fe){var le=k.apply(ee,ce);function he(j){p(le,oe,fe,he,H,"next",j)}function H(j){p(le,oe,fe,he,H,"throw",j)}he(void 0)})}}F.d(be,{Z:()=>U})}},yt=>{yt(yt.s=3851)}]);